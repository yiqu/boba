(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{oyDf:function(t,e,i){"use strict";i.r(e),i.d(e,"ManagementModule",(function(){return ct}));var r=i("ofXK"),n=i("3Pt+"),s=i("UmVK"),a=i("37S3"),c=i("tyNb"),o=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,n.j,n.r,s.a,a.a,c.f]]}),t})();var b=i("Cicx"),d=i("VsN/"),u=i("wZkO"),m=i("NFeN"),p=i("MutI");const h=function(t){return[t]};function g(t,e){if(1&t){const t=o.Xb();o.Wb(0,"a",7,8),o.ec("click",(function(){o.wc(t);const i=e.$implicit;return o.ic().activeLink=i})),o.Wb(2,"mat-icon",9),o.Fc(3),o.Vb(),o.Fc(4),o.Vb()}if(2&t){const t=e.$implicit,i=o.tc(1);o.oc("active",i.isActive)("routerLink",o.qc(4,h,t.url)),o.Db(3),o.Gc(t.iconName),o.Db(1),o.Hc(" ",t.display," ")}}let f=(()=>{class t{constructor(){this.tabLinks=[],this.tabLinks.push(new b.f("inventory","Inventory","inventory",!1,"assignment"),new b.f("users","Users","users",!1,"people"),new b.f("archives","Order Archives","archives",!1,"poll"))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-management"]],decls:11,vars:3,consts:[[1,"container","mb-3"],[1,"row","mb-3","comf","text-center","mt-3"],[1,"col-sm-12"],[3,"adminRequired"],[1,"row","mb-2","mt-2"],["mat-tab-nav-bar","",3,"backgroundColor"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click"],["rla","routerLinkActive"],["mat-list-icon","",1,"mr-1"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Wb(3,"h2"),o.Fc(4,"Management Corner"),o.Vb(),o.Vb(),o.Vb(),o.Rb(5,"app-notification-banner",3),o.Wb(6,"div",4),o.Wb(7,"div",2),o.Wb(8,"nav",5),o.Dc(9,g,5,6,"a",6),o.Vb(),o.Vb(),o.Vb(),o.Rb(10,"router-outlet"),o.Vb()),2&t&&(o.Db(5),o.oc("adminRequired",!0),o.Db(3),o.oc("backgroundColor",void 0),o.Db(1),o.oc("ngForOf",e.tabLinks))},directives:[d.a,u.b,r.k,c.g,c.e,u.a,c.d,m.a,p.a],styles:["a.mat-tab-link.mat-focus-indicator.mat-tab-label-active[_ngcontent-%COMP%]{font-weight:800;color:#000;opacity:.9}"]}),t})();var k=i("XNiG"),D=i("1G5W"),v=i("OO0l"),y=i("itXk"),F=i("lJxs"),L=i("sSZD");let V=(()=>{class t{constructor(t){this.firedb=t,this.BASE_SELECTIONS_URL="selections/",this.MILK_TEAS_URL="teas",this.FRUIT_TEAS_URL="creative-mix",this.YOGURT_TEAS_URL="yogurt",this.TOPPINGS_URL="toppings",this.milkTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.MILK_TEAS_URL),this.creativeMixTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.FRUIT_TEAS_URL),this.yogurtTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.YOGURT_TEAS_URL),this.toppingsListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.TOPPINGS_URL),this.milkTeasList$=this.getCartItemObs(this.milkTeasListFire),this.creativeMixTeasList$=this.getCartItemObs(this.creativeMixTeasListFire),this.yogurtTeasList$=this.getCartItemObs(this.yogurtTeasListFire),this.toppingsList$=this.getCartItemObs(this.toppingsListFire),this.allDrinksList$=Object(y.a)(this.milkTeasList$,this.creativeMixTeasList$,this.yogurtTeasList$,this.toppingsList$)}getFDB(){return this.firedb.database}getCartItemObs(t){return t.snapshotChanges().pipe(Object(F.a)(t=>this.addfireKey(t)))}getDrinkDetailObs(t,e){return this.firedb.object(this.BASE_SELECTIONS_URL+t+"/"+e).snapshotChanges().pipe(Object(F.a)(t=>this.addFireKeySingle(t)))}getDrinkDetail(t,e){return this.firedb.object(this.BASE_SELECTIONS_URL+t+"/"+e)}addFireKeySingle(t){return Object.assign({fireKey:t.payload.key},t.payload.val())}addfireKey(t){return t.map(t=>Object.assign({fireKey:t.payload.key},t.payload.val()))}}return t.\u0275fac=function(e){return new(e||t)(o.ac(L.a))},t.\u0275prov=o.Mb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var I=i("b8ES"),O=i("AB5n");let S=(()=>{class t{transform(t){let e="";return e+=t.display+" - $"+(t.price?t.price:"Not set"),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Pb({name:"inventoryDrinkDisplay",type:t,pure:!0}),t})();function W(t,e){if(1&t){const t=o.Xb();o.Wb(0,"li",12),o.ec("click",(function(){o.wc(t);const i=e.$implicit;return o.ic(2).onDrinkItemClick(i)})),o.Fc(1),o.jc(2,"inventoryDrinkDisplay"),o.Vb()}if(2&t){const t=e.$implicit;o.Db(1),o.Hc(" ",o.kc(2,1,t)," ")}}function T(t,e){if(1&t&&(o.Wb(0,"div",8),o.Wb(1,"ul",9),o.Wb(2,"li",10),o.Fc(3),o.jc(4,"countNumberDisplay"),o.Vb(),o.Dc(5,W,3,3,"li",11),o.Vb(),o.Vb()),2&t){const t=e.$implicit;o.Db(3),o.Ic("",t.header.display," ",o.kc(4,3,t.links.length),""),o.Db(2),o.oc("ngForOf",t.links)}}function w(t,e){1&t&&o.Fc(0," Loading drink inventory...\n")}let E=(()=>{class t{constructor(t,e,i,r){this.mis=t,this.fds=e,this.router=i,this.route=r,this.compDest$=new k.a,this.allDrinksList=[],this.inventorySubText="This is a list of all the selections of our editable items on the menu. Click on a item below to edit."}ngOnInit(){this.mis.allDrinksList$.pipe(Object(D.a)(this.compDest$)).subscribe(([t,e,i,r])=>{this.allDrinksList=[];const n=new v.i(t,e,i,r);this.createAllDrinksList(n)},t=>{},()=>{})}createAllDrinksList(t){for(const e in t)this.allDrinksList.push(new b.a(new b.c(e),t[e]))}onDrinkItemClick(t){this.router.navigate([t.seriesName?t.seriesName:"toppings",t.fireKey],{relativeTo:this.route})}ngOnDestroy(){this.compDest$.next()}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(V),o.Qb(I.a),o.Qb(c.c),o.Qb(c.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-management-inventory"]],decls:11,vars:2,consts:[[1,"row","mt-3","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","comf","center-align"],[1,"row","mb-3"],[1,"col-sm-12","roboto"],[1,"row"],["class","col-sm-4 mb-3",4,"ngFor","ngForOf"],["loading",""],[1,"col-sm-4","mb-3"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-primary roboto",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-primary","roboto",3,"click"]],template:function(t,e){1&t&&(o.Wb(0,"div",0),o.Wb(1,"div",1),o.Wb(2,"div",2),o.Fc(3," Inventory "),o.Vb(),o.Vb(),o.Vb(),o.Wb(4,"div",3),o.Wb(5,"div",4),o.Fc(6),o.Vb(),o.Vb(),o.Wb(7,"div",5),o.Dc(8,T,6,5,"div",6),o.Vb(),o.Dc(9,w,1,0,"ng-template",null,7,o.Ec)),2&t&&(o.Db(6),o.Hc(" ",e.inventorySubText," "),o.Db(2),o.oc("ngForOf",e.allDrinksList))},directives:[r.k],pipes:[O.a,S],styles:[".drink-item[_ngcontent-%COMP%]{cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]{color:#004085;background-color:#cce6ff;cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]:hover{color:#004085;background-color:#b8daff}"]}),t})(),C=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-management-users"]],decls:1,vars:0,template:function(t,e){1&t&&o.Fc(0,"Users\n")},styles:[""]}),t})(),N=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Kb({type:t,selectors:[["app-managment-archives"]],decls:1,vars:0,template:function(t,e){1&t&&o.Fc(0,"Archives\n")},styles:[""]}),t})();var U=i("E8I7"),_=i("eIep"),R=i("Pk+l"),A=i("LvDl"),M=i("MPcn"),x=i("DHDI"),$=i("kmnG"),K=i("qFsG"),P=i("bTqV"),j=i("d3UM"),q=i("FKr1"),B=i("B6IJ");function G(t,e){1&t&&(o.Wb(0,"mat-error"),o.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),o.Vb())}function Q(t,e){1&t&&(o.Wb(0,"mat-error"),o.Fc(1," Field is "),o.Wb(2,"strong"),o.Fc(3,"required"),o.Vb(),o.Vb())}function X(t,e){1&t&&(o.Wb(0,"mat-error"),o.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),o.Vb())}function H(t,e){1&t&&(o.Wb(0,"mat-error"),o.Fc(1," Field is "),o.Wb(2,"strong"),o.Fc(3,"required"),o.Vb(),o.Vb())}function J(t,e){if(1&t&&(o.Wb(0,"mat-option",19),o.Fc(1),o.Vb()),2&t){const t=e.$implicit;o.oc("value",t),o.Db(1),o.Hc(" ",t.seriesDisplay," ")}}function Y(t,e){if(1&t&&(o.Wb(0,"tr"),o.Wb(1,"td"),o.Wb(2,"mat-form-field",9),o.Wb(3,"mat-label"),o.Fc(4,"Drink Series"),o.Vb(),o.Wb(5,"mat-select",17),o.Dc(6,J,2,2,"mat-option",18),o.Vb(),o.Vb(),o.Vb(),o.Vb()),2&t){const t=o.ic(3);o.Db(6),o.oc("ngForOf",t.seriesList)}}function Z(t,e){1&t&&(o.Wb(0,"mat-error"),o.Fc(1," Please enter only integers and decimals. "),o.Vb())}function z(t,e){if(1&t){const t=o.Xb();o.Ub(0),o.Wb(1,"div",3),o.Wb(2,"div",4),o.Wb(3,"div",5),o.Fc(4," Item Detail "),o.Vb(),o.Wb(5,"div"),o.Fc(6),o.jc(7,"dateDisplay"),o.Vb(),o.Vb(),o.Vb(),o.Wb(8,"div",6),o.Wb(9,"div",7),o.Wb(10,"form",8),o.Wb(11,"table",9),o.Wb(12,"tr"),o.Wb(13,"td"),o.Wb(14,"mat-form-field",9),o.Wb(15,"mat-label"),o.Fc(16,"Drink Display Name"),o.Vb(),o.Rb(17,"input",10),o.Dc(18,G,2,0,"mat-error",11),o.Dc(19,Q,4,0,"mat-error",11),o.Vb(),o.Vb(),o.Vb(),o.Wb(20,"tr"),o.Wb(21,"td"),o.Wb(22,"mat-form-field",9),o.Wb(23,"mat-label"),o.Fc(24,"Drink ID"),o.Vb(),o.Rb(25,"input",12),o.Dc(26,X,2,0,"mat-error",11),o.Dc(27,H,4,0,"mat-error",11),o.Vb(),o.Vb(),o.Vb(),o.Dc(28,Y,7,1,"tr",11),o.Wb(29,"tr"),o.Wb(30,"td"),o.Wb(31,"mat-form-field",9),o.Wb(32,"mat-label"),o.Fc(33,"Drink Cost"),o.Vb(),o.Rb(34,"input",13),o.Dc(35,Z,2,0,"mat-error",11),o.Wb(36,"span",14),o.Fc(37,"$\xa0"),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Vb(),o.Wb(38,"div",15),o.Wb(39,"div",7),o.Wb(40,"button",16),o.ec("click",(function(){return o.wc(t),o.ic(2).onUpdate()})),o.Fc(41,"Update"),o.Vb(),o.Vb(),o.Vb(),o.Tb()}if(2&t){const t=o.ic(2);o.Db(6),o.Hc("Last updated: ",o.lc(7,9,t.lastUpdated,"FROMNOW"),""),o.Db(4),o.oc("formGroup",t.detailFg),o.Db(8),o.oc("ngIf",t.detailFg.get("display").hasError("lettersOnly")&&!t.detailFg.get("display").hasError("required")),o.Db(1),o.oc("ngIf",t.detailFg.get("display").hasError("required")),o.Db(7),o.oc("ngIf",t.detailFg.get("name").hasError("lettersOnly")&&!t.detailFg.get("name").hasError("required")),o.Db(1),o.oc("ngIf",t.detailFg.get("name").hasError("required")),o.Db(1),o.oc("ngIf",t.detailFg.controls.drinkSeries),o.Db(7),o.oc("ngIf",t.detailFg.get("drinkCost").hasError("numbersOnly")),o.Db(5),o.oc("disabled",t.detailFg.invalid)}}function tt(t,e){if(1&t&&(o.Ub(0),o.Dc(1,z,42,12,"ng-container",0),o.Tb()),2&t){const t=o.ic(),e=o.tc(2);o.Db(1),o.oc("ngIf",null!==t.currentDrink)("ngIfElse",e)}}function et(t,e){1&t&&o.Fc(0," Drink item is invalid.\n")}function it(t,e){1&t&&o.Fc(0," Loading drink item...\n")}const rt=[{path:"",component:f,children:[{path:"",redirectTo:"inventory",pathMatch:"full"},{path:"inventory",component:E},{path:"inventory/:drinkSeries/:id",component:(()=>{class t{constructor(t,e,i,r,n){this.router=t,this.route=e,this.is=i,this.fb=r,this.sbs=n,this.seriesList=[new U.d("Milk Tea",U.c.MILK_TEA),new U.d("Creative Mix",U.c.FRUIT_TEA),new U.d("Yogurt",U.c.YOGURT)],this.route.paramMap.pipe(Object(_.a)(t=>{const e=this.getFirebaseDrinkSeries(t.get("drinkSeries")),i=t.get("id");return this.is.getDrinkDetailObs(e,i)})).subscribe(t=>{this.isDrinkDetailValid(t)?(this.currentDrink=t,this.createDetailFg(),this.lastUpdated=this.getLastUpdated()):this.currentDrink=null})}ngOnInit(){}isDrinkDetailValid(t){return t.display&&t.name}createDetailFg(){this.detailFg=this.fb.group({display:R.a(this.currentDrink.display,!1,[n.s.required,M.a]),name:R.a(this.currentDrink.name,!1,[n.s.required,M.a]),drinkCost:R.b(this.getDrinkCost(),!1,[M.b])}),this.currentDrink.seriesName&&this.detailFg.addControl("drinkSeries",R.a(this.getFetchedDrinkSeriesValue(),!1,[n.s.required])),this.currentDrink.itemType&&this.detailFg.addControl("itemType",R.a(this.currentDrink.itemType,!1,[n.s.required]))}getFetchedDrinkSeriesValue(){const t=A.findIndex(this.seriesList,["seriesName",this.currentDrink.seriesName]);return this.seriesList[t]}getDrinkCost(){let t="0.00";return this.currentDrink.price&&(t=this.currentDrink.price),t}getLastUpdated(){let t=0;return this.currentDrink.lastUpdated&&(t=this.currentDrink.lastUpdated),t}onUpdate(){const t=this.createDrinkItemToUpdate();if(t){const e=this.isSeriesSame(t);let i;t.itemType?i=t.itemType:t.seriesName&&(i=this.getFirebaseDrinkSeries(t.seriesName)),this.is.getDrinkDetail(i,this.currentDrink.fireKey).set(t).then(i=>{this.sbs.openSnackBar(t.display+" saved!",1e3),e||this.is.getDrinkDetail(this.getFirebaseDrinkSeries(this.currentDrink.seriesName),this.currentDrink.fireKey).remove(),this.router.navigate(["../../"],{relativeTo:this.route})},e=>{this.sbs.openSnackBar(t.display+" could not be saved, error occured: "+e.code)}).finally(()=>{})}}isSeriesSame(t){return!this.currentDrink||!this.currentDrink.seriesName||this.currentDrink.seriesName===t.seriesName}createDrinkItemToUpdate(){const t=this.detailFg.value;if(this.detailFg.valid){let e=new U.b(t.display,t.name,t.drinkSeries?t.drinkSeries.seriesDisplay:null,t.drinkSeries?t.drinkSeries.seriesName:null,null,t.drinkCost,(new Date).getTime());return t.itemType&&(e.itemType=t.itemType),e}}getFirebaseDrinkSeries(t){let e;switch(t){case"milkTea":e="teas";break;case"creativeMix":e="creative-mix";break;case"yogurt":e="yogurt";break;case"toppings":e="toppings"}return e}}return t.\u0275fac=function(e){return new(e||t)(o.Qb(c.c),o.Qb(c.a),o.Qb(V),o.Qb(n.d),o.Qb(x.a))},t.\u0275cmp=o.Kb({type:t,selectors:[["app-inventory-drink-detail"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["drinkInvalid",""],["loadingDrink",""],[1,"row","mb-3"],[1,"col-sm-12","text-center"],[1,"order-label","mb-3","comf","center-align"],[1,"row"],[1,"col-sm-12"],[1,"detail-form",3,"formGroup"],[1,"full-w"],["matInput","","formControlName","display"],[4,"ngIf"],["matInput","","formControlName","name"],["matInput","","formControlName","drinkCost",1,"field-right-align"],["matPrefix",""],[1,"row","mt-2"],["mat-flat-button","","color","primary",3,"disabled","click"],["formControlName","drinkSeries"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(o.Dc(0,tt,2,2,"ng-container",0),o.Dc(1,et,1,0,"ng-template",null,1,o.Ec),o.Dc(3,it,1,0,"ng-template",null,2,o.Ec)),2&t){const t=o.tc(4);o.oc("ngIf",void 0!==e.currentDrink)("ngIfElse",t)}},directives:[r.l,n.t,n.o,n.i,$.c,$.g,K.b,n.b,n.n,n.g,$.h,P.a,$.b,j.a,r.k,q.n],pipes:[B.a],styles:[".detail-form[_ngcontent-%COMP%]{min-width:150px;max-width:400px;width:100%}.field-right-align[_ngcontent-%COMP%]{text-align:right}"]}),t})()},{path:"users",component:C},{path:"archives",component:N}]}];let nt=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},imports:[[c.f.forChild(rt)],c.f]}),t})();var st=i("re6+"),at=i("gz+R");let ct=(()=>{class t{}return t.\u0275mod=o.Ob({type:t}),t.\u0275inj=o.Nb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,n.r,n.j,c.f,s.a,a.a,st.a,l,at.a,nt]]}),t})()}}]);