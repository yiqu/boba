function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{oyDf:function(e,t,i){"use strict";i.r(t),i.d(t,"ManagementModule",(function(){return be}));var r,n=i("ofXK"),a=i("3Pt+"),s=i("UmVK"),o=i("37S3"),c=i("tyNb"),l=i("fXoL"),u=((r=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:r}),r.\u0275inj=l.Nb({factory:function(e){return new(e||r)},providers:[],imports:[[n.c,a.j,a.r,s.a,o.a,c.f]]}),r),b=i("Cicx"),f=function(e){return[e]};function d(e,t){if(1&e&&(l.Wb(0,"li",6),l.Wb(1,"a",7),l.Fc(2),l.Vb(),l.Vb()),2&e){var i=t.$implicit;l.oc("routerLinkActive","active link-act"),l.Db(1),l.oc("routerLink",l.qc(3,f,i.url)),l.Db(1),l.Gc(i.display)}}var m,p,h,k=((m=function(){function e(){_classCallCheck(this,e),this.managementLinks=[],this.managementLinks.push(new b.e("inventory","Inventory","inventory"),new b.e("users","Users","users"),new b.e("archives","Order Archives","archives"))}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||m)},m.\u0275cmp=l.Kb({type:m,selectors:[["app-management"]],decls:11,vars:1,consts:[[1,"container","mb-3"],[1,"row","mb-3","comf","text-center","mt-3"],[1,"col-12"],[1,"row","mb-2","mt-2"],[1,"list-group","list-group-horizontal","comf"],["class","list-group-item links",3,"routerLinkActive",4,"ngFor","ngForOf"],[1,"list-group-item","links",3,"routerLinkActive"],[3,"routerLink"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"h2"),l.Fc(4,"Management Corner"),l.Vb(),l.Vb(),l.Vb(),l.Wb(5,"div",3),l.Wb(6,"div",2),l.Wb(7,"ul",4),l.Dc(8,d,3,5,"li",5),l.Vb(),l.Vb(),l.Vb(),l.Rb(9,"hr"),l.Rb(10,"router-outlet"),l.Vb()),2&e&&(l.Db(8),l.oc("ngForOf",t.managementLinks))},directives:[n.k,c.g,c.d,c.e],encapsulation:2}),m),g=i("XNiG"),v=i("1G5W"),y=i("OO0l"),D=i("itXk"),F=i("lJxs"),C=i("sSZD"),_=((p=function(){function e(t){_classCallCheck(this,e),this.firedb=t,this.BASE_SELECTIONS_URL="selections/",this.MILK_TEAS_URL="teas",this.FRUIT_TEAS_URL="creative-mix",this.YOGURT_TEAS_URL="yogurt",this.milkTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.MILK_TEAS_URL),this.creativeMixTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.FRUIT_TEAS_URL),this.yogurtTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.YOGURT_TEAS_URL),this.milkTeasList$=this.getCartItemObs(this.milkTeasListFire),this.creativeMixTeasList$=this.getCartItemObs(this.creativeMixTeasListFire),this.yogurtTeasList$=this.getCartItemObs(this.yogurtTeasListFire),this.allDrinksList$=Object(D.a)(this.milkTeasList$,this.creativeMixTeasList$,this.yogurtTeasList$)}return _createClass(e,[{key:"getFDB",value:function(){return this.firedb.database}},{key:"getCartItemObs",value:function(e){var t=this;return e.snapshotChanges().pipe(Object(F.a)((function(e){return t.addfireKey(e)})))}},{key:"getDrinkDetailObs",value:function(e,t){var i=this;return this.firedb.object(this.BASE_SELECTIONS_URL+e+"/"+t).snapshotChanges().pipe(Object(F.a)((function(e){return i.addFireKeySingle(e)})))}},{key:"getDrinkDetail",value:function(e,t){return this.firedb.object(this.BASE_SELECTIONS_URL+e+"/"+t)}},{key:"addFireKeySingle",value:function(e){return Object.assign({fireKey:e.payload.key},e.payload.val())}},{key:"addfireKey",value:function(e){return e.map((function(e){return Object.assign({fireKey:e.payload.key},e.payload.val())}))}}]),e}()).\u0275fac=function(e){return new(e||p)(l.ac(C.a))},p.\u0275prov=l.Mb({token:p,factory:p.\u0275fac,providedIn:"root"}),p),L=i("b8ES"),V=i("AB5n"),W=((h=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t="";return t+=e.display+" - $"+(e.price?e.price:"Not set")}}]),e}()).\u0275fac=function(e){return new(e||h)},h.\u0275pipe=l.Pb({name:"inventoryDrinkDisplay",type:h,pure:!0}),h);function I(e,t){if(1&e){var i=l.Xb();l.Wb(0,"li",11),l.ec("click",(function(){l.wc(i);var e=t.$implicit;return l.ic(2).onDrinkItemClick(e)})),l.Fc(1),l.jc(2,"inventoryDrinkDisplay"),l.Vb()}if(2&e){var r=t.$implicit;l.Db(1),l.Hc(" ",l.kc(2,1,r)," ")}}function T(e,t){if(1&e&&(l.Wb(0,"div",7),l.Wb(1,"ul",8),l.Wb(2,"li",9),l.Fc(3),l.jc(4,"countNumberDisplay"),l.Vb(),l.Dc(5,I,3,3,"li",10),l.Vb(),l.Vb()),2&e){var i=t.$implicit;l.Db(3),l.Ic("",i.header.display," ",l.kc(4,3,i.links.length),""),l.Db(2),l.oc("ngForOf",i.links)}}function O(e,t){1&e&&l.Fc(0," Loading drink inventory...\n")}var S,w,E,A=((E=function(){function e(t,i,r,n){_classCallCheck(this,e),this.mis=t,this.fds=i,this.router=r,this.route=n,this.compDest$=new g.a,this.allDrinksList=[],this.inventorySubText="This is a list of all the selections of our drinks on the menu. Click on a drink below to edit."}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.mis.allDrinksList$.pipe(Object(v.a)(this.compDest$)).subscribe((function(t){var i=_slicedToArray(t,3),r=i[0],n=i[1],a=i[2];e.allDrinksList=[];var s=new y.a(r,n,a);e.createAllDrinksList(s)}),(function(e){}),(function(){}))}},{key:"createAllDrinksList",value:function(e){for(var t in e)this.allDrinksList.push(new b.a(new b.b(t),e[t]))}},{key:"onDrinkItemClick",value:function(e){this.router.navigate([e.seriesName,e.fireKey],{relativeTo:this.route})}},{key:"ngOnDestroy",value:function(){this.compDest$.next()}}]),e}()).\u0275fac=function(e){return new(e||E)(l.Qb(_),l.Qb(L.a),l.Qb(c.c),l.Qb(c.a))},E.\u0275cmp=l.Kb({type:E,selectors:[["app-management-inventory"]],decls:11,vars:2,consts:[[1,"row","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","mb-3","comf","center-align"],[1,"row"],[1,"col-sm-12","roboto","mb-3"],["class","col-sm-4",4,"ngFor","ngForOf"],["loading",""],[1,"col-sm-4"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-primary roboto",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-primary","roboto",3,"click"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Fc(3," Inventory "),l.Vb(),l.Vb(),l.Vb(),l.Wb(4,"div",3),l.Wb(5,"div",4),l.Fc(6),l.Vb(),l.Vb(),l.Wb(7,"div",3),l.Dc(8,T,6,5,"div",5),l.Vb(),l.Dc(9,O,1,0,"ng-template",null,6,l.Ec)),2&e&&(l.Db(6),l.Hc(" ",t.inventorySubText," "),l.Db(2),l.oc("ngForOf",t.allDrinksList))},directives:[n.k],pipes:[V.a,W],styles:[".drink-item[_ngcontent-%COMP%]{cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]{color:#004085;background-color:#cce6ff;cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]:hover{color:#004085;background-color:#b8daff}"]}),E),U=((w=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||w)},w.\u0275cmp=l.Kb({type:w,selectors:[["app-management-users"]],decls:1,vars:0,template:function(e,t){1&e&&l.Fc(0,"Users\n")},styles:[""]}),w),N=((S=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||S)},S.\u0275cmp=l.Kb({type:S,selectors:[["app-managment-archives"]],decls:1,vars:0,template:function(e,t){1&e&&l.Fc(0,"Archives\n")},styles:[""]}),S),R=i("E8I7"),M=i("eIep"),j=i("Pk+l"),x=i("LvDl"),K=i("MPcn"),$=i("DHDI"),P=i("kmnG"),q=i("qFsG"),B=i("d3UM"),G=i("bTqV"),Q=i("FKr1"),H=i("B6IJ");function X(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),l.Vb())}function J(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Field is "),l.Wb(2,"strong"),l.Fc(3,"required"),l.Vb(),l.Vb())}function Y(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),l.Vb())}function z(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Field is "),l.Wb(2,"strong"),l.Fc(3,"required"),l.Vb(),l.Vb())}function Z(e,t){if(1&e&&(l.Wb(0,"mat-option",19),l.Fc(1),l.Vb()),2&e){var i=t.$implicit;l.oc("value",i),l.Db(1),l.Hc(" ",i.seriesDisplay," ")}}function ee(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only integers and decimals. "),l.Vb())}function te(e,t){if(1&e){var i=l.Xb();l.Ub(0),l.Wb(1,"div",3),l.Wb(2,"div",4),l.Wb(3,"div",5),l.Fc(4," Drink Detail "),l.Vb(),l.Wb(5,"div"),l.Fc(6),l.jc(7,"dateDisplay"),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",6),l.Wb(9,"div",7),l.Wb(10,"form",8),l.Wb(11,"table",9),l.Wb(12,"tr"),l.Wb(13,"td"),l.Wb(14,"mat-form-field",9),l.Wb(15,"mat-label"),l.Fc(16,"Drink Display Name"),l.Vb(),l.Rb(17,"input",10),l.Dc(18,X,2,0,"mat-error",11),l.Dc(19,J,4,0,"mat-error",11),l.Vb(),l.Vb(),l.Vb(),l.Wb(20,"tr"),l.Wb(21,"td"),l.Wb(22,"mat-form-field",9),l.Wb(23,"mat-label"),l.Fc(24,"Drink ID"),l.Vb(),l.Rb(25,"input",12),l.Dc(26,Y,2,0,"mat-error",11),l.Dc(27,z,4,0,"mat-error",11),l.Vb(),l.Vb(),l.Vb(),l.Wb(28,"tr"),l.Wb(29,"td"),l.Wb(30,"mat-form-field",9),l.Wb(31,"mat-label"),l.Fc(32,"Drink Series"),l.Vb(),l.Wb(33,"mat-select",13),l.Dc(34,Z,2,2,"mat-option",14),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(35,"tr"),l.Wb(36,"td"),l.Wb(37,"mat-form-field",9),l.Wb(38,"mat-label"),l.Fc(39,"Drink Cost"),l.Vb(),l.Rb(40,"input",15),l.Dc(41,ee,2,0,"mat-error",11),l.Wb(42,"span",16),l.Fc(43,"$\xa0"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(44,"div",17),l.Wb(45,"div",7),l.Wb(46,"button",18),l.ec("click",(function(){return l.wc(i),l.ic(2).onUpdate()})),l.Fc(47,"Update"),l.Vb(),l.Vb(),l.Vb(),l.Tb()}if(2&e){var r=l.ic(2);l.Db(6),l.Hc("Last updated: ",l.lc(7,9,r.lastUpdated,"FROMNOW"),""),l.Db(4),l.oc("formGroup",r.detailFg),l.Db(8),l.oc("ngIf",r.detailFg.get("display").hasError("lettersOnly")&&!r.detailFg.get("display").hasError("required")),l.Db(1),l.oc("ngIf",r.detailFg.get("display").hasError("required")),l.Db(7),l.oc("ngIf",r.detailFg.get("name").hasError("lettersOnly")&&!r.detailFg.get("name").hasError("required")),l.Db(1),l.oc("ngIf",r.detailFg.get("name").hasError("required")),l.Db(7),l.oc("ngForOf",r.seriesList),l.Db(7),l.oc("ngIf",r.detailFg.get("drinkCost").hasError("numbersOnly")),l.Db(5),l.oc("disabled",r.detailFg.invalid)}}function ie(e,t){if(1&e&&(l.Ub(0),l.Dc(1,te,48,12,"ng-container",0),l.Tb()),2&e){var i=l.ic(),r=l.tc(2);l.Db(1),l.oc("ngIf",null!==i.currentDrink)("ngIfElse",r)}}function re(e,t){1&e&&l.Fc(0," Drink item is invalid.\n")}function ne(e,t){1&e&&l.Fc(0," Loading drink item...\n")}var ae,se,oe,ce=[{path:"",component:k,children:[{path:"",redirectTo:"inventory",pathMatch:"full"},{path:"inventory",component:A},{path:"inventory/:drinkSeries/:id",component:(ae=function(){function e(t,i,r,n,a){var s=this;_classCallCheck(this,e),this.router=t,this.route=i,this.is=r,this.fb=n,this.sbs=a,this.seriesList=[new R.d("Milk Tea",R.c.MILK_TEA),new R.d("Creative Mix",R.c.FRUIT_TEA),new R.d("Yogurt",R.c.YOGURT)],this.route.paramMap.pipe(Object(M.a)((function(e){var t=s.getFirebaseDrinkSeries(e.get("drinkSeries")),i=e.get("id");return s.is.getDrinkDetailObs(t,i)}))).subscribe((function(e){s.isDrinkDetailValid(e)?(s.currentDrink=e,s.createDetailFg(),s.lastUpdated=s.getLastUpdated()):s.currentDrink=null}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isDrinkDetailValid",value:function(e){return e.display&&e.name&&e.seriesDisplay&&e.seriesName}},{key:"createDetailFg",value:function(){this.detailFg=this.fb.group({display:j.a(this.currentDrink.display,!1,[a.s.required,K.a]),name:j.a(this.currentDrink.name,!1,[a.s.required,K.a]),drinkSeries:j.a(this.getFetchedDrinkSeriesValue(),!1,[a.s.required]),drinkCost:j.b(this.getDrinkCost(),!1,[K.b])})}},{key:"getFetchedDrinkSeriesValue",value:function(){var e=x.findIndex(this.seriesList,["seriesName",this.currentDrink.seriesName]);return this.seriesList[e]}},{key:"getDrinkCost",value:function(){var e="0.00";return this.currentDrink.price&&(e=this.currentDrink.price),e}},{key:"getLastUpdated",value:function(){var e=0;return this.currentDrink.lastUpdated&&(e=this.currentDrink.lastUpdated),e}},{key:"onUpdate",value:function(){var e=this,t=this.createDrinkItemToUpdate();if(t){var i=this.isSeriesSame(t);this.is.getDrinkDetail(this.getFirebaseDrinkSeries(t.seriesName),this.currentDrink.fireKey).set(t).then((function(r){e.sbs.openSnackBar(t.display+" saved!"),i||e.is.getDrinkDetail(e.getFirebaseDrinkSeries(e.currentDrink.seriesName),e.currentDrink.fireKey).remove()}),(function(i){e.sbs.openSnackBar(t.display+" could not be saved, error occured: "+i)})).finally((function(){e.router.navigate(["../../"],{relativeTo:e.route})}))}}},{key:"isSeriesSame",value:function(e){return this.currentDrink?this.currentDrink.seriesName===e.seriesName:null}},{key:"createDrinkItemToUpdate",value:function(){var e=this.detailFg.value;if(this.detailFg.valid)return new R.b(e.display,e.name,e.drinkSeries.seriesDisplay,e.drinkSeries.seriesName,null,e.drinkCost,(new Date).getTime())}},{key:"getFirebaseDrinkSeries",value:function(e){var t;switch(e){case"milkTea":t="teas";break;case"creativeMix":t="creative-mix";break;case"yogurt":t="yogurt"}return t}}]),e}(),ae.\u0275fac=function(e){return new(e||ae)(l.Qb(c.c),l.Qb(c.a),l.Qb(_),l.Qb(a.d),l.Qb($.a))},ae.\u0275cmp=l.Kb({type:ae,selectors:[["app-inventory-drink-detail"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["drinkInvalid",""],["loadingDrink",""],[1,"row","mb-3"],[1,"col-sm-12","text-center"],[1,"order-label","mb-3","comf","center-align"],[1,"row"],[1,"col-12"],[1,"detail-form",3,"formGroup"],[1,"full-w"],["matInput","","formControlName","display"],[4,"ngIf"],["matInput","","formControlName","name"],["formControlName","drinkSeries"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","drinkCost",1,"field-right-align"],["matPrefix",""],[1,"row","mt-2"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){if(1&e&&(l.Dc(0,ie,2,2,"ng-container",0),l.Dc(1,re,1,0,"ng-template",null,1,l.Ec),l.Dc(3,ne,1,0,"ng-template",null,2,l.Ec)),2&e){var i=l.tc(4);l.oc("ngIf",void 0!==t.currentDrink)("ngIfElse",i)}},directives:[n.l,a.t,a.o,a.i,P.c,P.g,q.b,a.b,a.n,a.g,B.a,n.k,P.h,G.a,P.b,Q.n],pipes:[H.a],styles:[".detail-form[_ngcontent-%COMP%]{min-width:150px;max-width:400px;width:100%}.field-right-align[_ngcontent-%COMP%]{text-align:right}"]}),ae)},{path:"users",component:U},{path:"archives",component:N}]}],le=((se=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:se}),se.\u0275inj=l.Nb({factory:function(e){return new(e||se)},imports:[[c.f.forChild(ce)],c.f]}),se),ue=i("re6+"),be=((oe=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:oe}),oe.\u0275inj=l.Nb({factory:function(e){return new(e||oe)},providers:[],imports:[[n.c,a.r,a.j,c.f,s.a,o.a,ue.a,u,le]]}),oe)}}]);