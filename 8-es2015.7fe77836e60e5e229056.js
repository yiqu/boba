(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"3iNi":function(t,e,i){"use strict";i.r(e),i.d(e,"MyAccountModule",(function(){return q}));var r=i("ofXK"),o=i("3Pt+"),n=i("UmVK"),a=i("tyNb"),c=i("XNiG"),s=i("Cicx"),l=i("fXoL"),b=i("wZkO"),m=i("NFeN"),d=i("MutI");const u=function(t){return[t]};function p(t,e){if(1&t){const t=l.Wb();l.Vb(0,"a",5,6),l.cc("click",(function(){l.uc(t);const i=e.$implicit;return l.gc().activeLink=i})),l.Vb(2,"mat-icon",7),l.Dc(3),l.Ub(),l.Dc(4),l.Ub()}if(2&t){const t=e.$implicit,i=l.rc(1);l.mc("active",i.isActive)("routerLink",l.oc(4,u,t.url)),l.Cb(3),l.Ec(t.iconName),l.Cb(1),l.Fc(" ",t.display," ")}}let f=(()=>{class t{constructor(){this.compDest$=new c.a,this.tabLinks=[],this.tabLinks.push(new s.f("view","Overview","view",!1,"account_circle"),new s.f("edit","Edit","edit",!1,"edit"))}ngOnInit(){}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=l.Jb({type:t,selectors:[["app-my-account"]],decls:6,vars:2,consts:[[1,"container","mb-3"],[1,"row","mb-2","mt-2"],[1,"col-sm-12"],["mat-tab-nav-bar","",3,"backgroundColor"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click"],["rla","routerLinkActive"],["mat-list-icon","",1,"mr-1"]],template:function(t,e){1&t&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"div",2),l.Vb(3,"nav",3),l.Bc(4,p,5,6,"a",4),l.Ub(),l.Ub(),l.Ub(),l.Qb(5,"router-outlet"),l.Ub()),2&t&&(l.Cb(3),l.mc("backgroundColor",void 0),l.Cb(1),l.mc("ngForOf",e.tabLinks))},directives:[b.b,r.k,a.g,a.e,b.a,a.d,m.a,d.a],styles:[".profile-img-parent[_ngcontent-%COMP%]{height:15rem}"]}),t})();var h=i("itXk"),g=i("1G5W"),v=i("kt0X"),U=i("D7s6"),V=i("PmIS");let y=(()=>{class t{constructor(t){this.store=t}updateUserProfile(t){this.store.dispatch(V.h({info:t}))}getUserProfile(){this.store.dispatch(V.e())}}return t.\u0275fac=function(e){return new(e||t)(l.Zb(v.h))},t.\u0275prov=l.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var D=i("f/hT"),w=i("B6IJ");function k(t,e){if(1&t&&(l.Vb(0,"div",5),l.Vb(1,"div",6),l.Vb(2,"div",7),l.Qb(3,"img",8),l.Ub(),l.Ub(),l.Vb(4,"div",9),l.Vb(5,"div",10),l.Vb(6,"div",1),l.Vb(7,"div",11),l.Dc(8,"Display name:"),l.Ub(),l.Vb(9,"div"),l.Dc(10),l.Ub(),l.Ub(),l.Ub(),l.Vb(11,"div",10),l.Vb(12,"div",1),l.Vb(13,"div",11),l.Dc(14,"Email:"),l.Ub(),l.Vb(15,"div"),l.Dc(16),l.Ub(),l.Ub(),l.Ub(),l.Vb(17,"div",10),l.Vb(18,"div",1),l.Vb(19,"div",11),l.Dc(20,"Last login:"),l.Ub(),l.Vb(21,"div"),l.Dc(22),l.hc(23,"dateDisplay"),l.Ub(),l.Ub(),l.Ub(),l.Vb(24,"form"),l.Vb(25,"div",12),l.Vb(26,"div",13),l.Vb(27,"label"),l.Dc(28,"Access Token"),l.Ub(),l.Qb(29,"input",14),l.Ub(),l.Vb(30,"div",15),l.Vb(31,"label"),l.Dc(32,"Token Expire Time"),l.Ub(),l.Qb(33,"input",14),l.hc(34,"dateDisplay"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()),2&t){const t=l.gc();l.Cb(1),l.Gb("is-mobile",t.ims.mediaQList.matches),l.Cb(2),l.mc("src",t.user.photoURL?t.user.photoURL:t.defaultAvartarImgSrc,l.wc),l.Cb(7),l.Fc(" ",t.user.displayName?t.user.displayName:"Not entered"," "),l.Cb(6),l.Fc(" ",t.user.email," "),l.Cb(6),l.Fc(" ",l.jc(23,8,t.user.lastLoginAt,"FULLANDFROMNOW")," "),l.Cb(7),l.mc("value",t.user.stsTokenManager.accessToken),l.Cb(4),l.mc("value",l.jc(34,11,t.user.stsTokenManager.expirationTime,"FULLANDFROMNOW"))}}function C(t,e){1&t&&l.Qb(0,"app-shared-loading")}let I=(()=>{class t{constructor(t,e,i){this.store=t,this.ims=e,this.us=i,this.viewSubtext="My account information",this.defaultAvartarImgSrc="assets/banner/placeholder-logo.png",this.compDest$=new c.a}ngOnInit(){const t=this.store.select("userInfoProfile"),e=this.store.select("appAuth");Object(h.a)(t,e).pipe(Object(g.a)(this.compDest$)).subscribe(([t,e])=>{this.displayUserProfile(t,e)}),this.us.getUserProfile()}displayUserProfile(t,e){t.userInfo?(this.authLoading=t.loading,this.user=t.userInfo,this.loadingError=t.error):e.verifiedUser&&(this.authLoading=e.loading,this.user=e.verifiedUser,this.loadingError=e.error)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(v.h),l.Pb(U.a),l.Pb(y))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-account-view"]],decls:7,vars:2,consts:[[1,"row","mt-3","mb-5"],[1,"col-sm-12"],[1,"center-align"],["class","row",4,"ngIf","ngIfElse"],["loading",""],[1,"row"],[1,"col-sm-12","col-md-6","profile-pic"],[1,"profile-img-parent"],[1,"img-h-100",3,"src"],[1,"col-sm-12","col-md-6"],[1,"row","mb-3"],[1,"vlabel"],[1,"form-row"],[1,"form-group","col-sm-3"],["type","text","readonly","",1,"form-control",3,"value"],[1,"form-group","col-sm-9"]],template:function(t,e){if(1&t&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"div",2),l.Dc(3," Account Overview "),l.Ub(),l.Ub(),l.Ub(),l.Bc(4,k,35,14,"div",3),l.Bc(5,C,1,0,"ng-template",null,4,l.Cc)),2&t){const t=l.rc(6);l.Cb(4),l.mc("ngIf",!e.authLoading)("ngIfElse",t)}},directives:[r.l,o.u,o.p,o.q,D.a],pipes:[w.a],styles:[".profile-img-parent[_ngcontent-%COMP%]{height:15rem}.is-mobile[_ngcontent-%COMP%]{display:flex;justify-content:center!important;margin-bottom:15px}.profile-pic[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.vlabel[_ngcontent-%COMP%]{color:#000;font-weight:800}"]}),t})();var P=i("Pk+l"),N=i("aiZK"),L=i("MPcn"),O=i("7DFu"),F=i("0IaG"),M=i("bTqV");let A=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e}ngOnInit(){}onNoClick(){this.dialogRef.close(!1)}onYesClick(){this.dialogRef.close(!0)}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(F.f),l.Pb(F.a))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-shared-dialog"]],decls:10,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["mat-dialog-actions",""],["mat-button","",3,"click"],["mat-button","","cdkFocusInitial","",3,"click"]],template:function(t,e){1&t&&(l.Vb(0,"h1",0),l.Dc(1,"Confirmation"),l.Ub(),l.Vb(2,"div",1),l.Vb(3,"p"),l.Dc(4),l.Ub(),l.Ub(),l.Vb(5,"div",2),l.Vb(6,"button",3),l.cc("click",(function(){return e.onNoClick()})),l.Dc(7,"No"),l.Ub(),l.Vb(8,"button",4),l.cc("click",(function(){return e.onYesClick()})),l.Dc(9,"Yes"),l.Ub(),l.Ub()),2&t&&(l.Cb(4),l.Fc("Are you sure you want to ",null==e.data?null:e.data.actionName,""))},directives:[F.g,F.d,F.c,M.a],styles:[""]}),t})();var E=i("Wp6s"),j=i("kmnG"),x=i("qFsG");function R(t,e){1&t&&(l.Vb(0,"mat-error"),l.Dc(1," Display name can only container letters or numbers. "),l.Ub())}function S(t,e){1&t&&(l.Vb(0,"div",23),l.Dc(1," Please fix your inputs before saving. "),l.Ub())}function $(t,e){if(1&t){const t=l.Wb();l.Vb(0,"div",5),l.Vb(1,"div",6),l.Vb(2,"mat-card",7),l.Vb(3,"mat-card-header"),l.Qb(4,"img",8),l.Vb(5,"mat-card-title"),l.Dc(6),l.Ub(),l.Qb(7,"mat-card-subtitle"),l.Ub(),l.Vb(8,"mat-card-content",9),l.Vb(9,"div",10),l.Vb(10,"form",11),l.Vb(11,"div",12),l.Vb(12,"mat-form-field",13),l.Vb(13,"mat-label"),l.Dc(14,"Display Name"),l.Ub(),l.Qb(15,"input",14),l.Vb(16,"mat-hint"),l.Dc(17,"Your display name."),l.Ub(),l.Bc(18,R,2,0,"mat-error",15),l.Ub(),l.Ub(),l.Vb(19,"div",12),l.Vb(20,"mat-form-field",13),l.Vb(21,"mat-label"),l.Dc(22,"Avatar URL"),l.Ub(),l.Qb(23,"input",16),l.Vb(24,"mat-hint"),l.Dc(25,"Your avatar URL"),l.Ub(),l.Ub(),l.Ub(),l.Vb(26,"div",17),l.Dc(27," Avatar Preview: "),l.Ub(),l.Vb(28,"div",18),l.Qb(29,"img",19),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Bc(30,S,2,0,"div",20),l.Vb(31,"mat-card-actions",21),l.Vb(32,"button",22),l.cc("click",(function(){return l.uc(t),l.gc().onReset()})),l.Dc(33,"Reset"),l.Ub(),l.Vb(34,"button",22),l.cc("click",(function(){return l.uc(t),l.gc().onSave()})),l.Dc(35,"Save"),l.Ub(),l.Ub(),l.Ub(),l.Ub(),l.Ub()}if(2&t){const t=l.gc();l.Cb(4),l.mc("src",t.user.photoURL?t.user.photoURL:t.defaultAvartarImgSrc,l.wc),l.Cb(2),l.Gc("",t.user.displayName?t.user.displayName:"No Display Name Entered"," ",t.infoFg.pristine?"":"*"," "),l.Cb(4),l.mc("formGroup",t.infoFg),l.Cb(5),l.mc("errorStateMatcher",t.matcher),l.Cb(3),l.mc("ngIf",t.infoFg.get("displayName").hasError("alphanumericOnly")),l.Cb(5),l.mc("errorStateMatcher",t.matcher),l.Cb(6),l.mc("src",t.photoUrlFc.value,l.wc),l.Cb(1),l.mc("ngIf",t.formError),l.Cb(1),l.mc("align","end")}}function Q(t,e){1&t&&l.Qb(0,"app-shared-loading",24),2&t&&l.mc("wholePage",!1)}let T=(()=>{class t{constructor(t,e,i,r){this.store=t,this.fb=e,this.us=i,this.dialog=r,this.matcher=new N.a,this.updateSubText="Update my profile",this.defaultAvartarImgSrc="assets/banner/placeholder-logo.png",this.compDest$=new c.a}get photoUrlFc(){return this.infoFg.get("photoUrl")}ngOnInit(){const t=this.store.select("userInfoProfile"),e=this.store.select("appAuth");Object(h.a)(t,e).pipe(Object(g.a)(this.compDest$)).subscribe(([t,e])=>{this.displayUserProfile(t,e)}),this.us.getUserProfile()}displayUserProfile(t,e){if(t.userInfo)this.loading=t.loading,this.user=t.userInfo,this.loadingError=t.error;else if(e.verifiedUser){this.loading=e.loading;const t=new O.a(e.verifiedUser.displayName,e.verifiedUser.photoURL,e.verifiedUser.email,e.verifiedUser.emailVerified,e.verifiedUser.uid);this.user=t,this.loadingError=e.error}this.createInfoFg(this.user)}createInfoFg(t){this.infoFg=this.fb.group({displayName:Object(P.a)(null==t?void 0:t.displayName,!1,[L.a]),photoUrl:Object(P.a)(null==t?void 0:t.photoURL,!1)}),this.setInitialValue(this.infoFg.value)}setInitialValue(t){this.formInitValues=t}onSave(){if(this.infoFg.valid){this.formError=!1;const t=this.infoFg.value,e=new O.b(t.displayName,t.photoUrl);this.us.updateUserProfile(e)}else this.formError=!0}onReset(){this.infoFg.reset(this.formInitValues)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}canDeactivate(){return!!this.infoFg.pristine||this.openConfirmDialog()}openConfirmDialog(){return this.dialog.open(A,{minWidth:"300px",data:{actionName:"leave this page? There are unsaved changes."}}).afterClosed().pipe(Object(g.a)(this.compDest$))}}return t.\u0275fac=function(e){return new(e||t)(l.Pb(v.h),l.Pb(o.e),l.Pb(y),l.Pb(F.b))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-account-edit"]],decls:7,vars:2,consts:[[1,"row","mt-3","mb-3"],[1,"col-sm-6","offset-md-3"],["id","",1,"center-align"],["class","row mb-3",4,"ngIf","ngIfElse"],["dataLoading",""],[1,"row","mb-3"],[1,"col-sm-12","roboto"],[1,"profile-card"],["mat-card-avatar","",3,"src"],[1,"mt-3"],[1,""],[3,"formGroup"],[1,"mb-3"],[1,"full-w"],["matInput","","placeholder","John Smith","formControlName","displayName",3,"errorStateMatcher"],[4,"ngIf"],["matInput","","placeholder","https://imgur.com/blah","formControlName","photoUrl",3,"errorStateMatcher"],[1,"mb-2"],[1,"profile-img-parent","mb-3"],[1,"img-h-100",3,"src"],["class","alert alert-danger","role","alert",4,"ngIf"],[3,"align"],["mat-button","",3,"click"],["role","alert",1,"alert","alert-danger"],[3,"wholePage"]],template:function(t,e){if(1&t&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"div",2),l.Dc(3," Update Profile "),l.Ub(),l.Ub(),l.Ub(),l.Bc(4,$,36,10,"div",3),l.Bc(5,Q,1,1,"ng-template",null,4,l.Cc)),2&t){const t=l.rc(6);l.Cb(4),l.mc("ngIf",!e.loading)("ngIfElse",t)}},directives:[r.l,E.a,E.e,E.c,E.h,E.g,E.d,o.u,o.p,o.j,j.c,j.g,x.b,o.c,o.o,o.h,j.f,E.b,M.a,j.b,D.a],styles:[".profile-card[_ngcontent-%COMP%]{max-width:40rem;margin:auto}",".profile-img-parent[_ngcontent-%COMP%]{height:15rem}"]}),t})();const G=[{path:"",component:f,canActivate:[i("dq+2").a],children:[{path:"",redirectTo:"view",pathMatch:"full"},{path:"view",component:I},{path:"edit",component:T,canDeactivate:[(()=>{class t{canDeactivate(t,e,i){return t.canDeactivate()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=l.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()]}]}];let B=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},imports:[[a.f.forChild(G)],a.f]}),t})();var J=i("37S3"),_=i("UPf0"),W=i("dwd6");let X=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},providers:[],imports:[[n.a,o.k,r.c,J.a]]}),t})(),Y=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,o.k,o.s,n.a,J.a,a.f,W.a,X]]}),t})(),q=(()=>{class t{}return t.\u0275mod=l.Nb({type:t}),t.\u0275inj=l.Mb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,o.k,o.s,n.a,J.a,_.a,Y,W.a,B]]}),t})()}}]);