(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{roHT:function(e,t,r){"use strict";r.r(t),r.d(t,"OrderNewModule",(function(){return vt}));var s=r("ofXK"),i=r("3Pt+"),n=r("tk/3"),o=r("tyNb"),c=r("AytR"),a=r("XNiG"),l=r("1G5W"),d=r("fXoL"),b=r("dZ8w"),u=r("IYfF"),p=r("kt0X"),h=r("riLL"),m=r("VsN/"),g=r("f/hT");const f=function(){return["all"]};function v(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",2),d.Vb(1,"div",3),d.Qb(2,"app-shared-ad-banner",4),d.Ub(),d.Qb(3,"hr"),d.Qb(4,"app-notification-banner",5),d.Vb(5,"div",6),d.Vb(6,"div",7),d.Vb(7,"button",8),d.cc("click",(function(){return d.uc(e),d.gc().goToNew()})),d.Dc(8,"Start new order"),d.Ub(),d.Vb(9,"a",9),d.Dc(10,"My cart"),d.Ub(),d.Ub(),d.Ub(),d.Qb(11,"hr"),d.Qb(12,"router-outlet"),d.Ub()}if(2&e){const e=d.gc();d.Cb(2),d.mc("ads",e.ads),d.Cb(2),d.mc("loginRequired",!0)("showBreak",!0)("customMsg",e.bannerMsg),d.Cb(5),d.mc("routerLink",d.nc(5,f))}}function k(e,t){1&e&&d.Qb(0,"app-shared-loading")}let O=(()=>{class e{constructor(e,t,r,s,i){this.abs=e,this.router=t,this.route=r,this.as=s,this.store=i,this.bannerMsg="first, you will not be able to add orders or checkout.",this.compDest$=new a.a}getCurrentTime(){return(new Date).getTime()}goToNew(){this.router.navigate(["new"],{queryParams:{date:this.getCurrentTime()},relativeTo:this.route})}ngOnInit(){this.setupAds(),this.store.select("appAuth").pipe(Object(l.a)(this.compDest$)).subscribe(e=>{this.authLoading=e.loading})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}setupAds(){c.a.adsOn&&(this.ads=this.abs.getAds())}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(b.a),d.Pb(o.c),d.Pb(o.a),d.Pb(u.a),d.Pb(p.h))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new"]],decls:3,vars:2,consts:[["class","container mb-3",4,"ngIf","ngIfElse"],["loading",""],[1,"container","mb-3"],[1,"deals-banner","mt-2"],[3,"ads"],[3,"loginRequired","showBreak","customMsg"],[1,"row","mb-2"],[1,"col-sm-12","d-flex","order-nav-group"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"btn","btn-outline-info",3,"routerLink"]],template:function(e,t){if(1&e&&(d.Bc(0,v,13,6,"div",0),d.Bc(1,k,1,0,"ng-template",null,1,d.Cc)),2&e){const e=d.rc(2);d.mc("ngIf",!t.authLoading)("ngIfElse",e)}},directives:[s.l,h.a,m.a,o.e,o.g,g.a],styles:[".deals-banner[_ngcontent-%COMP%]{height:30px}.order-nav-group[_ngcontent-%COMP%]{justify-content:space-between}"]}),e})(),C=(()=>{class e{constructor(e,t){this.router=e,this.route=t,this.route.paramMap.subscribe(e=>{console.log("single order:",e.keys),this.orderId=e.get("id")})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(o.c),d.Pb(o.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new-order"]],decls:1,vars:1,template:function(e,t){1&e&&d.Dc(0),2&e&&d.Fc("Single order display ",t.orderId,"\n")},styles:[""]}),e})();var y=r("OO0l"),w=r("eIep"),D=r("b8ES");let S=(()=>{class e{constructor(){this.refreshComponent$=new a.a,this.formValid=!1,this.selectionsInvalid=!0,this.userNameInvalid=!0,this.fgErrorMsgs=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=r("Xgv5"),F=r("DHDI");let U=(()=>{class e{constructor(e,t){this.eleRef=e,this.renderer=t,this.isShowState=new d.o,this.isShown=!1}onClick(e){"dropdownMenuButton"===e.id&&(this.isShown=!this.isShown,this.isShowState.emit(this.isShown))}documentClick(e){"dropdownMenuButton"!==e.id&&this.isShown&&(this.isShown=!1,this.isShowState.emit(!1))}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.l),d.Pb(d.G))},e.\u0275dir=d.Kb({type:e,selectors:[["","dropDownShow",""]],hostVars:2,hostBindings:function(e,t){1&e&&d.cc("click",(function(e){return t.onClick(e.target)}))("click",(function(e){return t.documentClick(e.target)}),!1,d.tc),2&e&&d.Gb("show",t.isShown)},outputs:{isShowState:"isShowState"}}),e})();function I(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",5),d.cc("click",(function(){d.uc(e);const r=t.$implicit;return d.gc(2).onFavClick(r)})),d.Dc(1),d.Ub()}if(2&e){const e=t.$implicit;d.Cb(1),d.Fc(" ",e.fireKey," ")}}const P=function(e){return{show:e}};function x(e,t){if(1&e){const e=d.Wb();d.Tb(0),d.Vb(1,"div",1),d.cc("isShowState",(function(t){return d.uc(e),d.gc().onIsShowChange(t)})),d.Vb(2,"button",2),d.Dc(3),d.Ub(),d.Vb(4,"div",3),d.Bc(5,I,2,1,"div",4),d.Ub(),d.Ub(),d.Sb()}if(2&e){const e=d.gc();d.Cb(3),d.Fc(" My favs (",e.favItems.length,") "),d.Cb(1),d.mc("ngClass",d.oc(3,P,e.isShown)),d.Cb(1),d.mc("ngForOf",e.favItems)}}let M=(()=>{class e{constructor(){this.favItems=[],this.onFavSelect=new d.o}ngOnInit(){}onIsShowChange(e){this.isShown=e}onFavClick(e){e&&this.onFavSelect.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new-create-fav-list"]],inputs:{favItems:"favItems"},outputs:{onFavSelect:"onFavSelect"},decls:1,vars:1,consts:[[4,"ngIf"],["dropDownShow","",1,"dropdown",3,"isShowState"],["type","button","id","dropdownMenuButton",1,"btn","btn-outline-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","mild-dropshadow",3,"ngClass"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&d.Bc(0,x,6,5,"ng-container",0),2&e&&d.mc("ngIf",t.favItems.length>0)},directives:[s.l,U,s.j,s.k],styles:[".dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;padding:.45rem 1.5rem}"]}),e})();var B=r("Pk+l"),N=r("B/XX"),T=r("xHqg"),L=r("JIr8"),$=r("KJJU"),_=r("8qxb"),j=r("z6cu"),A=r("EY2u"),z=r("MPcn"),E=r("kmKP"),G=r("H0VJ"),Q=r("E8I7"),J=r("LvDl"),q=r("QibW");function W(e,t){if(1&e&&(d.Vb(0,"mat-radio-button",3),d.Dc(1),d.Ub()),2&e){const e=t.$implicit;d.mc("value",e),d.Cb(1),d.Fc(" ",e.display," ")}}let X=(()=>{class e{constructor(e){this.ofs=e,this.drinkSeries=[],this.compDest$=new a.a}ngOnInit(){}ngOnChanges(e){this.drinkSeries=[],this.drinkSeries.push(new Q.a(Q.c.MILK_TEA,"Milk Tea"),new Q.a(Q.c.FRUIT_TEA,"Creative Mix"),new Q.a(Q.c.YOGURT,"Yogurt")),this.setDefaultValue()}setDefaultValue(){const e=J.findIndex(this.drinkSeries,["name",this.seriesCtrl.value.name]);e>-1&&this.seriesCtrl.setValue(this.drinkSeries[e])}onSeriesChange(){this.ofs.orderFg.get("drinkName").reset(null,{onlySelf:!1,emitEvent:!0})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(S))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form-series-desc"]],inputs:{seriesCtrl:"seriesCtrl"},features:[d.Ab],decls:7,vars:2,consts:[[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl","ngModelChange"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"p"),d.Dc(2,"Select a drink series to get started."),d.Ub(),d.Vb(3,"p"),d.Dc(4,"We currently have three tea series to choose from:"),d.Ub(),d.Vb(5,"mat-radio-group",1),d.cc("ngModelChange",(function(){return t.onSeriesChange()})),d.Bc(6,W,2,2,"mat-radio-button",2),d.Ub(),d.Ub()),2&e&&(d.Cb(5),d.mc("formControl",t.seriesCtrl),d.Cb(1),d.mc("ngForOf",t.drinkSeries))},directives:[q.b,i.o,i.g,s.k,q.a],styles:["",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();var K=r("bTqV");function R(e,t){if(1&e&&(d.Vb(0,"mat-radio-button",5),d.Dc(1),d.Ub()),2&e){const e=t.$implicit;d.mc("value",e),d.Cb(1),d.Fc(" ",e.display," ")}}function Y(e,t){if(1&e&&(d.Vb(0,"div",2),d.Vb(1,"p"),d.Dc(2,"Select a drink:"),d.Ub(),d.Vb(3,"mat-radio-group",3),d.Bc(4,R,2,2,"mat-radio-button",4),d.Ub(),d.Ub()),2&e){const e=d.gc();d.Cb(3),d.mc("formControl",e.drinkNameCtrl),d.Cb(1),d.mc("ngForOf",e.drinkNames)}}function H(e,t){1&e&&(d.Vb(0,"p",7),d.Dc(1," We are sorry, there are currently no drinks available for the series you have selected. "),d.Ub())}function Z(e,t){1&e&&(d.Vb(0,"p",7),d.Dc(1," Please go back and select a drink series first! "),d.Ub())}function ee(e,t){if(1&e&&(d.Bc(0,H,2,0,"p",6),d.Bc(1,Z,2,0,"p",6)),2&e){const e=d.gc();d.mc("ngIf",e.isDrinkSeriesSelected),d.Cb(1),d.mc("ngIf",!e.isDrinkSeriesSelected)}}let te=(()=>{class e{constructor(e,t){this.fds=e,this.ofs=t,this.drinkNames=[],this.compDest$=new a.a}ngOnChanges(e){this.compDest$.next(),this.setUpDrinksBySeries()}ngOnInit(){}setUpDrinksBySeries(){this.fds.getDrinksBySeriesObs(this.seriesSelection).pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe(e=>{this.drinkNames=[...e],this.drinkNames=J.sortBy(this.drinkNames,["display"]),this.setDefaultValue()})}get isDrinkSeriesSelected(){return this.ofs.orderFg.get("seriesName").valid}setDefaultValue(){if(this.drinkNameCtrl.value){const e=J.findIndex(this.drinkNames,["name",this.drinkNameCtrl.value.name]);e>-1&&this.drinkNameCtrl.setValue(this.drinkNames[e])}}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(D.a),d.Pb(S))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form-drink-desc"]],inputs:{drinkNameCtrl:"drinkNameCtrl",seriesSelection:"seriesSelection"},features:[d.Ab],decls:3,vars:2,consts:[["class","comf",4,"ngIf","ngIfElse"],["noDrinks",""],[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"],["class","mb-3",4,"ngIf"],[1,"mb-3"]],template:function(e,t){if(1&e&&(d.Bc(0,Y,5,2,"div",0),d.Bc(1,ee,2,2,"ng-template",null,1,d.Cc)),2&e){const e=d.rc(2);d.mc("ngIf",t.drinkNames.length>0)("ngIfElse",e)}},directives:[s.l,q.b,i.o,i.g,s.k,q.a],styles:["p[_ngcontent-%COMP%]{font-family:Comfortaa,cursive!important}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();var re=r("itXk"),se=r("5RNC");function ie(e,t){if(1&e&&(d.Vb(0,"mat-radio-button",7),d.Dc(1),d.Ub()),2&e){const e=t.$implicit;d.mc("value",e),d.Cb(1),d.Fc(" ",e.display," ")}}let ne=(()=>{class e{constructor(e,t){this.fds=e,this.ofs=t,this.drinkSizes=[],this.iceOptions=[],this.sugarOptions=[],this.allOptionsLoaded=!1,this.compDest$=new a.a,this.sugarSliderLimit=new oe,this.iceSliderLimit=new oe,this.thumbDisplaySugarFn=e=>{var t;return null===(t=this.sugarOptions[e])||void 0===t?void 0:t.name},this.thumbDisplayIceFn=e=>{var t;return null===(t=this.iceOptions[e])||void 0===t?void 0:t.name}}get drinkSizeFc(){return this.settingsFg.get("size")}get drinkIceFc(){return this.settingsFg.get("ice")}get drinkSugarFc(){return this.settingsFg.get("sugar")}ngOnInit(){}ngOnChanges(e){this.compDest$.next(),this.setupSettingOptions2()}setupSettingOptions2(){Object(re.a)(this.fds.getDrinksBySettingOptionObs("size"),this.fds.getDrinksBySettingOptionObs("sugar-level"),this.fds.getDrinksBySettingOptionObs("ice-level"),(e,t,r)=>({size:e,sugar:t,ice:r})).pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe(e=>{e&&(this.allOptionsLoaded=!0,this.drinkSizes=e.size,this.iceOptions=e.ice,this.sugarOptions=e.sugar,this.sortOptionsAsc(),this.setSugarSliderLimits(),this.setIceSliderLimits(),this.setSizeDefaultValue(),this.setSugarDefaultValue(),this.setIceDefaultValue())})}setSizeDefaultValue(){const e=J.findIndex(this.drinkSizes,["name",this.drinkSizeFc.value.name]);e>-1&&this.drinkSizeFc.setValue(this.drinkSizes[e])}setSugarDefaultValue(){const e=J.findIndex(this.sugarOptions,["name",this.drinkSugarFc.value.name]);this.sugarSliderVal=e,this.currentSugarLevel=this.sugarOptions[e],e>-1&&this.drinkSugarFc.setValue(this.currentSugarLevel)}setIceDefaultValue(){let e=J.findIndex(this.iceOptions,["name",this.drinkIceFc.value.name]);"none"===this.drinkIceFc.value.name&&(e=0),this.iceSliderVal=e,this.currentIceLevel=this.iceOptions[e],e>-1&&this.drinkIceFc.setValue(this.currentIceLevel)}sortOptionsAsc(){this.sugarOptions.sort((e,t)=>+e.name<+t.name?-1:1),this.iceOptions.sort((e,t)=>+e.name<+t.name?-1:1)}setSugarSliderLimits(){this.sugarSliderLimit.max=this.sugarOptions.length-1}setIceSliderLimits(){this.iceSliderLimit.max=this.iceOptions.length-1}onSugarLevelChange(){this.currentSugarLevel=this.sugarOptions[+this.sugarSliderVal],this.drinkSugarFc.setValue(this.currentSugarLevel)}onIceLevelChange(){this.currentIceLevel=this.iceOptions[+this.iceSliderVal],this.drinkIceFc.setValue(this.currentIceLevel)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(D.a),d.Pb(S))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form-settings-desc"]],inputs:{settingsFg:"settingsFg"},features:[d.Ab],decls:19,vars:24,consts:[[1,"comf"],["id","drink-size"],["aria-labelledby","drink-size","color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],["id","drink-size",1,"mb-3"],[1,"setting-slider-parent"],["color","primary",1,"setting-slider",3,"disabled","max","min","step","thumbLabel","displayWith","ngModel","vertical","ngModelChange","change"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"label",1),d.Dc(2,"Select drink size:"),d.Ub(),d.Vb(3,"mat-radio-group",2),d.Bc(4,ie,2,2,"mat-radio-button",3),d.Ub(),d.Ub(),d.Qb(5,"hr"),d.Vb(6,"div",0),d.Vb(7,"label",4),d.Dc(8),d.hc(9,"lowercase"),d.Ub(),d.Vb(10,"div",5),d.Vb(11,"mat-slider",6),d.cc("ngModelChange",(function(e){return t.sugarSliderVal=e}))("change",(function(){return t.onSugarLevelChange()})),d.Ub(),d.Ub(),d.Ub(),d.Qb(12,"hr"),d.Vb(13,"div",0),d.Vb(14,"label",4),d.Dc(15),d.hc(16,"lowercase"),d.Ub(),d.Vb(17,"div",5),d.Vb(18,"mat-slider",6),d.cc("ngModelChange",(function(e){return t.iceSliderVal=e}))("change",(function(){return t.onIceLevelChange()})),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(3),d.mc("formControl",t.drinkSizeFc),d.Cb(1),d.mc("ngForOf",t.drinkSizes),d.Cb(4),d.Fc("Select sugar level (",d.ic(9,20,null==t.currentSugarLevel?null:t.currentSugarLevel.display),") :"),d.Cb(3),d.mc("disabled",!1)("max",t.sugarSliderLimit.max)("min",t.sugarSliderLimit.min)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplaySugarFn)("ngModel",t.sugarSliderVal)("vertical",!1),d.Cb(4),d.Fc("Select ice level (",d.ic(16,22,null==t.currentIceLevel?null:t.currentIceLevel.display),") :"),d.Cb(3),d.mc("disabled",!1)("max",3)("min",0)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplayIceFn)("ngModel",t.iceSliderVal)("vertical",!1))},directives:[q.b,i.o,i.g,s.k,se.a,i.r,q.a],pipes:[s.i],styles:[".setting-slider[_ngcontent-%COMP%]{width:100%}.setting-slider-parent[_ngcontent-%COMP%]{width:50%}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();class oe{constructor(e=0,t=1){this.min=e,this.max=t}}var ce=r("MutI"),ae=r("AB5n");function le(e,t){if(1&e&&(d.Vb(0,"mat-list-option",5),d.Dc(1),d.Ub()),2&e){const e=t.$implicit;d.mc("value",e)("checkboxPosition","before"),d.Cb(1),d.Fc(" ",e.display," ")}}let de=(()=>{class e{constructor(e,t,r){this.fds=e,this.fb=t,this.ofs=r,this.drinkToppings=[],this.compDest$=new a.a,this.defaultSelected=[],this.selectedCount=0,this.compareFn=(e,t)=>e.name===t.name}ngOnInit(){}ngOnChanges(e){this.compDest$.next(),this.setupToppings(),this.defaultSelected=this.getDefaultSelected(),this.selectedCount=this.toppingFa.length}getDefaultSelected(){return this.toppingFa.value?this.toppingFa.value:[]}ngAfterViewInit(){}onSelectionChange(e){const t=this.toppingList._value;this.selectedCount=e.source.selectedOptions.selected.length;let r=[];t.forEach(e=>{r.push(B.a(e,!1))});const s=this.fb.array(r);this.ofs.orderFg.setControl("toppings",s)}setupToppings(){this.fds.getDrinkToppingObs().pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe(e=>{e&&(this.drinkToppings=J.sortBy(e,["display"]))})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(D.a),d.Pb(i.e),d.Pb(S))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form-topping-desc"]],viewQuery:function(e,t){var r;1&e&&d.Jc(ce.g,!0),2&e&&d.qc(r=d.dc())&&(t.toppingList=r.first)},inputs:{toppingFa:"toppingFa"},features:[d.Ab],decls:7,vars:6,consts:[[1,"comf"],[1,"top-label"],[1,"row","top-row"],[3,"compareWith","ngModel","selectionChange"],["color","primary",3,"value","checkboxPosition",4,"ngFor","ngForOf"],["color","primary",3,"value","checkboxPosition"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Dc(2),d.hc(3,"countNumberDisplay"),d.Ub(),d.Vb(4,"div",2),d.Vb(5,"mat-selection-list",3),d.cc("selectionChange",(function(e){return t.onSelectionChange(e)})),d.Bc(6,le,2,3,"mat-list-option",4),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(2),d.Fc("Select toppings ",d.ic(3,4,t.selectedCount)," : "),d.Cb(3),d.mc("compareWith",t.compareFn)("ngModel",t.defaultSelected),d.Cb(1),d.mc("ngForOf",t.drinkToppings))},directives:[ce.g,i.o,i.r,s.k,ce.d],pipes:[ae.a],styles:[""]}),e})();var be=r("aiZK"),ue=r("kmnG"),pe=r("qFsG"),he=r("NFeN");let me=(()=>{class e{transform(e,t){var r,s;let i=e.display;switch(t){case"FULL":i=e.display+e.user.email;break;case"DISPLAY":i=e.display;break;case"UID":i=null===(r=e.user)||void 0===r?void 0:r.uid;break;case"EMAIL":i=null===(s=e.user)||void 0===s?void 0:s.email}return i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Ob({name:"userDisplay",type:e,pure:!0}),e})();function ge(e,t){if(1&e&&(d.Vb(0,"li"),d.Dc(1),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.Fc(" ",e," ")}}function fe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"span",8),d.cc("click",(function(){return d.uc(e),d.gc(2).onFixGoBack()})),d.Dc(1,"Take me there."),d.Ub()}}function ve(e,t){if(1&e&&(d.Vb(0,"div",5),d.Vb(1,"p"),d.Dc(2,"Oops! You are missing a few things:"),d.Ub(),d.Vb(3,"ul"),d.Bc(4,ge,2,1,"li",6),d.Ub(),d.Bc(5,fe,2,0,"span",7),d.Ub()),2&e){const e=d.gc();d.Cb(4),d.mc("ngForOf",e.ofs.fgErrorMsgs),d.Cb(1),d.mc("ngIf",e.showTakeMeThere)}}let ke=(()=>{class e{constructor(e,t,r,s,i,n){this.us=e,this.ds=t,this.rdf=r,this.sbs=s,this.ofs=i,this.as=n,this.fixGoBack=new d.o,this.users=[],this.matcher=new be.b,this.missingSelectionAlert="Please fix your selections.",this.missingUserName="Please pick a user name",this.compDest$=new a.a}ngOnInit(){}get showTakeMeThere(){return 1!==this.ofs.fgErrorMsgs.length||"User name required"!==this.ofs.fgErrorMsgs[0]}ngOnChanges(){}setDefaultValue(){if(this.userFc.value){const e=J.findIndex(this.users,["id",this.userFc.value.id]);e>-1?(this.userFc.setValue(this.users[e]),this.sbs.openSnackBar("Alias for this order has been pre-selected to '"+this.userFc.value.display+"'.",1e3)):(this.sbs.openSnackBar("Could not find alias '"+this.userFc.value.display+"' in your alias list, so no alias has been selected.",1e4),this.userFc.reset(null))}}onFixGoBack(){let e=null;this.ofs.orderFg.get("seriesName").invalid?e=0:this.ofs.orderFg.get("drinkName").invalid&&(e=1),this.fixGoBack.emit(e)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(E.a),d.Pb(G.a),d.Pb(D.a),d.Pb(F.a),d.Pb(S),d.Pb(u.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form-confirm-desc"]],inputs:{userFc:"userFc"},outputs:{fixGoBack:"fixGoBack"},features:[d.Ab],decls:11,vars:4,consts:[[1,"roboto"],["class","alert alert-danger",4,"ngIf"],["appearance","outline",1,"name-field","mb-3"],["matInput","","placeholder","Your display name","readonly","","disabled","",3,"value"],["matSuffix","",1,"icon-mat-success"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["class","nav-back",3,"click",4,"ngIf"],[1,"nav-back",3,"click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Bc(1,ve,6,2,"div",1),d.Vb(2,"mat-form-field",2),d.Vb(3,"mat-label"),d.Dc(4,"Name"),d.Ub(),d.Qb(5,"input",3),d.hc(6,"userDisplay"),d.Vb(7,"mat-icon",4),d.Dc(8,"done"),d.Ub(),d.Vb(9,"mat-hint"),d.Dc(10,"This is your display name (it can be updated under your profile)."),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(1),d.mc("ngIf",!t.ofs.formValid),d.Cb(4),d.mc("value",d.ic(6,2,t.userFc.value)))},directives:[s.l,ue.c,ue.g,pe.b,he.a,ue.i,ue.f,s.k],pipes:[me],styles:[".name-field[_ngcontent-%COMP%]{width:20rem}mat-error.err[_ngcontent-%COMP%]{font-weight:700}div[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:13px}.alert[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),e})();var Oe=r("bSwM");function Ce(e,t){1&e&&(d.Vb(0,"div",21),d.Dc(1,"Series"),d.Ub())}function ye(e,t){1&e&&d.Dc(0,"Drink")}function we(e,t){1&e&&d.Dc(0,"Size / Sugar / Ice")}function De(e,t){1&e&&d.Dc(0,"Toppings")}function Se(e,t){1&e&&d.Dc(0,"Confirmation")}let Ve=(()=>{class e{constructor(e,t,r,s,i,n,o,c,l){this.fb=e,this.ofs=t,this.us=r,this.rdf=s,this.sbs=i,this.router=n,this.route=o,this.cs=c,this.ds=l,this.onDrinkSubmit=new d.o,this.isFavorite=!1,this.compDes$=new a.a,this.labelPosition="bottom",this.isStepperLinear=!1,this.selectionFcNames=["seriesName","drinkName","settings"]}get drinkSeriesFc(){return this.ofs.orderFg.get("seriesName")}get drinkNameFc(){return this.ofs.orderFg.get("drinkName")}get drinkSettingsFg(){return this.ofs.orderFg.get("settings")}get drinkToppingsFa(){return this.ofs.orderFg.get("toppings")}get userFc(){return this.ofs.orderFg.get("user")}get isFavoriteFc(){return this.ofs.orderFg.get("isFavorite")}ngOnChanges(e){this.drinkOrder&&(this.ofs.refreshComponent$.next(),this.orderStepper&&this.orderStepper.reset(),this.ofs.orderFg=null,this.ofs.orderFg=this.createForm(this.drinkOrder),this.setFormValidStatus(this.ofs.orderFg.status),this.ofs.orderFg.valueChanges.pipe(Object(l.a)(this.ofs.refreshComponent$)).subscribe(e=>{this.setFormValidStatus(this.ofs.orderFg.status),this.ofs.fgErrorMsgs=this.examineFgErrors(),console.log("changes",this.ofs.orderFg),this.currentDrinkSeries=this.drinkSeriesFc.value.name}))}setFormValidStatus(e){this.ofs.formValid="VALID"===e}ngOnInit(){}createForm(e){const t=new i.i({});t.addControl("seriesName",B.a({name:e.drinkType.seriesName,display:e.drinkType.seriesDisplay},!1,[z.d])),t.addControl("drinkName",B.a({name:e.drinkType.name,display:e.drinkType.display},!1,[z.d])),t.addControl("settings",this.fb.group({size:B.a(this.drinkOrder.size,!1,[z.d]),ice:B.a(this.drinkOrder.iceLevel,!1,[z.d]),sugar:B.a(this.drinkOrder.sugar,!1,[z.d])}));let r=new i.d([]);return e.toppings.forEach(e=>{r.push(B.a(e,!1))}),t.addControl("toppings",r),t.addControl("user",B.a(e.user?e.user:null,!1,[i.t.required,z.d])),t.addControl("isFavorite",B.a(null,!1)),t}onOrderSubmit(){const e=this.ofs.orderFg.value,t=this.createCurrentDrinkOrderDetail(e),r=this.getSelectedUser(e);let s=new y.c(null,(new Date).getTime(),[],r,null);s.orders=[t],e.isFavorite?this.getFavoriteAddObs(e).pipe(Object(w.a)(e=>this.rdf.getCartOrders().push(s)),Object(L.a)(e=>Object(j.a)(e.code))).subscribe(e=>{},e=>{console.error(e),this.sbs.openSnackBar("A favorite drink with that name already exists, try a different name.",5e3)},()=>{this.sbs.openSnackBar("Fav drink saved and order added to cart."),this.router.navigate(["../","all"],{relativeTo:this.route})}):this.rdf.getCartOrders().push(s).then(e=>{this.sbs.openSnackBar("Order added to cart."),this.router.navigate(["../","all"],{relativeTo:this.route})},e=>{this.sbs.openSnackBar("There was an error adding this order to cart. "+e.code)})}createCurrentDrinkOrderDetail(e){const t=new y.b(e.settings.ice.name,e.settings.ice.display),r=new y.h(e.drinkName.name,e.drinkName.display,e.seriesName.name,e.seriesName.display),s=new y.e(e.settings.size.name,e.settings.size.display),i=new y.f(e.settings.sugar.name,e.settings.sugar.display);let n=[];return e.toppings.forEach(e=>{n.push(new y.g(e.name,e.display))}),new y.d(t,r,s,i,n)}getFavoriteAddObs(e){var t;const r=new _.b("Add new favorite","Name",null,"edit","This will be the name of your favorite drink"),s=this.ds.getFavDrinkAddDialog(r),i=null===(t=e.user)||void 0===t?void 0:t.user;return s.afterClosed().pipe(Object(l.a)(this.compDes$),Object(w.a)(e=>{if(i&&e){const t=(new Date).getTime();let r=this.cs.getFDB().ref("favorites/"+i.uid+"/"+e);const s=new y.a(r.key,this.getSelectedUser(this.ofs.orderFg.value),t,this.createCurrentDrinkOrderDetail(this.ofs.orderFg.value));return r.set(s)}return A.a}))}getSelectedUser(e){return new $.c(e.user.id,e.user.display,e.user.user)}onFixGoBack(e){null!==e&&(this.orderStepper.selectedIndex=e)}examineFgErrors(){let e=[];return this.orderStepper.steps.forEach(t=>{t&&t.stepControl&&t.stepControl.invalid&&e.push(t.errorMessage)}),e}ngOnDestroy(){this.compDes$.next()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(i.e),d.Pb(S),d.Pb(E.a),d.Pb(D.a),d.Pb(F.a),d.Pb(o.c),d.Pb(o.a),d.Pb(V.a),d.Pb(G.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-order-form"]],viewQuery:function(e,t){var r;1&e&&d.Jc(T.a,!0),2&e&&d.qc(r=d.dc())&&(t.orderStepper=r.first)},inputs:{drinkOrder:"drinkOrder"},outputs:{onDrinkSubmit:"onDrinkSubmit"},features:[d.Bb([{provide:N.h,useValue:{showError:!0}}]),d.Ab],decls:47,vars:15,consts:[[3,"linear","labelPosition","formGroup"],["stepper",""],["errorMessage","Drink series required",3,"stepControl"],["matStepLabel",""],[3,"seriesCtrl"],["mat-stroked-button","","color","primary","matStepperNext",""],["errorMessage","Drink type required",3,"stepControl"],["title","Pick a drink","matStepLabel",""],[3,"drinkNameCtrl","seriesSelection"],["mat-stroked-button","","color","primary","matStepperPrevious","",1,"mr-1"],["errorMessage","Sugar & ice level required",3,"stepControl"],["title","Pick drink settings","matStepLabel",""],[3,"settingsFg"],[3,"stepControl"],[3,"toppingFa"],["errorMessage","User name required",3,"stepControl"],[3,"userFc","fixGoBack"],[1,"d-flex"],["mat-stroked-button","","matStepperPrevious","",1,"mr-1"],["mat-flat-button","","color","primary",1,"mr-4","order-submit",3,"disabled","click"],["color","primary","formControlName","isFavorite",1,"fav-check"],["title","Pick a drink series"]],template:function(e,t){1&e&&(d.Vb(0,"mat-horizontal-stepper",0,1),d.Vb(2,"mat-step",2),d.Bc(3,Ce,2,0,"ng-template",3),d.Qb(4,"app-shared-order-form-series-desc",4),d.Qb(5,"hr"),d.Vb(6,"div"),d.Vb(7,"button",5),d.Dc(8,"Next"),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"mat-step",6),d.Bc(10,ye,1,0,"ng-template",7),d.Qb(11,"app-shared-order-form-drink-desc",8),d.Qb(12,"hr"),d.Vb(13,"div"),d.Vb(14,"button",9),d.Dc(15,"Back"),d.Ub(),d.Vb(16,"button",5),d.Dc(17,"Next"),d.Ub(),d.Ub(),d.Ub(),d.Vb(18,"mat-step",10),d.Bc(19,we,1,0,"ng-template",11),d.Qb(20,"app-shared-order-form-settings-desc",12),d.Qb(21,"hr"),d.Vb(22,"div"),d.Vb(23,"button",9),d.Dc(24,"Back"),d.Ub(),d.Vb(25,"button",5),d.Dc(26,"Next"),d.Ub(),d.Ub(),d.Ub(),d.Vb(27,"mat-step",13),d.Bc(28,De,1,0,"ng-template",11),d.Qb(29,"app-shared-order-form-topping-desc",14),d.Qb(30,"hr"),d.Vb(31,"div"),d.Vb(32,"button",9),d.Dc(33,"Back"),d.Ub(),d.Vb(34,"button",5),d.Dc(35,"Next"),d.Ub(),d.Ub(),d.Ub(),d.Vb(36,"mat-step",15),d.Bc(37,Se,1,0,"ng-template",3),d.Vb(38,"app-shared-order-form-confirm-desc",16),d.cc("fixGoBack",(function(e){return t.onFixGoBack(e)})),d.Ub(),d.Qb(39,"hr"),d.Vb(40,"div",17),d.Vb(41,"button",18),d.Dc(42,"Back"),d.Ub(),d.Vb(43,"button",19),d.cc("click",(function(){return t.onOrderSubmit()})),d.Dc(44,"Finish "),d.Ub(),d.Vb(45,"mat-checkbox",20),d.Dc(46,"Save as favorite"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.mc("linear",t.isStepperLinear)("labelPosition",t.labelPosition)("formGroup",t.ofs.orderFg),d.Cb(2),d.mc("stepControl",t.drinkSeriesFc),d.Cb(2),d.mc("seriesCtrl",t.drinkSeriesFc),d.Cb(5),d.mc("stepControl",t.drinkNameFc),d.Cb(2),d.mc("drinkNameCtrl",t.drinkNameFc)("seriesSelection",t.currentDrinkSeries),d.Cb(7),d.mc("stepControl",t.drinkSettingsFg),d.Cb(2),d.mc("settingsFg",t.drinkSettingsFg),d.Cb(7),d.mc("stepControl",t.drinkToppingsFa),d.Cb(2),d.mc("toppingFa",t.drinkToppingsFa),d.Cb(7),d.mc("stepControl",t.userFc),d.Cb(2),d.mc("userFc",t.userFc),d.Cb(5),d.mc("disabled",t.ofs.orderFg&&t.ofs.orderFg.invalid))},directives:[T.a,i.p,i.j,T.b,T.c,X,K.a,T.e,te,T.f,ne,de,ke,Oe.a,i.o,i.h],styles:[".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();function Fe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"app-order-new-create-fav-list",5),d.cc("onFavSelect",(function(t){return d.uc(e),d.gc().onFavSelect(t)})),d.Ub()}if(2&e){const e=d.gc();d.mc("favItems",e.favItems)}}function Ue(e,t){if(1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Qb(2,"app-shared-order-form",6),d.Ub(),d.Ub()),2&e){const e=d.gc();d.Cb(2),d.mc("drinkOrder",e.drinkOrder)}}let Ie=(()=>{class e{constructor(e,t,r,s,i,n,o){this.fds=e,this.route=t,this.ofs=r,this.cs=s,this.sbs=i,this.as=n,this.store=o,this.favItems=[],this.compDest$=new a.a,this.route.queryParamMap.pipe(Object(l.a)(this.compDest$),Object(w.a)(e=>this.store.select("appAuth").pipe(Object(l.a)(this.compDest$)))).subscribe(e=>{(null==e?void 0:e.verifiedUser)&&(this.ofs.refreshComponent$.next(),this.createDefaultDrink(e.verifiedUser))})}ngOnInit(){this.store.select("appAuth").pipe(Object(l.a)(this.compDest$))}createDefaultDrink(e){const t=new y.b(null,null),r=new y.f(null,null),s=new y.e(null,null),i=new y.h(null,null,null,null);let n;e&&e.inAppAliases&&(n=e.inAppAliases.alias),this.drinkOrder=new y.d(t,i,s,r,[],n)}onFavSelect(e){const t=new y.b(e.favDrink.iceLevel.name,e.favDrink.iceLevel.display),r=new y.f(e.favDrink.sugar.name,e.favDrink.sugar.display),s=new y.e(e.favDrink.size.name,e.favDrink.size.display),i=new y.h(e.favDrink.drinkType.name,e.favDrink.drinkType.display,e.favDrink.drinkType.seriesName,e.favDrink.drinkType.seriesDisplay);let n=[];e.favDrink.toppings&&e.favDrink.toppings.forEach(e=>{n.push(e)}),this.drinkOrder=new y.d(t,i,s,r,n,e.user),this.sbs.openSnackBar('"'+e.fireKey+'" has been applied.')}loadFavorite(){}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(D.a),d.Pb(o.a),d.Pb(S),d.Pb(V.a),d.Pb(F.a),d.Pb(u.a),d.Pb(p.h))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new-create"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-sm-12"],[3,"favItems","onFavSelect",4,"ngIf"],[1,"order-label","mb-3","double-underline","comf","center-align"],["class","row",4,"ngIf"],[3,"favItems","onFavSelect"],[3,"drinkOrder"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Bc(2,Fe,1,1,"app-order-new-create-fav-list",2),d.Ub(),d.Ub(),d.Vb(3,"div",0),d.Vb(4,"div",1),d.Vb(5,"div",3),d.Dc(6," Current order "),d.Ub(),d.Ub(),d.Ub(),d.Bc(7,Ue,3,1,"div",4)),2&e&&(d.Cb(2),d.mc("ngIf",t.favItems.length>0),d.Cb(5),d.mc("ngIf",t.drinkOrder))},directives:[s.l,M,Ve],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}"]}),e})();var Pe=r("s5sP"),xe=r("2Gqf"),Me=r("4ppg");function Be(e,t){if(1&e){const e=d.Wb();d.Tb(0,12),d.Vb(1,"div",13),d.Vb(2,"div",4),d.Qb(3,"app-shared-order-user-info",14),d.Ub(),d.Ub(),d.Vb(4,"div",15),d.Vb(5,"div",3),d.Vb(6,"div",4),d.Vb(7,"app-shared-order-accordion",16),d.cc("orderRemove",(function(t){return d.uc(e),d.gc(3).onOrderRemove(t)})),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Sb()}if(2&e){const e=t.$implicit,r=t.index,s=d.gc(3);d.Cb(3),d.mc("orderNumber",r)("showOrderedDate",!1)("totalOrdersCount",s.cartOrdersGrouped.length)("order",e),d.Cb(4),d.mc("drinkOrder",e)("editable",!0)("startAsCollapsed",!0)}}function Ne(e,t){if(1&e){const e=d.Wb();d.Tb(0),d.Qb(1,"hr"),d.Vb(2,"div",17),d.Vb(3,"div",4),d.Vb(4,"div"),d.Vb(5,"button",18),d.cc("click",(function(){return d.uc(e),d.gc(3).onCheckoutClick()})),d.Vb(6,"mat-icon",19),d.Dc(7,"credit_card"),d.Ub(),d.Dc(8," Checkout "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Sb()}}function Te(e,t){if(1&e&&(d.Tb(0),d.Vb(1,"div",3),d.Vb(2,"div",4),d.Vb(3,"div",5),d.Dc(4),d.hc(5,"countNumberDisplay"),d.Ub(),d.Ub(),d.Ub(),d.Vb(6,"div",6),d.Vb(7,"div",4),d.Vb(8,"div",7),d.Vb(9,"div"),d.Dc(10),d.hc(11,"pluralDisplay"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Bc(12,Be,8,7,"ng-container",8),d.Vb(13,"div",9),d.Vb(14,"div",4),d.Vb(15,"div",10),d.Dc(16," Total cost: TBD "),d.Ub(),d.Ub(),d.Ub(),d.Bc(17,Ne,9,0,"ng-container",11),d.Sb()),2&e){const e=d.gc(2);d.Cb(4),d.Fc(" Cart ",d.ic(5,6,e.cartOrders.length)," "),d.Cb(6),d.Hc(" There are currently ",e.cartOrders.length," items made from ",e.cartOrdersGrouped.length," ",d.jc(11,8,"person",e.cartOrdersGrouped.length),". "),d.Cb(2),d.mc("ngForOf",e.cartOrdersGrouped),d.Cb(5),d.mc("ngIf",e.cartOrders.length>0)}}function Le(e,t){if(1&e&&(d.Tb(0),d.Bc(1,Te,18,11,"ng-container",0),d.Sb()),2&e){const e=d.gc(),t=d.rc(2);d.Cb(1),d.mc("ngIf",e.listOfUsers.length>0)("ngIfElse",t)}}const $e=function(){return["/home/open-orders"]};function _e(e,t){if(1&e&&(d.Vb(0,"div",20),d.Vb(1,"div",21),d.Dc(2," Cart is empty. "),d.Ub(),d.Vb(3,"div",22),d.Vb(4,"a",23),d.Dc(5,"Go see my open orders."),d.Ub(),d.Ub(),d.Vb(6,"div",24),d.Qb(7,"img",25),d.Ub(),d.Ub()),2&e){const e=d.gc();d.Cb(4),d.mc("routerLink",d.nc(2,$e)),d.Cb(3),d.mc("src",e.bgUrl,d.wc)}}function je(e,t){1&e&&(d.Vb(0,"div",20),d.Dc(1," Loading your cart... "),d.Ub())}let Ae=(()=>{class e{constructor(e,t,r,s,i){this.rdfs=e,this.cs=t,this.router=r,this.route=s,this.sbs=i,this.compDest$=new a.a,this.cartOrders=[],this.listOfUsers=null,this.cartOrdersGrouped=[],this.bgUrl="assets/images/bg/long-bg-bears.png"}ngOnInit(){this.cs.cartItemList$.pipe(Object(l.a)(this.compDest$)).subscribe(e=>{this.cartOrders=[...e],this.listOfUsers=[],this.cartOrdersGrouped=[],this.createGroupByUser()})}createGroupByUser(){J.uniqBy(this.cartOrders,e=>e.user.id).forEach(e=>{this.listOfUsers.push(e.user)}),this.listOfUsers.forEach(e=>{let t=new y.c(null,(new Date).getTime(),[],e,[]);this.cartOrdersGrouped.push(t),this.cartOrders.forEach(t=>{if(t.user.id===e.id){const e=this.cartOrdersGrouped.findIndex(e=>e.user.id===t.user.id);this.cartOrdersGrouped[e].orders.push(t.orders[0]),this.cartOrdersGrouped[e].groupedOrders.push(t)}})})}onCheckoutClick(){this.cartOrders.length>0&&this.router.navigate(["../","checkout"],{relativeTo:this.route})}onAddAnother(){this.router.navigate(["../","new"],{relativeTo:this.route})}onOrderRemove(e){e&&e.fireKey?this.cs.cartItemsListFire.remove(e.fireKey).then(e=>{this.sbs.openSnackBar("Item removed from cart.")},e=>{this.sbs.openSnackBar("Server Error: something went wrong while removing this item. "+e.code)}):this.sbs.openSnackBar("Error occured removing this item: Item does not exist anymore.")}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(D.a),d.Pb(V.a),d.Pb(o.c),d.Pb(o.a),d.Pb(F.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new-view-all"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyCart",""],["loading",""],[1,"row","mb-3"],[1,"col-sm-12"],[1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-3","comf"],[1,"cart-subtext"],["class","",4,"ngFor","ngForOf"],[1,"row","mt-3","mb-3"],[1,"order-label","mb-3","comf","d-flex","float-right"],[4,"ngIf"],[1,""],[1,"row","mb-1"],[3,"orderNumber","showOrderedDate","totalOrdersCount","order"],[1,"container-fluid"],[3,"drinkOrder","editable","startAsCollapsed","orderRemove"],[1,"row","mt-4","mb-3"],["mat-flat-button","","color","primary",3,"click"],["matSuffix",""],[1,"comf"],[1,"banner-text","center-align","mb-4"],[1,"comf","center-align","mb-5"],[3,"routerLink"],[1,"bg-parent","center-align"],["alt","bg",1,"img-h-100","b-r-10",3,"src"]],template:function(e,t){if(1&e&&(d.Bc(0,Le,2,2,"ng-container",0),d.Bc(1,_e,8,3,"ng-template",null,1,d.Cc),d.Bc(3,je,2,0,"ng-template",null,2,d.Cc)),2&e){const e=d.rc(4);d.mc("ngIf",t.listOfUsers)("ngIfElse",e)}},directives:[s.l,s.k,Pe.a,xe.a,K.a,he.a,ue.i,o.e],pipes:[ae.a,Me.a],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}.float-right[_ngcontent-%COMP%]{justify-content:flex-end}.cart-subtext[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.bg-parent[_ngcontent-%COMP%]{display:flex;height:50rem;justify-content:center;overflow:hidden;opacity:.3}.banner-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800}"]}),e})();var ze=r("Cfvw"),Ee=r("LRne"),Ge=r("bOdf"),Qe=r("lJxs"),Je=r("0EUg"),qe=r("B6Xj");let We=(()=>{class e{transform(e){let t="";const r=e.drinkType.display,s=e.size.display,i=e.iceLevel.display,n=e.sugar.display,o=e.toppings;let c="";return o?o.forEach((e,t)=>{c=c+e.display+(t===o.length-1?"":", ")}):c=" No toppings",t=s.toUpperCase()+", "+r+", "+i.toLowerCase()+", "+n.toLowerCase()+", "+c,t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=d.Ob({name:"drinkOrderDetailText",type:e,pure:!0}),e})();const Xe=function(){return{"border-bottom":!0}};function Ke(e,t){if(1&e&&(d.Vb(0,"div",3),d.Vb(1,"div",4),d.Vb(2,"div",5),d.Vb(3,"div",6),d.Qb(4,"img",7),d.hc(5,"drinkTypeUrl"),d.Ub(),d.Vb(6,"div",8),d.Dc(7),d.hc(8,"drinkOrderDetailText"),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){const e=t.$implicit;d.mc("ngClass",d.nc(7,Xe)),d.Cb(4),d.mc("src",d.ic(5,3,e.orders[0].drinkType.seriesName),d.wc),d.Cb(3),d.Fc(" ",d.ic(8,5,e.orders[0])," ")}}let Re=(()=>{class e{constructor(){this.cartOrders=[]}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-checkout-items-display"]],inputs:{cartOrders:"cartOrders"},decls:4,vars:2,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],["class","row roboto p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","roboto","p-2",3,"ngClass"],[1,"col-sm-12"],[1,"d-flex"],[1,"icon-img-parent","mb-1"],["alt","tea icon",1,"img-h-100",3,"src"],[1,"v-self-align-center","ml-1","order-desc"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Dc(2),d.Ub(),d.Ub(),d.Bc(3,Ke,9,8,"div",2)),2&e&&(d.Cb(2),d.Fc(" ",t.cartOrders.length," items: "),d.Cb(1),d.mc("ngForOf",t.cartOrders))},directives:[s.k,s.j],pipes:[qe.a,We],styles:[".icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800;color:#4d4d4d}"]}),e})(),Ye=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-delivery-comp"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Dc(2," Delivery method: "),d.Ub(),d.Ub(),d.Vb(3,"div",0),d.Vb(4,"div",2),d.Dc(5," Coming soon "),d.Ub(),d.Ub())},styles:[""]}),e})(),He=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-shared-payment-info"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Dc(2," Payment information: "),d.Ub(),d.Ub(),d.Vb(3,"div",0),d.Vb(4,"div",2),d.Dc(5," Coming soon "),d.Ub(),d.Ub())},styles:[""]}),e})(),Ze=(()=>{class e{constructor(e,t,r,s,i){this.cs=e,this.rfd=t,this.sbs=r,this.router=s,this.route=i,this.compDest$=new a.a,this.cartOrders=[]}ngOnInit(){this.cs.cartItemList$.pipe(Object(l.a)(this.compDest$)).subscribe(e=>{this.cartOrders=[...e]})}ngAfterViewInit(){this.scrollToTopView()}onPlaceOrder(){const e=this.cs.createGroupByUser(this.cartOrders);Object(ze.a)(e).pipe(Object(Ge.a)(e=>this.rfd.openOrdersFDB.push(e))).subscribe(e=>{},e=>{this.sbs.openSnackBar("Order could not be placed, error occured: "+e.code)},()=>{Object(ze.a)(this.cartOrders).pipe(Object(Qe.a)(e=>Object(Ee.a)(this.cs.cartItemsListFire.remove(e.fireKey))),Object(Je.a)()).subscribe(e=>{},e=>{this.sbs.openSnackBar("Order could not be placed, error occured: "+e.code)},()=>{this.sbs.openSnackBar("We have received your orders!"),this.goToCart()})})}goToCart(){this.router.navigate(["../","all"],{relativeTo:this.route})}scrollToTopView(){document.getElementById("checkout-heading").scrollIntoView(!1)}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(V.a),d.Pb(D.a),d.Pb(F.a),d.Pb(o.c),d.Pb(o.a))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-order-new-checkout"]],decls:22,vars:1,consts:[[1,"row","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-5"],[1,"center-align"],["type","button",1,"btn","btn-success","checkout-btn",3,"click"],[1,"col-sm-5"],[3,"cartOrders"],[1,"col-sm-6","ml-md-auto"],[1,""],[1,"row","mb-3","comf"],[1,"col-sm-6"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Vb(2,"div",2),d.Dc(3," Review and checkout "),d.Ub(),d.Ub(),d.Ub(),d.Vb(4,"div",3),d.Vb(5,"div",1),d.Vb(6,"div",4),d.Vb(7,"button",5),d.cc("click",(function(){return t.onPlaceOrder()})),d.Dc(8,"Place your order"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"div",0),d.Vb(10,"div",6),d.Qb(11,"app-shared-checkout-items-display",7),d.Ub(),d.Vb(12,"div",8),d.Qb(13,"app-shared-delivery-comp"),d.Qb(14,"app-shared-payment-info"),d.Ub(),d.Ub(),d.Vb(15,"div",9),d.Vb(16,"div",10),d.Vb(17,"div",11),d.Dc(18," Tax: $XX.XX "),d.Ub(),d.Ub(),d.Vb(19,"div",10),d.Vb(20,"div",11),d.Dc(21," Total: $XX.XX "),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(11),d.mc("cartOrders",t.cartOrders))},directives:[Re,Ye,He],styles:[".checkout-btn[_ngcontent-%COMP%]{width:40rem}.checkout-list[_ngcontent-%COMP%]{border-top:1px solid #cce6ff;border-bottom:1px solid #cce6ff}.icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800}"]}),e})(),et=(()=>{class e{constructor(e,t,r){this.router=e,this.route=t,this.cs=r}canActivate(e,t){return this.cs.cartItemList$.pipe(Object(Qe.a)(e=>!!(e&&e.length>0)||(this.router.navigate(["/","new-order"]),!1)))}}return e.\u0275fac=function(t){return new(t||e)(d.Zb(o.c),d.Zb(o.a),d.Zb(V.a))},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var tt=r("dq+2");const rt=[{path:"",component:O,data:{title:"New Order"},children:[{path:"",redirectTo:"new",pathMatch:"full"},{path:"new",component:Ie,canActivate:[tt.a]},{path:"checkout",component:Ze,canActivate:[et]},{path:"all",component:Ae,canActivate:[tt.a],children:[{path:":id",component:C}]}]}];let st=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[o.f.forChild(rt)],o.f]}),e})();var it=r("iJtq"),nt=r("UmVK"),ot=r("37S3"),ct=r("uKK0");let at=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[nt.a,i.s,i.k,s.c]]}),e})(),lt=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[s.c,i.k,i.s,o.f,nt.a,ot.a,ct.a,at]]}),e})();var dt=r("sc7Y"),bt=r("Nqw2");let ut=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[i.k,s.c,ot.a]]}),e})(),pt=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})(),ht=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})();var mt=r("re6+"),gt=r("gz+R"),ft=r("dwd6");let vt=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},providers:[],imports:[[s.c,i.k,i.s,n.b,it.a,st,lt,nt.a,ot.a,ct.a,dt.a,bt.a,ut,pt,ht,gt.a,mt.a,ft.a]]}),e})()}}]);