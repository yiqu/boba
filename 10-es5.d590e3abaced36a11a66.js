function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{roHT:function(e,t,n){"use strict";n.r(t),n.d(t,"OrderNewModule",(function(){return Jt}));var r=n("ofXK"),i=n("3Pt+"),s=n("tk/3"),o=n("tyNb"),a=n("AytR"),c=n("XNiG"),l=n("1G5W"),u=n("fXoL"),d=n("dZ8w"),b=n("IYfF"),f=n("kt0X"),p=n("riLL"),h=n("VsN/"),m=n("f/hT"),g=function(){return["all"]};function v(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",2),u.Vb(1,"div",3),u.Qb(2,"app-shared-ad-banner",4),u.Ub(),u.Qb(3,"hr"),u.Qb(4,"app-notification-banner",5),u.Vb(5,"div",6),u.Vb(6,"div",7),u.Vb(7,"button",8),u.cc("click",(function(){return u.uc(n),u.gc().goToNew()})),u.Dc(8,"Start new order"),u.Ub(),u.Vb(9,"a",9),u.Dc(10,"My cart"),u.Ub(),u.Ub(),u.Ub(),u.Qb(11,"hr"),u.Qb(12,"router-outlet"),u.Ub()}if(2&e){var r=u.gc();u.Cb(2),u.mc("ads",r.ads),u.Cb(2),u.mc("loginRequired",!0)("showBreak",!0)("customMsg",r.bannerMsg),u.Cb(5),u.mc("routerLink",u.nc(5,g))}}function k(e,t){1&e&&u.Qb(0,"app-shared-loading")}var y,C,O,w,D=((C=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.abs=t,this.router=n,this.route=r,this.as=i,this.store=s,this.bannerMsg="first, you will not be able to add orders or checkout.",this.compDest$=new c.a}return _createClass(e,[{key:"getCurrentTime",value:function(){return(new Date).getTime()}},{key:"goToNew",value:function(){this.router.navigate(["new"],{queryParams:{date:this.getCurrentTime()},relativeTo:this.route})}},{key:"ngOnInit",value:function(){var e=this;this.setupAds(),this.store.select("appAuth").pipe(Object(l.a)(this.compDest$)).subscribe((function(t){e.authLoading=t.loading}))}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}},{key:"setupAds",value:function(){a.a.adsOn&&(this.ads=this.abs.getAds())}}]),e}()).\u0275fac=function(e){return new(e||C)(u.Pb(d.a),u.Pb(o.c),u.Pb(o.a),u.Pb(b.a),u.Pb(f.h))},C.\u0275cmp=u.Jb({type:C,selectors:[["app-order-new"]],decls:3,vars:2,consts:[["class","container mb-3",4,"ngIf","ngIfElse"],["loading",""],[1,"container","mb-3"],[1,"deals-banner","mt-2"],[3,"ads"],[3,"loginRequired","showBreak","customMsg"],[1,"row","mb-2"],[1,"col-sm-12","d-flex","order-nav-group"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"btn","btn-outline-info",3,"routerLink"]],template:function(e,t){if(1&e&&(u.Bc(0,v,13,6,"div",0),u.Bc(1,k,1,0,"ng-template",null,1,u.Cc)),2&e){var n=u.rc(2);u.mc("ngIf",!t.authLoading)("ngIfElse",n)}},directives:[r.l,p.a,h.a,o.e,o.g,m.a],styles:[".deals-banner[_ngcontent-%COMP%]{height:30px}.order-nav-group[_ngcontent-%COMP%]{justify-content:space-between}"]}),C),S=((y=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.router=t,this.route=n,this.route.paramMap.subscribe((function(e){console.log("single order:",e.keys),r.orderId=e.get("id")}))}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||y)(u.Pb(o.c),u.Pb(o.a))},y.\u0275cmp=u.Jb({type:y,selectors:[["app-order-new-order"]],decls:1,vars:1,template:function(e,t){1&e&&u.Dc(0),2&e&&u.Fc("Single order display ",t.orderId,"\n")},styles:[""]}),y),V=n("OO0l"),U=n("eIep"),F=n("b8ES"),I=((O=function e(){_classCallCheck(this,e),this.refreshComponent$=new c.a,this.formValid=!1,this.selectionsInvalid=!0,this.userNameInvalid=!0,this.fgErrorMsgs=[]}).\u0275fac=function(e){return new(e||O)},O.\u0275prov=u.Lb({token:O,factory:O.\u0275fac,providedIn:"root"}),O),P=n("Xgv5"),_=n("DHDI"),x=((w=function(){function e(t,n){_classCallCheck(this,e),this.eleRef=t,this.renderer=n,this.isShowState=new u.o,this.isShown=!1}return _createClass(e,[{key:"onClick",value:function(e){"dropdownMenuButton"===e.id&&(this.isShown=!this.isShown,this.isShowState.emit(this.isShown))}},{key:"documentClick",value:function(e){"dropdownMenuButton"!==e.id&&this.isShown&&(this.isShown=!1,this.isShowState.emit(!1))}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||w)(u.Pb(u.l),u.Pb(u.G))},w.\u0275dir=u.Kb({type:w,selectors:[["","dropDownShow",""]],hostVars:2,hostBindings:function(e,t){1&e&&u.cc("click",(function(e){return t.onClick(e.target)}))("click",(function(e){return t.documentClick(e.target)}),!1,u.tc),2&e&&u.Gb("show",t.isShown)},outputs:{isShowState:"isShowState"}}),w);function M(e,t){if(1&e){var n=u.Wb();u.Vb(0,"div",5),u.cc("click",(function(){u.uc(n);var e=t.$implicit;return u.gc(2).onFavClick(e)})),u.Dc(1),u.Ub()}if(2&e){var r=t.$implicit;u.Cb(1),u.Fc(" ",r.fireKey," ")}}var B=function(e){return{show:e}};function T(e,t){if(1&e){var n=u.Wb();u.Tb(0),u.Vb(1,"div",1),u.cc("isShowState",(function(e){return u.uc(n),u.gc().onIsShowChange(e)})),u.Vb(2,"button",2),u.Dc(3),u.Ub(),u.Vb(4,"div",3),u.Bc(5,M,2,1,"div",4),u.Ub(),u.Ub(),u.Sb()}if(2&e){var r=u.gc();u.Cb(3),u.Fc(" My favs (",r.favItems.length,") "),u.Cb(1),u.mc("ngClass",u.oc(3,B,r.isShown)),u.Cb(1),u.mc("ngForOf",r.favItems)}}var L,N=((L=function(){function e(){_classCallCheck(this,e),this.favItems=[],this.onFavSelect=new u.o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onIsShowChange",value:function(e){this.isShown=e}},{key:"onFavClick",value:function(e){e&&this.onFavSelect.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||L)},L.\u0275cmp=u.Jb({type:L,selectors:[["app-order-new-create-fav-list"]],inputs:{favItems:"favItems"},outputs:{onFavSelect:"onFavSelect"},decls:1,vars:1,consts:[[4,"ngIf"],["dropDownShow","",1,"dropdown",3,"isShowState"],["type","button","id","dropdownMenuButton",1,"btn","btn-outline-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","mild-dropshadow",3,"ngClass"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&u.Bc(0,T,6,5,"ng-container",0),2&e&&u.mc("ngIf",t.favItems.length>0)},directives:[r.l,x,r.j,r.k],styles:[".dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;padding:.45rem 1.5rem}"]}),L),$=n("Pk+l"),A=n("B/XX"),j=n("xHqg"),E=n("JIr8"),z=n("KJJU"),G=n("8qxb"),Q=n("z6cu"),J=n("EY2u"),q=n("MPcn"),W=n("kmKP"),X=n("H0VJ"),K=n("E8I7"),R=n("LvDl"),Y=n("QibW");function H(e,t){if(1&e&&(u.Vb(0,"mat-radio-button",3),u.Dc(1),u.Ub()),2&e){var n=t.$implicit;u.mc("value",n),u.Cb(1),u.Fc(" ",n.display," ")}}var Z,ee=((Z=function(){function e(t){_classCallCheck(this,e),this.ofs=t,this.drinkSeries=[],this.compDest$=new c.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.drinkSeries=[],this.drinkSeries.push(new K.a(K.c.MILK_TEA,"Milk Tea"),new K.a(K.c.FRUIT_TEA,"Creative Mix"),new K.a(K.c.YOGURT,"Yogurt")),this.setDefaultValue()}},{key:"setDefaultValue",value:function(){var e=R.findIndex(this.drinkSeries,["name",this.seriesCtrl.value.name]);e>-1&&this.seriesCtrl.setValue(this.drinkSeries[e])}},{key:"onSeriesChange",value:function(){this.ofs.orderFg.get("drinkName").reset(null,{onlySelf:!1,emitEvent:!0})}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Z)(u.Pb(I))},Z.\u0275cmp=u.Jb({type:Z,selectors:[["app-shared-order-form-series-desc"]],inputs:{seriesCtrl:"seriesCtrl"},features:[u.Ab],decls:7,vars:2,consts:[[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl","ngModelChange"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"p"),u.Dc(2,"Select a drink series to get started."),u.Ub(),u.Vb(3,"p"),u.Dc(4,"We currently have three tea series to choose from:"),u.Ub(),u.Vb(5,"mat-radio-group",1),u.cc("ngModelChange",(function(){return t.onSeriesChange()})),u.Bc(6,H,2,2,"mat-radio-button",2),u.Ub(),u.Ub()),2&e&&(u.Cb(5),u.mc("formControl",t.seriesCtrl),u.Cb(1),u.mc("ngForOf",t.drinkSeries))},directives:[Y.b,i.o,i.g,r.k,Y.a],styles:["",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),Z),te=n("bTqV");function ne(e,t){if(1&e&&(u.Vb(0,"mat-radio-button",5),u.Dc(1),u.Ub()),2&e){var n=t.$implicit;u.mc("value",n),u.Cb(1),u.Fc(" ",n.display," ")}}function re(e,t){if(1&e&&(u.Vb(0,"div",2),u.Vb(1,"p"),u.Dc(2,"Select a drink:"),u.Ub(),u.Vb(3,"mat-radio-group",3),u.Bc(4,ne,2,2,"mat-radio-button",4),u.Ub(),u.Ub()),2&e){var n=u.gc();u.Cb(3),u.mc("formControl",n.drinkNameCtrl),u.Cb(1),u.mc("ngForOf",n.drinkNames)}}function ie(e,t){1&e&&(u.Vb(0,"p",7),u.Dc(1," We are sorry, there are currently no drinks available for the series you have selected. "),u.Ub())}function se(e,t){1&e&&(u.Vb(0,"p",7),u.Dc(1," Please go back and select a drink series first! "),u.Ub())}function oe(e,t){if(1&e&&(u.Bc(0,ie,2,0,"p",6),u.Bc(1,se,2,0,"p",6)),2&e){var n=u.gc();u.mc("ngIf",n.isDrinkSeriesSelected),u.Cb(1),u.mc("ngIf",!n.isDrinkSeriesSelected)}}var ae,ce=((ae=function(){function e(t,n){_classCallCheck(this,e),this.fds=t,this.ofs=n,this.drinkNames=[],this.compDest$=new c.a}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.compDest$.next(),this.setUpDrinksBySeries()}},{key:"ngOnInit",value:function(){}},{key:"setUpDrinksBySeries",value:function(){var e=this;this.fds.getDrinksBySeriesObs(this.seriesSelection).pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe((function(t){e.drinkNames=_toConsumableArray(t),e.drinkNames=R.sortBy(e.drinkNames,["display"]),e.setDefaultValue()}))}},{key:"setDefaultValue",value:function(){if(this.drinkNameCtrl.value){var e=R.findIndex(this.drinkNames,["name",this.drinkNameCtrl.value.name]);e>-1&&this.drinkNameCtrl.setValue(this.drinkNames[e])}}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}},{key:"isDrinkSeriesSelected",get:function(){return this.ofs.orderFg.get("seriesName").valid}}]),e}()).\u0275fac=function(e){return new(e||ae)(u.Pb(F.a),u.Pb(I))},ae.\u0275cmp=u.Jb({type:ae,selectors:[["app-shared-order-form-drink-desc"]],inputs:{drinkNameCtrl:"drinkNameCtrl",seriesSelection:"seriesSelection"},features:[u.Ab],decls:3,vars:2,consts:[["class","comf",4,"ngIf","ngIfElse"],["noDrinks",""],[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"],["class","mb-3",4,"ngIf"],[1,"mb-3"]],template:function(e,t){if(1&e&&(u.Bc(0,re,5,2,"div",0),u.Bc(1,oe,2,2,"ng-template",null,1,u.Cc)),2&e){var n=u.rc(2);u.mc("ngIf",t.drinkNames.length>0)("ngIfElse",n)}},directives:[r.l,Y.b,i.o,i.g,r.k,Y.a],styles:["p[_ngcontent-%COMP%]{font-family:Comfortaa,cursive!important}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),ae),le=n("itXk"),ue=n("5RNC");function de(e,t){if(1&e&&(u.Vb(0,"mat-radio-button",7),u.Dc(1),u.Ub()),2&e){var n=t.$implicit;u.mc("value",n),u.Cb(1),u.Fc(" ",n.display," ")}}var be,fe=((be=function(){function e(t,n){var r=this;_classCallCheck(this,e),this.fds=t,this.ofs=n,this.drinkSizes=[],this.iceOptions=[],this.sugarOptions=[],this.allOptionsLoaded=!1,this.compDest$=new c.a,this.sugarSliderLimit=new pe,this.iceSliderLimit=new pe,this.thumbDisplaySugarFn=function(e){var t;return null===(t=r.sugarOptions[e])||void 0===t?void 0:t.name},this.thumbDisplayIceFn=function(e){var t;return null===(t=r.iceOptions[e])||void 0===t?void 0:t.name}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.compDest$.next(),this.setupSettingOptions2()}},{key:"setupSettingOptions2",value:function(){var e=this;Object(le.a)(this.fds.getDrinksBySettingOptionObs("size"),this.fds.getDrinksBySettingOptionObs("sugar-level"),this.fds.getDrinksBySettingOptionObs("ice-level"),(function(e,t,n){return{size:e,sugar:t,ice:n}})).pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe((function(t){t&&(e.allOptionsLoaded=!0,e.drinkSizes=t.size,e.iceOptions=t.ice,e.sugarOptions=t.sugar,e.sortOptionsAsc(),e.setSugarSliderLimits(),e.setIceSliderLimits(),e.setSizeDefaultValue(),e.setSugarDefaultValue(),e.setIceDefaultValue())}))}},{key:"setSizeDefaultValue",value:function(){var e=R.findIndex(this.drinkSizes,["name",this.drinkSizeFc.value.name]);e>-1&&this.drinkSizeFc.setValue(this.drinkSizes[e])}},{key:"setSugarDefaultValue",value:function(){var e=R.findIndex(this.sugarOptions,["name",this.drinkSugarFc.value.name]);this.sugarSliderVal=e,this.currentSugarLevel=this.sugarOptions[e],e>-1&&this.drinkSugarFc.setValue(this.currentSugarLevel)}},{key:"setIceDefaultValue",value:function(){var e=R.findIndex(this.iceOptions,["name",this.drinkIceFc.value.name]);"none"===this.drinkIceFc.value.name&&(e=0),this.iceSliderVal=e,this.currentIceLevel=this.iceOptions[e],e>-1&&this.drinkIceFc.setValue(this.currentIceLevel)}},{key:"sortOptionsAsc",value:function(){this.sugarOptions.sort((function(e,t){return+e.name<+t.name?-1:1})),this.iceOptions.sort((function(e,t){return+e.name<+t.name?-1:1}))}},{key:"setSugarSliderLimits",value:function(){this.sugarSliderLimit.max=this.sugarOptions.length-1}},{key:"setIceSliderLimits",value:function(){this.iceSliderLimit.max=this.iceOptions.length-1}},{key:"onSugarLevelChange",value:function(){this.currentSugarLevel=this.sugarOptions[+this.sugarSliderVal],this.drinkSugarFc.setValue(this.currentSugarLevel)}},{key:"onIceLevelChange",value:function(){this.currentIceLevel=this.iceOptions[+this.iceSliderVal],this.drinkIceFc.setValue(this.currentIceLevel)}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}},{key:"drinkSizeFc",get:function(){return this.settingsFg.get("size")}},{key:"drinkIceFc",get:function(){return this.settingsFg.get("ice")}},{key:"drinkSugarFc",get:function(){return this.settingsFg.get("sugar")}}]),e}()).\u0275fac=function(e){return new(e||be)(u.Pb(F.a),u.Pb(I))},be.\u0275cmp=u.Jb({type:be,selectors:[["app-shared-order-form-settings-desc"]],inputs:{settingsFg:"settingsFg"},features:[u.Ab],decls:19,vars:24,consts:[[1,"comf"],["id","drink-size"],["aria-labelledby","drink-size","color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],["id","drink-size",1,"mb-3"],[1,"setting-slider-parent"],["color","primary",1,"setting-slider",3,"disabled","max","min","step","thumbLabel","displayWith","ngModel","vertical","ngModelChange","change"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"label",1),u.Dc(2,"Select drink size:"),u.Ub(),u.Vb(3,"mat-radio-group",2),u.Bc(4,de,2,2,"mat-radio-button",3),u.Ub(),u.Ub(),u.Qb(5,"hr"),u.Vb(6,"div",0),u.Vb(7,"label",4),u.Dc(8),u.hc(9,"lowercase"),u.Ub(),u.Vb(10,"div",5),u.Vb(11,"mat-slider",6),u.cc("ngModelChange",(function(e){return t.sugarSliderVal=e}))("change",(function(){return t.onSugarLevelChange()})),u.Ub(),u.Ub(),u.Ub(),u.Qb(12,"hr"),u.Vb(13,"div",0),u.Vb(14,"label",4),u.Dc(15),u.hc(16,"lowercase"),u.Ub(),u.Vb(17,"div",5),u.Vb(18,"mat-slider",6),u.cc("ngModelChange",(function(e){return t.iceSliderVal=e}))("change",(function(){return t.onIceLevelChange()})),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(3),u.mc("formControl",t.drinkSizeFc),u.Cb(1),u.mc("ngForOf",t.drinkSizes),u.Cb(4),u.Fc("Select sugar level (",u.ic(9,20,null==t.currentSugarLevel?null:t.currentSugarLevel.display),") :"),u.Cb(3),u.mc("disabled",!1)("max",t.sugarSliderLimit.max)("min",t.sugarSliderLimit.min)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplaySugarFn)("ngModel",t.sugarSliderVal)("vertical",!1),u.Cb(4),u.Fc("Select ice level (",u.ic(16,22,null==t.currentIceLevel?null:t.currentIceLevel.display),") :"),u.Cb(3),u.mc("disabled",!1)("max",3)("min",0)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplayIceFn)("ngModel",t.iceSliderVal)("vertical",!1))},directives:[Y.b,i.o,i.g,r.k,ue.a,i.r,Y.a],pipes:[r.i],styles:[".setting-slider[_ngcontent-%COMP%]{width:100%}.setting-slider-parent[_ngcontent-%COMP%]{width:50%}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),be),pe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this.min=t,this.max=n},he=n("MutI"),me=n("AB5n");function ge(e,t){if(1&e&&(u.Vb(0,"mat-list-option",5),u.Dc(1),u.Ub()),2&e){var n=t.$implicit;u.mc("value",n)("checkboxPosition","before"),u.Cb(1),u.Fc(" ",n.display," ")}}var ve,ke,ye=((ve=function(){function e(t,n,r){_classCallCheck(this,e),this.fds=t,this.fb=n,this.ofs=r,this.drinkToppings=[],this.compDest$=new c.a,this.defaultSelected=[],this.selectedCount=0,this.compareFn=function(e,t){return e.name===t.name}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.compDest$.next(),this.setupToppings(),this.defaultSelected=this.getDefaultSelected(),this.selectedCount=this.toppingFa.length}},{key:"getDefaultSelected",value:function(){return this.toppingFa.value?this.toppingFa.value:[]}},{key:"ngAfterViewInit",value:function(){}},{key:"onSelectionChange",value:function(e){var t=this.toppingList._value;this.selectedCount=e.source.selectedOptions.selected.length;var n=[];t.forEach((function(e){n.push($.a(e,!1))}));var r=this.fb.array(n);this.ofs.orderFg.setControl("toppings",r)}},{key:"setupToppings",value:function(){var e=this;this.fds.getDrinkToppingObs().pipe(Object(l.a)(this.compDest$),Object(l.a)(this.ofs.refreshComponent$)).subscribe((function(t){t&&(e.drinkToppings=R.sortBy(t,["display"]))}))}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}}]),e}()).\u0275fac=function(e){return new(e||ve)(u.Pb(F.a),u.Pb(i.e),u.Pb(I))},ve.\u0275cmp=u.Jb({type:ve,selectors:[["app-shared-order-form-topping-desc"]],viewQuery:function(e,t){var n;1&e&&u.Jc(he.g,!0),2&e&&u.qc(n=u.dc())&&(t.toppingList=n.first)},inputs:{toppingFa:"toppingFa"},features:[u.Ab],decls:7,vars:6,consts:[[1,"comf"],[1,"top-label"],[1,"row","top-row"],[3,"compareWith","ngModel","selectionChange"],["color","primary",3,"value","checkboxPosition",4,"ngFor","ngForOf"],["color","primary",3,"value","checkboxPosition"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Dc(2),u.hc(3,"countNumberDisplay"),u.Ub(),u.Vb(4,"div",2),u.Vb(5,"mat-selection-list",3),u.cc("selectionChange",(function(e){return t.onSelectionChange(e)})),u.Bc(6,ge,2,3,"mat-list-option",4),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(2),u.Fc("Select toppings ",u.ic(3,4,t.selectedCount)," : "),u.Cb(3),u.mc("compareWith",t.compareFn)("ngModel",t.defaultSelected),u.Cb(1),u.mc("ngForOf",t.drinkToppings))},directives:[he.g,i.o,i.r,r.k,he.d],pipes:[me.a],styles:[""]}),ve),Ce=n("aiZK"),Oe=n("kmnG"),we=n("qFsG"),De=n("NFeN"),Se=((ke=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e,t){var n,r,i=e.display;switch(t){case"FULL":i=e.display+e.user.email;break;case"DISPLAY":i=e.display;break;case"UID":i=null===(n=e.user)||void 0===n?void 0:n.uid;break;case"EMAIL":i=null===(r=e.user)||void 0===r?void 0:r.email}return i}}]),e}()).\u0275fac=function(e){return new(e||ke)},ke.\u0275pipe=u.Ob({name:"userDisplay",type:ke,pure:!0}),ke);function Ve(e,t){if(1&e&&(u.Vb(0,"li"),u.Dc(1),u.Ub()),2&e){var n=t.$implicit;u.Cb(1),u.Fc(" ",n," ")}}function Ue(e,t){if(1&e){var n=u.Wb();u.Vb(0,"span",8),u.cc("click",(function(){return u.uc(n),u.gc(2).onFixGoBack()})),u.Dc(1,"Take me there."),u.Ub()}}function Fe(e,t){if(1&e&&(u.Vb(0,"div",5),u.Vb(1,"p"),u.Dc(2,"Oops! You are missing a few things:"),u.Ub(),u.Vb(3,"ul"),u.Bc(4,Ve,2,1,"li",6),u.Ub(),u.Bc(5,Ue,2,0,"span",7),u.Ub()),2&e){var n=u.gc();u.Cb(4),u.mc("ngForOf",n.ofs.fgErrorMsgs),u.Cb(1),u.mc("ngIf",n.showTakeMeThere)}}var Ie,Pe=((Ie=function(){function e(t,n,r,i,s,o){_classCallCheck(this,e),this.us=t,this.ds=n,this.rdf=r,this.sbs=i,this.ofs=s,this.as=o,this.fixGoBack=new u.o,this.users=[],this.matcher=new Ce.b,this.missingSelectionAlert="Please fix your selections.",this.missingUserName="Please pick a user name",this.compDest$=new c.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){}},{key:"setDefaultValue",value:function(){if(this.userFc.value){var e=R.findIndex(this.users,["id",this.userFc.value.id]);e>-1?(this.userFc.setValue(this.users[e]),this.sbs.openSnackBar("Alias for this order has been pre-selected to '"+this.userFc.value.display+"'.",1e3)):(this.sbs.openSnackBar("Could not find alias '"+this.userFc.value.display+"' in your alias list, so no alias has been selected.",1e4),this.userFc.reset(null))}}},{key:"onFixGoBack",value:function(){var e=null;this.ofs.orderFg.get("seriesName").invalid?e=0:this.ofs.orderFg.get("drinkName").invalid&&(e=1),this.fixGoBack.emit(e)}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}},{key:"showTakeMeThere",get:function(){return 1!==this.ofs.fgErrorMsgs.length||"User name required"!==this.ofs.fgErrorMsgs[0]}}]),e}()).\u0275fac=function(e){return new(e||Ie)(u.Pb(W.a),u.Pb(X.a),u.Pb(F.a),u.Pb(_.a),u.Pb(I),u.Pb(b.a))},Ie.\u0275cmp=u.Jb({type:Ie,selectors:[["app-shared-order-form-confirm-desc"]],inputs:{userFc:"userFc"},outputs:{fixGoBack:"fixGoBack"},features:[u.Ab],decls:11,vars:4,consts:[[1,"roboto"],["class","alert alert-danger",4,"ngIf"],["appearance","outline",1,"name-field","mb-3"],["matInput","","placeholder","Your display name","readonly","","disabled","",3,"value"],["matSuffix","",1,"icon-mat-success"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["class","nav-back",3,"click",4,"ngIf"],[1,"nav-back",3,"click"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Bc(1,Fe,6,2,"div",1),u.Vb(2,"mat-form-field",2),u.Vb(3,"mat-label"),u.Dc(4,"Name"),u.Ub(),u.Qb(5,"input",3),u.hc(6,"userDisplay"),u.Vb(7,"mat-icon",4),u.Dc(8,"done"),u.Ub(),u.Vb(9,"mat-hint"),u.Dc(10,"This is your display name (it can be updated under your profile)."),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(1),u.mc("ngIf",!t.ofs.formValid),u.Cb(4),u.mc("value",u.ic(6,2,t.userFc.value)))},directives:[r.l,Oe.c,Oe.g,we.b,De.a,Oe.i,Oe.f,r.k],pipes:[Se],styles:[".name-field[_ngcontent-%COMP%]{width:20rem}mat-error.err[_ngcontent-%COMP%]{font-weight:700}div[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:13px}.alert[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),Ie),_e=n("bSwM");function xe(e,t){1&e&&(u.Vb(0,"div",21),u.Dc(1,"Series"),u.Ub())}function Me(e,t){1&e&&u.Dc(0,"Drink")}function Be(e,t){1&e&&u.Dc(0,"Size / Sugar / Ice")}function Te(e,t){1&e&&u.Dc(0,"Toppings")}function Le(e,t){1&e&&u.Dc(0,"Confirmation")}var Ne,$e=((Ne=function(){function e(t,n,r,i,s,o,a,l,d){_classCallCheck(this,e),this.fb=t,this.ofs=n,this.us=r,this.rdf=i,this.sbs=s,this.router=o,this.route=a,this.cs=l,this.ds=d,this.onDrinkSubmit=new u.o,this.isFavorite=!1,this.compDes$=new c.a,this.labelPosition="bottom",this.isStepperLinear=!1,this.selectionFcNames=["seriesName","drinkName","settings"]}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;this.drinkOrder&&(this.ofs.refreshComponent$.next(),this.orderStepper&&this.orderStepper.reset(),this.ofs.orderFg=null,this.ofs.orderFg=this.createForm(this.drinkOrder),this.setFormValidStatus(this.ofs.orderFg.status),this.ofs.orderFg.valueChanges.pipe(Object(l.a)(this.ofs.refreshComponent$)).subscribe((function(e){t.setFormValidStatus(t.ofs.orderFg.status),t.ofs.fgErrorMsgs=t.examineFgErrors(),console.log("changes",t.ofs.orderFg),t.currentDrinkSeries=t.drinkSeriesFc.value.name})))}},{key:"setFormValidStatus",value:function(e){this.ofs.formValid="VALID"===e}},{key:"ngOnInit",value:function(){}},{key:"createForm",value:function(e){var t=new i.i({});t.addControl("seriesName",$.a({name:e.drinkType.seriesName,display:e.drinkType.seriesDisplay},!1,[q.d])),t.addControl("drinkName",$.a({name:e.drinkType.name,display:e.drinkType.display},!1,[q.d])),t.addControl("settings",this.fb.group({size:$.a(this.drinkOrder.size,!1,[q.d]),ice:$.a(this.drinkOrder.iceLevel,!1,[q.d]),sugar:$.a(this.drinkOrder.sugar,!1,[q.d])}));var n=new i.d([]);return e.toppings.forEach((function(e){n.push($.a(e,!1))})),t.addControl("toppings",n),t.addControl("user",$.a(e.user?e.user:null,!1,[i.t.required,q.d])),t.addControl("isFavorite",$.a(null,!1)),t}},{key:"onOrderSubmit",value:function(){var e=this,t=this.ofs.orderFg.value,n=this.createCurrentDrinkOrderDetail(t),r=this.getSelectedUser(t),i=new V.c(null,(new Date).getTime(),[],r,null);i.orders=[n],t.isFavorite?this.getFavoriteAddObs(t).pipe(Object(U.a)((function(t){return e.rdf.getCartOrders().push(i)})),Object(E.a)((function(e){return Object(Q.a)(e.code)}))).subscribe((function(e){}),(function(t){console.error(t),e.sbs.openSnackBar("A favorite drink with that name already exists, try a different name.",5e3)}),(function(){e.sbs.openSnackBar("Fav drink saved and order added to cart."),e.router.navigate(["../","all"],{relativeTo:e.route})})):this.rdf.getCartOrders().push(i).then((function(t){e.sbs.openSnackBar("Order added to cart."),e.router.navigate(["../","all"],{relativeTo:e.route})}),(function(t){e.sbs.openSnackBar("There was an error adding this order to cart. "+t.code)}))}},{key:"createCurrentDrinkOrderDetail",value:function(e){var t=new V.b(e.settings.ice.name,e.settings.ice.display),n=new V.h(e.drinkName.name,e.drinkName.display,e.seriesName.name,e.seriesName.display),r=new V.e(e.settings.size.name,e.settings.size.display),i=new V.f(e.settings.sugar.name,e.settings.sugar.display),s=[];return e.toppings.forEach((function(e){s.push(new V.g(e.name,e.display))})),new V.d(t,n,r,i,s)}},{key:"getFavoriteAddObs",value:function(e){var t,n=this,r=new G.b("Add new favorite","Name",null,"edit","This will be the name of your favorite drink"),i=this.ds.getFavDrinkAddDialog(r),s=null===(t=e.user)||void 0===t?void 0:t.user;return i.afterClosed().pipe(Object(l.a)(this.compDes$),Object(U.a)((function(e){if(s&&e){var t=(new Date).getTime(),r=n.cs.getFDB().ref("favorites/"+s.uid+"/"+e),i=new V.a(r.key,n.getSelectedUser(n.ofs.orderFg.value),t,n.createCurrentDrinkOrderDetail(n.ofs.orderFg.value));return r.set(i)}return J.a})))}},{key:"getSelectedUser",value:function(e){return new z.c(e.user.id,e.user.display,e.user.user)}},{key:"onFixGoBack",value:function(e){null!==e&&(this.orderStepper.selectedIndex=e)}},{key:"examineFgErrors",value:function(){var e=[];return this.orderStepper.steps.forEach((function(t){t&&t.stepControl&&t.stepControl.invalid&&e.push(t.errorMessage)})),e}},{key:"ngOnDestroy",value:function(){this.compDes$.next()}},{key:"drinkSeriesFc",get:function(){return this.ofs.orderFg.get("seriesName")}},{key:"drinkNameFc",get:function(){return this.ofs.orderFg.get("drinkName")}},{key:"drinkSettingsFg",get:function(){return this.ofs.orderFg.get("settings")}},{key:"drinkToppingsFa",get:function(){return this.ofs.orderFg.get("toppings")}},{key:"userFc",get:function(){return this.ofs.orderFg.get("user")}},{key:"isFavoriteFc",get:function(){return this.ofs.orderFg.get("isFavorite")}}]),e}()).\u0275fac=function(e){return new(e||Ne)(u.Pb(i.e),u.Pb(I),u.Pb(W.a),u.Pb(F.a),u.Pb(_.a),u.Pb(o.c),u.Pb(o.a),u.Pb(P.a),u.Pb(X.a))},Ne.\u0275cmp=u.Jb({type:Ne,selectors:[["app-shared-order-form"]],viewQuery:function(e,t){var n;1&e&&u.Jc(j.a,!0),2&e&&u.qc(n=u.dc())&&(t.orderStepper=n.first)},inputs:{drinkOrder:"drinkOrder"},outputs:{onDrinkSubmit:"onDrinkSubmit"},features:[u.Bb([{provide:A.h,useValue:{showError:!0}}]),u.Ab],decls:47,vars:15,consts:[[3,"linear","labelPosition","formGroup"],["stepper",""],["errorMessage","Drink series required",3,"stepControl"],["matStepLabel",""],[3,"seriesCtrl"],["mat-stroked-button","","color","primary","matStepperNext",""],["errorMessage","Drink type required",3,"stepControl"],["title","Pick a drink","matStepLabel",""],[3,"drinkNameCtrl","seriesSelection"],["mat-stroked-button","","color","primary","matStepperPrevious","",1,"mr-1"],["errorMessage","Sugar & ice level required",3,"stepControl"],["title","Pick drink settings","matStepLabel",""],[3,"settingsFg"],[3,"stepControl"],[3,"toppingFa"],["errorMessage","User name required",3,"stepControl"],[3,"userFc","fixGoBack"],[1,"d-flex"],["mat-stroked-button","","matStepperPrevious","",1,"mr-1"],["mat-flat-button","","color","primary",1,"mr-4","order-submit",3,"disabled","click"],["color","primary","formControlName","isFavorite",1,"fav-check"],["title","Pick a drink series"]],template:function(e,t){1&e&&(u.Vb(0,"mat-horizontal-stepper",0,1),u.Vb(2,"mat-step",2),u.Bc(3,xe,2,0,"ng-template",3),u.Qb(4,"app-shared-order-form-series-desc",4),u.Qb(5,"hr"),u.Vb(6,"div"),u.Vb(7,"button",5),u.Dc(8,"Next"),u.Ub(),u.Ub(),u.Ub(),u.Vb(9,"mat-step",6),u.Bc(10,Me,1,0,"ng-template",7),u.Qb(11,"app-shared-order-form-drink-desc",8),u.Qb(12,"hr"),u.Vb(13,"div"),u.Vb(14,"button",9),u.Dc(15,"Back"),u.Ub(),u.Vb(16,"button",5),u.Dc(17,"Next"),u.Ub(),u.Ub(),u.Ub(),u.Vb(18,"mat-step",10),u.Bc(19,Be,1,0,"ng-template",11),u.Qb(20,"app-shared-order-form-settings-desc",12),u.Qb(21,"hr"),u.Vb(22,"div"),u.Vb(23,"button",9),u.Dc(24,"Back"),u.Ub(),u.Vb(25,"button",5),u.Dc(26,"Next"),u.Ub(),u.Ub(),u.Ub(),u.Vb(27,"mat-step",13),u.Bc(28,Te,1,0,"ng-template",11),u.Qb(29,"app-shared-order-form-topping-desc",14),u.Qb(30,"hr"),u.Vb(31,"div"),u.Vb(32,"button",9),u.Dc(33,"Back"),u.Ub(),u.Vb(34,"button",5),u.Dc(35,"Next"),u.Ub(),u.Ub(),u.Ub(),u.Vb(36,"mat-step",15),u.Bc(37,Le,1,0,"ng-template",3),u.Vb(38,"app-shared-order-form-confirm-desc",16),u.cc("fixGoBack",(function(e){return t.onFixGoBack(e)})),u.Ub(),u.Qb(39,"hr"),u.Vb(40,"div",17),u.Vb(41,"button",18),u.Dc(42,"Back"),u.Ub(),u.Vb(43,"button",19),u.cc("click",(function(){return t.onOrderSubmit()})),u.Dc(44,"Finish "),u.Ub(),u.Vb(45,"mat-checkbox",20),u.Dc(46,"Save as favorite"),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.mc("linear",t.isStepperLinear)("labelPosition",t.labelPosition)("formGroup",t.ofs.orderFg),u.Cb(2),u.mc("stepControl",t.drinkSeriesFc),u.Cb(2),u.mc("seriesCtrl",t.drinkSeriesFc),u.Cb(5),u.mc("stepControl",t.drinkNameFc),u.Cb(2),u.mc("drinkNameCtrl",t.drinkNameFc)("seriesSelection",t.currentDrinkSeries),u.Cb(7),u.mc("stepControl",t.drinkSettingsFg),u.Cb(2),u.mc("settingsFg",t.drinkSettingsFg),u.Cb(7),u.mc("stepControl",t.drinkToppingsFa),u.Cb(2),u.mc("toppingFa",t.drinkToppingsFa),u.Cb(7),u.mc("stepControl",t.userFc),u.Cb(2),u.mc("userFc",t.userFc),u.Cb(5),u.mc("disabled",t.ofs.orderFg&&t.ofs.orderFg.invalid))},directives:[j.a,i.p,i.j,j.b,j.c,ee,te.a,j.e,ce,j.f,fe,ye,Pe,_e.a,i.o,i.h],styles:[".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),Ne);function Ae(e,t){if(1&e){var n=u.Wb();u.Vb(0,"app-order-new-create-fav-list",5),u.cc("onFavSelect",(function(e){return u.uc(n),u.gc().onFavSelect(e)})),u.Ub()}if(2&e){var r=u.gc();u.mc("favItems",r.favItems)}}function je(e,t){if(1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Qb(2,"app-shared-order-form",6),u.Ub(),u.Ub()),2&e){var n=u.gc();u.Cb(2),u.mc("drinkOrder",n.drinkOrder)}}var Ee,ze=((Ee=function(){function e(t,n,r,i,s,o,a){var u=this;_classCallCheck(this,e),this.fds=t,this.route=n,this.ofs=r,this.cs=i,this.sbs=s,this.as=o,this.store=a,this.favItems=[],this.compDest$=new c.a,this.route.queryParamMap.pipe(Object(l.a)(this.compDest$),Object(U.a)((function(e){return u.store.select("appAuth").pipe(Object(l.a)(u.compDest$))}))).subscribe((function(e){(null==e?void 0:e.verifiedUser)&&(u.ofs.refreshComponent$.next(),u.createDefaultDrink(e.verifiedUser))}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.store.select("appAuth").pipe(Object(l.a)(this.compDest$))}},{key:"createDefaultDrink",value:function(e){var t,n=new V.b(null,null),r=new V.f(null,null),i=new V.e(null,null),s=new V.h(null,null,null,null);e&&e.inAppAliases&&(t=e.inAppAliases.alias),this.drinkOrder=new V.d(n,s,i,r,[],t)}},{key:"onFavSelect",value:function(e){var t=new V.b(e.favDrink.iceLevel.name,e.favDrink.iceLevel.display),n=new V.f(e.favDrink.sugar.name,e.favDrink.sugar.display),r=new V.e(e.favDrink.size.name,e.favDrink.size.display),i=new V.h(e.favDrink.drinkType.name,e.favDrink.drinkType.display,e.favDrink.drinkType.seriesName,e.favDrink.drinkType.seriesDisplay),s=[];e.favDrink.toppings&&e.favDrink.toppings.forEach((function(e){s.push(e)})),this.drinkOrder=new V.d(t,i,r,n,s,e.user),this.sbs.openSnackBar('"'+e.fireKey+'" has been applied.')}},{key:"loadFavorite",value:function(){}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Ee)(u.Pb(F.a),u.Pb(o.a),u.Pb(I),u.Pb(P.a),u.Pb(_.a),u.Pb(b.a),u.Pb(f.h))},Ee.\u0275cmp=u.Jb({type:Ee,selectors:[["app-order-new-create"]],decls:8,vars:2,consts:[[1,"row"],[1,"col-sm-12"],[3,"favItems","onFavSelect",4,"ngIf"],[1,"order-label","mb-3","double-underline","comf","center-align"],["class","row",4,"ngIf"],[3,"favItems","onFavSelect"],[3,"drinkOrder"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Bc(2,Ae,1,1,"app-order-new-create-fav-list",2),u.Ub(),u.Ub(),u.Vb(3,"div",0),u.Vb(4,"div",1),u.Vb(5,"div",3),u.Dc(6," Current order "),u.Ub(),u.Ub(),u.Ub(),u.Bc(7,je,3,1,"div",4)),2&e&&(u.Cb(2),u.mc("ngIf",t.favItems.length>0),u.Cb(5),u.mc("ngIf",t.drinkOrder))},directives:[r.l,N,$e],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}"]}),Ee),Ge=n("s5sP"),Qe=n("2Gqf"),Je=n("4ppg");function qe(e,t){if(1&e){var n=u.Wb();u.Tb(0,12),u.Vb(1,"div",13),u.Vb(2,"div",4),u.Qb(3,"app-shared-order-user-info",14),u.Ub(),u.Ub(),u.Vb(4,"div",15),u.Vb(5,"div",3),u.Vb(6,"div",4),u.Vb(7,"app-shared-order-accordion",16),u.cc("orderRemove",(function(e){return u.uc(n),u.gc(3).onOrderRemove(e)})),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Sb()}if(2&e){var r=t.$implicit,i=t.index,s=u.gc(3);u.Cb(3),u.mc("orderNumber",i)("showOrderedDate",!1)("totalOrdersCount",s.cartOrdersGrouped.length)("order",r),u.Cb(4),u.mc("drinkOrder",r)("editable",!0)("startAsCollapsed",!0)}}function We(e,t){if(1&e){var n=u.Wb();u.Tb(0),u.Qb(1,"hr"),u.Vb(2,"div",17),u.Vb(3,"div",4),u.Vb(4,"div"),u.Vb(5,"button",18),u.cc("click",(function(){return u.uc(n),u.gc(3).onCheckoutClick()})),u.Vb(6,"mat-icon",19),u.Dc(7,"credit_card"),u.Ub(),u.Dc(8," Checkout "),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Sb()}}function Xe(e,t){if(1&e&&(u.Tb(0),u.Vb(1,"div",3),u.Vb(2,"div",4),u.Vb(3,"div",5),u.Dc(4),u.hc(5,"countNumberDisplay"),u.Ub(),u.Ub(),u.Ub(),u.Vb(6,"div",6),u.Vb(7,"div",4),u.Vb(8,"div",7),u.Vb(9,"div"),u.Dc(10),u.hc(11,"pluralDisplay"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Bc(12,qe,8,7,"ng-container",8),u.Vb(13,"div",9),u.Vb(14,"div",4),u.Vb(15,"div",10),u.Dc(16," Total cost: TBD "),u.Ub(),u.Ub(),u.Ub(),u.Bc(17,We,9,0,"ng-container",11),u.Sb()),2&e){var n=u.gc(2);u.Cb(4),u.Fc(" Cart ",u.ic(5,6,n.cartOrders.length)," "),u.Cb(6),u.Hc(" There are currently ",n.cartOrders.length," items made from ",n.cartOrdersGrouped.length," ",u.jc(11,8,"person",n.cartOrdersGrouped.length),". "),u.Cb(2),u.mc("ngForOf",n.cartOrdersGrouped),u.Cb(5),u.mc("ngIf",n.cartOrders.length>0)}}function Ke(e,t){if(1&e&&(u.Tb(0),u.Bc(1,Xe,18,11,"ng-container",0),u.Sb()),2&e){var n=u.gc(),r=u.rc(2);u.Cb(1),u.mc("ngIf",n.listOfUsers.length>0)("ngIfElse",r)}}var Re=function(){return["/home/open-orders"]};function Ye(e,t){if(1&e&&(u.Vb(0,"div",20),u.Vb(1,"div",21),u.Dc(2," Cart is empty. "),u.Ub(),u.Vb(3,"div",22),u.Vb(4,"a",23),u.Dc(5,"Go see my open orders."),u.Ub(),u.Ub(),u.Vb(6,"div",24),u.Qb(7,"img",25),u.Ub(),u.Ub()),2&e){var n=u.gc();u.Cb(4),u.mc("routerLink",u.nc(2,Re)),u.Cb(3),u.mc("src",n.bgUrl,u.wc)}}function He(e,t){1&e&&(u.Vb(0,"div",20),u.Dc(1," Loading your cart... "),u.Ub())}var Ze,et,tt=((Ze=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.rdfs=t,this.cs=n,this.router=r,this.route=i,this.sbs=s,this.compDest$=new c.a,this.cartOrders=[],this.listOfUsers=null,this.cartOrdersGrouped=[],this.bgUrl="assets/images/bg/long-bg-bears.png"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.cs.cartItemList$.pipe(Object(l.a)(this.compDest$)).subscribe((function(t){e.cartOrders=_toConsumableArray(t),e.listOfUsers=[],e.cartOrdersGrouped=[],e.createGroupByUser()}))}},{key:"createGroupByUser",value:function(){var e=this;R.uniqBy(this.cartOrders,(function(e){return e.user.id})).forEach((function(t){e.listOfUsers.push(t.user)})),this.listOfUsers.forEach((function(t){var n=new V.c(null,(new Date).getTime(),[],t,[]);e.cartOrdersGrouped.push(n),e.cartOrders.forEach((function(n){if(n.user.id===t.id){var r=e.cartOrdersGrouped.findIndex((function(e){return e.user.id===n.user.id}));e.cartOrdersGrouped[r].orders.push(n.orders[0]),e.cartOrdersGrouped[r].groupedOrders.push(n)}}))}))}},{key:"onCheckoutClick",value:function(){this.cartOrders.length>0&&this.router.navigate(["../","checkout"],{relativeTo:this.route})}},{key:"onAddAnother",value:function(){this.router.navigate(["../","new"],{relativeTo:this.route})}},{key:"onOrderRemove",value:function(e){var t=this;e&&e.fireKey?this.cs.cartItemsListFire.remove(e.fireKey).then((function(e){t.sbs.openSnackBar("Item removed from cart.")}),(function(e){t.sbs.openSnackBar("Server Error: something went wrong while removing this item. "+e.code)})):this.sbs.openSnackBar("Error occured removing this item: Item does not exist anymore.")}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}}]),e}()).\u0275fac=function(e){return new(e||Ze)(u.Pb(F.a),u.Pb(P.a),u.Pb(o.c),u.Pb(o.a),u.Pb(_.a))},Ze.\u0275cmp=u.Jb({type:Ze,selectors:[["app-order-new-view-all"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyCart",""],["loading",""],[1,"row","mb-3"],[1,"col-sm-12"],[1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-3","comf"],[1,"cart-subtext"],["class","",4,"ngFor","ngForOf"],[1,"row","mt-3","mb-3"],[1,"order-label","mb-3","comf","d-flex","float-right"],[4,"ngIf"],[1,""],[1,"row","mb-1"],[3,"orderNumber","showOrderedDate","totalOrdersCount","order"],[1,"container-fluid"],[3,"drinkOrder","editable","startAsCollapsed","orderRemove"],[1,"row","mt-4","mb-3"],["mat-flat-button","","color","primary",3,"click"],["matSuffix",""],[1,"comf"],[1,"banner-text","center-align","mb-4"],[1,"comf","center-align","mb-5"],[3,"routerLink"],[1,"bg-parent","center-align"],["alt","bg",1,"img-h-100","b-r-10",3,"src"]],template:function(e,t){if(1&e&&(u.Bc(0,Ke,2,2,"ng-container",0),u.Bc(1,Ye,8,3,"ng-template",null,1,u.Cc),u.Bc(3,He,2,0,"ng-template",null,2,u.Cc)),2&e){var n=u.rc(4);u.mc("ngIf",t.listOfUsers)("ngIfElse",n)}},directives:[r.l,r.k,Ge.a,Qe.a,te.a,De.a,Oe.i,o.e],pipes:[me.a,Je.a],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}.float-right[_ngcontent-%COMP%]{justify-content:flex-end}.cart-subtext[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.bg-parent[_ngcontent-%COMP%]{display:flex;height:50rem;justify-content:center;overflow:hidden;opacity:.3}.banner-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800}"]}),Ze),nt=n("Cfvw"),rt=n("LRne"),it=n("bOdf"),st=n("lJxs"),ot=n("0EUg"),at=n("B6Xj"),ct=((et=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t=e.drinkType.display,n=e.size.display,r=e.iceLevel.display,i=e.sugar.display,s=e.toppings,o="";return s?s.forEach((function(e,t){o=o+e.display+(t===s.length-1?"":", ")})):o=" No toppings",n.toUpperCase()+", "+t+", "+r.toLowerCase()+", "+i.toLowerCase()+", "+o}}]),e}()).\u0275fac=function(e){return new(e||et)},et.\u0275pipe=u.Ob({name:"drinkOrderDetailText",type:et,pure:!0}),et),lt=function(){return{"border-bottom":!0}};function ut(e,t){if(1&e&&(u.Vb(0,"div",3),u.Vb(1,"div",4),u.Vb(2,"div",5),u.Vb(3,"div",6),u.Qb(4,"img",7),u.hc(5,"drinkTypeUrl"),u.Ub(),u.Vb(6,"div",8),u.Dc(7),u.hc(8,"drinkOrderDetailText"),u.Ub(),u.Ub(),u.Ub(),u.Ub()),2&e){var n=t.$implicit;u.mc("ngClass",u.nc(7,lt)),u.Cb(4),u.mc("src",u.ic(5,3,n.orders[0].drinkType.seriesName),u.wc),u.Cb(3),u.Fc(" ",u.ic(8,5,n.orders[0])," ")}}var dt,bt,ft,pt,ht,mt,gt,vt,kt,yt,Ct,Ot,wt=((ht=function(){function e(){_classCallCheck(this,e),this.cartOrders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ht)},ht.\u0275cmp=u.Jb({type:ht,selectors:[["app-shared-checkout-items-display"]],inputs:{cartOrders:"cartOrders"},decls:4,vars:2,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],["class","row roboto p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","roboto","p-2",3,"ngClass"],[1,"col-sm-12"],[1,"d-flex"],[1,"icon-img-parent","mb-1"],["alt","tea icon",1,"img-h-100",3,"src"],[1,"v-self-align-center","ml-1","order-desc"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Dc(2),u.Ub(),u.Ub(),u.Bc(3,ut,9,8,"div",2)),2&e&&(u.Cb(2),u.Fc(" ",t.cartOrders.length," items: "),u.Cb(1),u.mc("ngForOf",t.cartOrders))},directives:[r.k,r.j],pipes:[at.a,ct],styles:[".icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800;color:#4d4d4d}"]}),ht),Dt=((pt=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||pt)},pt.\u0275cmp=u.Jb({type:pt,selectors:[["app-shared-delivery-comp"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Dc(2," Delivery method: "),u.Ub(),u.Ub(),u.Vb(3,"div",0),u.Vb(4,"div",2),u.Dc(5," Coming soon "),u.Ub(),u.Ub())},styles:[""]}),pt),St=((ft=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ft)},ft.\u0275cmp=u.Jb({type:ft,selectors:[["app-shared-payment-info"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Dc(2," Payment information: "),u.Ub(),u.Ub(),u.Vb(3,"div",0),u.Vb(4,"div",2),u.Dc(5," Coming soon "),u.Ub(),u.Ub())},styles:[""]}),ft),Vt=((bt=function(){function e(t,n,r,i,s){_classCallCheck(this,e),this.cs=t,this.rfd=n,this.sbs=r,this.router=i,this.route=s,this.compDest$=new c.a,this.cartOrders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.cs.cartItemList$.pipe(Object(l.a)(this.compDest$)).subscribe((function(t){e.cartOrders=_toConsumableArray(t)}))}},{key:"ngAfterViewInit",value:function(){this.scrollToTopView()}},{key:"onPlaceOrder",value:function(){var e=this,t=this.cs.createGroupByUser(this.cartOrders);Object(nt.a)(t).pipe(Object(it.a)((function(t){return e.rfd.openOrdersFDB.push(t)}))).subscribe((function(e){}),(function(t){e.sbs.openSnackBar("Order could not be placed, error occured: "+t.code)}),(function(){Object(nt.a)(e.cartOrders).pipe(Object(st.a)((function(t){return Object(rt.a)(e.cs.cartItemsListFire.remove(t.fireKey))})),Object(ot.a)()).subscribe((function(e){}),(function(t){e.sbs.openSnackBar("Order could not be placed, error occured: "+t.code)}),(function(){e.sbs.openSnackBar("We have received your orders!"),e.goToCart()}))}))}},{key:"goToCart",value:function(){this.router.navigate(["../","all"],{relativeTo:this.route})}},{key:"scrollToTopView",value:function(){document.getElementById("checkout-heading").scrollIntoView(!1)}},{key:"ngOnDestroy",value:function(){this.compDest$.next(),this.compDest$.complete()}}]),e}()).\u0275fac=function(e){return new(e||bt)(u.Pb(P.a),u.Pb(F.a),u.Pb(_.a),u.Pb(o.c),u.Pb(o.a))},bt.\u0275cmp=u.Jb({type:bt,selectors:[["app-order-new-checkout"]],decls:22,vars:1,consts:[[1,"row","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-5"],[1,"center-align"],["type","button",1,"btn","btn-success","checkout-btn",3,"click"],[1,"col-sm-5"],[3,"cartOrders"],[1,"col-sm-6","ml-md-auto"],[1,""],[1,"row","mb-3","comf"],[1,"col-sm-6"]],template:function(e,t){1&e&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Vb(2,"div",2),u.Dc(3," Review and checkout "),u.Ub(),u.Ub(),u.Ub(),u.Vb(4,"div",3),u.Vb(5,"div",1),u.Vb(6,"div",4),u.Vb(7,"button",5),u.cc("click",(function(){return t.onPlaceOrder()})),u.Dc(8,"Place your order"),u.Ub(),u.Ub(),u.Ub(),u.Ub(),u.Vb(9,"div",0),u.Vb(10,"div",6),u.Qb(11,"app-shared-checkout-items-display",7),u.Ub(),u.Vb(12,"div",8),u.Qb(13,"app-shared-delivery-comp"),u.Qb(14,"app-shared-payment-info"),u.Ub(),u.Ub(),u.Vb(15,"div",9),u.Vb(16,"div",10),u.Vb(17,"div",11),u.Dc(18," Tax: $XX.XX "),u.Ub(),u.Ub(),u.Vb(19,"div",10),u.Vb(20,"div",11),u.Dc(21," Total: $XX.XX "),u.Ub(),u.Ub(),u.Ub()),2&e&&(u.Cb(11),u.mc("cartOrders",t.cartOrders))},directives:[wt,Dt,St],styles:[".checkout-btn[_ngcontent-%COMP%]{width:40rem}.checkout-list[_ngcontent-%COMP%]{border-top:1px solid #cce6ff;border-bottom:1px solid #cce6ff}.icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800}"]}),bt),Ut=((dt=function(){function e(t,n,r){_classCallCheck(this,e),this.router=t,this.route=n,this.cs=r}return _createClass(e,[{key:"canActivate",value:function(e,t){var n=this;return this.cs.cartItemList$.pipe(Object(st.a)((function(e){return!!(e&&e.length>0)||(n.router.navigate(["/","new-order"]),!1)})))}}]),e}()).\u0275fac=function(e){return new(e||dt)(u.Zb(o.c),u.Zb(o.a),u.Zb(P.a))},dt.\u0275prov=u.Lb({token:dt,factory:dt.\u0275fac,providedIn:"root"}),dt),Ft=n("dq+2"),It=[{path:"",component:D,data:{title:"New Order"},children:[{path:"",redirectTo:"new",pathMatch:"full"},{path:"new",component:ze,canActivate:[Ft.a]},{path:"checkout",component:Vt,canActivate:[Ut]},{path:"all",component:tt,canActivate:[Ft.a],children:[{path:":id",component:S}]}]}],Pt=((mt=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:mt}),mt.\u0275inj=u.Mb({factory:function(e){return new(e||mt)},imports:[[o.f.forChild(It)],o.f]}),mt),_t=n("iJtq"),xt=n("UmVK"),Mt=n("37S3"),Bt=n("uKK0"),Tt=((vt=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:vt}),vt.\u0275inj=u.Mb({factory:function(e){return new(e||vt)},providers:[],imports:[[xt.a,i.s,i.k,r.c]]}),vt),Lt=((gt=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:gt}),gt.\u0275inj=u.Mb({factory:function(e){return new(e||gt)},providers:[],imports:[[r.c,i.k,i.s,o.f,xt.a,Mt.a,Bt.a,Tt]]}),gt),Nt=n("sc7Y"),$t=n("Nqw2"),At=((Ct=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:Ct}),Ct.\u0275inj=u.Mb({factory:function(e){return new(e||Ct)},providers:[],imports:[[i.k,r.c,Mt.a]]}),Ct),jt=((yt=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:yt}),yt.\u0275inj=u.Mb({factory:function(e){return new(e||yt)},providers:[],imports:[[]]}),yt),Et=((kt=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:kt}),kt.\u0275inj=u.Mb({factory:function(e){return new(e||kt)},providers:[],imports:[[]]}),kt),zt=n("re6+"),Gt=n("gz+R"),Qt=n("dwd6"),Jt=((Ot=function e(){_classCallCheck(this,e)}).\u0275mod=u.Nb({type:Ot}),Ot.\u0275inj=u.Mb({factory:function(e){return new(e||Ot)},providers:[],imports:[[r.c,i.k,i.s,s.b,_t.a,Pt,Lt,xt.a,Mt.a,Bt.a,Nt.a,$t.a,At,jt,Et,Gt.a,zt.a,Qt.a]]}),Ot)}}]);