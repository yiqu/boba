function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],r=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!t||i.length!==t);r=!0);}catch(c){n=!0,a=c}finally{try{r||null==o.return||o.return()}finally{if(n)throw a}}return i}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{oyDf:function(e,t,i){"use strict";i.r(t),i.d(t,"ManagementModule",(function(){return pe}));var r,n=i("ofXK"),a=i("3Pt+"),s=i("UmVK"),o=i("37S3"),c=i("tyNb"),l=i("fXoL"),u=((r=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:r}),r.\u0275inj=l.Nb({factory:function(e){return new(e||r)},providers:[],imports:[[n.c,a.j,a.r,s.a,o.a,c.f]]}),r),b=i("Cicx"),d=i("wZkO"),f=i("NFeN"),m=i("MutI"),p=function(e){return[e]};function h(e,t){if(1&e){var i=l.Xb();l.Wb(0,"a",7,8),l.ec("click",(function(){l.wc(i);var e=t.$implicit;return l.ic().activeLink=e})),l.Wb(2,"mat-icon",9),l.Fc(3),l.Vb(),l.Fc(4),l.Vb()}if(2&e){var r=t.$implicit,n=l.tc(1);l.oc("active",n.isActive)("routerLink",l.qc(4,p,r.url)),l.Db(3),l.Gc(r.iconName),l.Db(1),l.Hc(" ",r.display," ")}}var k,g,v,y=((k=function(){function e(){_classCallCheck(this,e),this.managementLinks=[],this.tabLinks=[],this.managementLinks.push(),this.tabLinks.push(new b.e("inventory","Inventory","inventory",!1,"assignment"),new b.e("users","Users","users",!1,"people"),new b.e("archives","Order Archives","archives",!1,"poll"))}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||k)},k.\u0275cmp=l.Kb({type:k,selectors:[["app-management"]],decls:10,vars:2,consts:[[1,"container","mb-3"],[1,"row","mb-3","comf","text-center","mt-3"],[1,"col-12"],[1,"row","mb-2","mt-2"],[1,"col-sm-12"],["mat-tab-nav-bar","",3,"backgroundColor"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click"],["rla","routerLinkActive"],["mat-list-icon","",1,"mr-1"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Wb(3,"h2"),l.Fc(4,"Management Corner"),l.Vb(),l.Vb(),l.Vb(),l.Wb(5,"div",3),l.Wb(6,"div",4),l.Wb(7,"nav",5),l.Dc(8,h,5,6,"a",6),l.Vb(),l.Vb(),l.Vb(),l.Rb(9,"router-outlet"),l.Vb()),2&e&&(l.Db(7),l.oc("backgroundColor",void 0),l.Db(1),l.oc("ngForOf",t.tabLinks))},directives:[d.b,n.k,c.g,c.e,d.a,c.d,f.a,m.a],styles:["a.mat-tab-link.mat-focus-indicator.mat-tab-label-active[_ngcontent-%COMP%]{font-weight:800;color:#000;opacity:.9}"]}),k),D=i("XNiG"),F=i("1G5W"),L=i("OO0l"),C=i("itXk"),_=i("lJxs"),T=i("sSZD"),I=((g=function(){function e(t){_classCallCheck(this,e),this.firedb=t,this.BASE_SELECTIONS_URL="selections/",this.MILK_TEAS_URL="teas",this.FRUIT_TEAS_URL="creative-mix",this.YOGURT_TEAS_URL="yogurt",this.TOPPINGS_URL="toppings",this.milkTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.MILK_TEAS_URL),this.creativeMixTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.FRUIT_TEAS_URL),this.yogurtTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.YOGURT_TEAS_URL),this.toppingsListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.TOPPINGS_URL),this.milkTeasList$=this.getCartItemObs(this.milkTeasListFire),this.creativeMixTeasList$=this.getCartItemObs(this.creativeMixTeasListFire),this.yogurtTeasList$=this.getCartItemObs(this.yogurtTeasListFire),this.toppingsList$=this.getCartItemObs(this.toppingsListFire),this.allDrinksList$=Object(C.a)(this.milkTeasList$,this.creativeMixTeasList$,this.yogurtTeasList$,this.toppingsList$)}return _createClass(e,[{key:"getFDB",value:function(){return this.firedb.database}},{key:"getCartItemObs",value:function(e){var t=this;return e.snapshotChanges().pipe(Object(_.a)((function(e){return t.addfireKey(e)})))}},{key:"getDrinkDetailObs",value:function(e,t){var i=this;return this.firedb.object(this.BASE_SELECTIONS_URL+e+"/"+t).snapshotChanges().pipe(Object(_.a)((function(e){return i.addFireKeySingle(e)})))}},{key:"getDrinkDetail",value:function(e,t){return this.firedb.object(this.BASE_SELECTIONS_URL+e+"/"+t)}},{key:"addFireKeySingle",value:function(e){return Object.assign({fireKey:e.payload.key},e.payload.val())}},{key:"addfireKey",value:function(e){return e.map((function(e){return Object.assign({fireKey:e.payload.key},e.payload.val())}))}}]),e}()).\u0275fac=function(e){return new(e||g)(l.ac(T.a))},g.\u0275prov=l.Mb({token:g,factory:g.\u0275fac,providedIn:"root"}),g),S=i("b8ES"),O=i("AB5n"),V=((v=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t="";return t+=e.display+" - $"+(e.price?e.price:"Not set")}}]),e}()).\u0275fac=function(e){return new(e||v)},v.\u0275pipe=l.Pb({name:"inventoryDrinkDisplay",type:v,pure:!0}),v);function W(e,t){if(1&e){var i=l.Xb();l.Wb(0,"li",12),l.ec("click",(function(){l.wc(i);var e=t.$implicit;return l.ic(2).onDrinkItemClick(e)})),l.Fc(1),l.jc(2,"inventoryDrinkDisplay"),l.Vb()}if(2&e){var r=t.$implicit;l.Db(1),l.Hc(" ",l.kc(2,1,r)," ")}}function w(e,t){if(1&e&&(l.Wb(0,"div",8),l.Wb(1,"ul",9),l.Wb(2,"li",10),l.Fc(3),l.jc(4,"countNumberDisplay"),l.Vb(),l.Dc(5,W,3,3,"li",11),l.Vb(),l.Vb()),2&e){var i=t.$implicit;l.Db(3),l.Ic("",i.header.display," ",l.kc(4,3,i.links.length),""),l.Db(2),l.oc("ngForOf",i.links)}}function E(e,t){1&e&&l.Fc(0," Loading drink inventory...\n")}var A,U,N,R=((N=function(){function e(t,i,r,n){_classCallCheck(this,e),this.mis=t,this.fds=i,this.router=r,this.route=n,this.compDest$=new D.a,this.allDrinksList=[],this.inventorySubText="This is a list of all the selections of our editable items on the menu. Click on a item below to edit."}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.mis.allDrinksList$.pipe(Object(F.a)(this.compDest$)).subscribe((function(t){var i=_slicedToArray(t,4),r=i[0],n=i[1],a=i[2],s=i[3];e.allDrinksList=[];var o=new L.i(r,n,a,s);e.createAllDrinksList(o)}),(function(e){}),(function(){}))}},{key:"createAllDrinksList",value:function(e){for(var t in e)this.allDrinksList.push(new b.a(new b.b(t),e[t]))}},{key:"onDrinkItemClick",value:function(e){this.router.navigate([e.seriesName?e.seriesName:"toppings",e.fireKey],{relativeTo:this.route})}},{key:"ngOnDestroy",value:function(){this.compDest$.next()}}]),e}()).\u0275fac=function(e){return new(e||N)(l.Qb(I),l.Qb(S.a),l.Qb(c.c),l.Qb(c.a))},N.\u0275cmp=l.Kb({type:N,selectors:[["app-management-inventory"]],decls:11,vars:2,consts:[[1,"row","mt-3","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","comf","center-align"],[1,"row","mb-3"],[1,"col-sm-12","roboto"],[1,"row"],["class","col-sm-4 mb-3",4,"ngFor","ngForOf"],["loading",""],[1,"col-sm-4","mb-3"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-primary roboto",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-primary","roboto",3,"click"]],template:function(e,t){1&e&&(l.Wb(0,"div",0),l.Wb(1,"div",1),l.Wb(2,"div",2),l.Fc(3," Inventory "),l.Vb(),l.Vb(),l.Vb(),l.Wb(4,"div",3),l.Wb(5,"div",4),l.Fc(6),l.Vb(),l.Vb(),l.Wb(7,"div",5),l.Dc(8,w,6,5,"div",6),l.Vb(),l.Dc(9,E,1,0,"ng-template",null,7,l.Ec)),2&e&&(l.Db(6),l.Hc(" ",t.inventorySubText," "),l.Db(2),l.oc("ngForOf",t.allDrinksList))},directives:[n.k],pipes:[O.a,V],styles:[".drink-item[_ngcontent-%COMP%]{cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]{color:#004085;background-color:#cce6ff;cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]:hover{color:#004085;background-color:#b8daff}"]}),N),M=((U=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||U)},U.\u0275cmp=l.Kb({type:U,selectors:[["app-management-users"]],decls:1,vars:0,template:function(e,t){1&e&&l.Fc(0,"Users\n")},styles:[""]}),U),j=((A=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||A)},A.\u0275cmp=l.Kb({type:A,selectors:[["app-managment-archives"]],decls:1,vars:0,template:function(e,t){1&e&&l.Fc(0,"Archives\n")},styles:[""]}),A),x=i("E8I7"),P=i("eIep"),$=i("Pk+l"),K=i("LvDl"),q=i("MPcn"),B=i("DHDI"),G=i("kmnG"),Q=i("qFsG"),H=i("bTqV"),X=i("d3UM"),J=i("FKr1"),Y=i("B6IJ");function Z(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),l.Vb())}function z(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Field is "),l.Wb(2,"strong"),l.Fc(3,"required"),l.Vb(),l.Vb())}function ee(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),l.Vb())}function te(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Field is "),l.Wb(2,"strong"),l.Fc(3,"required"),l.Vb(),l.Vb())}function ie(e,t){if(1&e&&(l.Wb(0,"mat-option",19),l.Fc(1),l.Vb()),2&e){var i=t.$implicit;l.oc("value",i),l.Db(1),l.Hc(" ",i.seriesDisplay," ")}}function re(e,t){if(1&e&&(l.Wb(0,"tr"),l.Wb(1,"td"),l.Wb(2,"mat-form-field",9),l.Wb(3,"mat-label"),l.Fc(4,"Drink Series"),l.Vb(),l.Wb(5,"mat-select",17),l.Dc(6,ie,2,2,"mat-option",18),l.Vb(),l.Vb(),l.Vb(),l.Vb()),2&e){var i=l.ic(3);l.Db(6),l.oc("ngForOf",i.seriesList)}}function ne(e,t){1&e&&(l.Wb(0,"mat-error"),l.Fc(1," Please enter only integers and decimals. "),l.Vb())}function ae(e,t){if(1&e){var i=l.Xb();l.Ub(0),l.Wb(1,"div",3),l.Wb(2,"div",4),l.Wb(3,"div",5),l.Fc(4," Item Detail "),l.Vb(),l.Wb(5,"div"),l.Fc(6),l.jc(7,"dateDisplay"),l.Vb(),l.Vb(),l.Vb(),l.Wb(8,"div",6),l.Wb(9,"div",7),l.Wb(10,"form",8),l.Wb(11,"table",9),l.Wb(12,"tr"),l.Wb(13,"td"),l.Wb(14,"mat-form-field",9),l.Wb(15,"mat-label"),l.Fc(16,"Drink Display Name"),l.Vb(),l.Rb(17,"input",10),l.Dc(18,Z,2,0,"mat-error",11),l.Dc(19,z,4,0,"mat-error",11),l.Vb(),l.Vb(),l.Vb(),l.Wb(20,"tr"),l.Wb(21,"td"),l.Wb(22,"mat-form-field",9),l.Wb(23,"mat-label"),l.Fc(24,"Drink ID"),l.Vb(),l.Rb(25,"input",12),l.Dc(26,ee,2,0,"mat-error",11),l.Dc(27,te,4,0,"mat-error",11),l.Vb(),l.Vb(),l.Vb(),l.Dc(28,re,7,1,"tr",11),l.Wb(29,"tr"),l.Wb(30,"td"),l.Wb(31,"mat-form-field",9),l.Wb(32,"mat-label"),l.Fc(33,"Drink Cost"),l.Vb(),l.Rb(34,"input",13),l.Dc(35,ne,2,0,"mat-error",11),l.Wb(36,"span",14),l.Fc(37,"$\xa0"),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Vb(),l.Wb(38,"div",15),l.Wb(39,"div",7),l.Wb(40,"button",16),l.ec("click",(function(){return l.wc(i),l.ic(2).onUpdate()})),l.Fc(41,"Update"),l.Vb(),l.Vb(),l.Vb(),l.Tb()}if(2&e){var r=l.ic(2);l.Db(6),l.Hc("Last updated: ",l.lc(7,9,r.lastUpdated,"FROMNOW"),""),l.Db(4),l.oc("formGroup",r.detailFg),l.Db(8),l.oc("ngIf",r.detailFg.get("display").hasError("lettersOnly")&&!r.detailFg.get("display").hasError("required")),l.Db(1),l.oc("ngIf",r.detailFg.get("display").hasError("required")),l.Db(7),l.oc("ngIf",r.detailFg.get("name").hasError("lettersOnly")&&!r.detailFg.get("name").hasError("required")),l.Db(1),l.oc("ngIf",r.detailFg.get("name").hasError("required")),l.Db(1),l.oc("ngIf",r.detailFg.controls.drinkSeries),l.Db(7),l.oc("ngIf",r.detailFg.get("drinkCost").hasError("numbersOnly")),l.Db(5),l.oc("disabled",r.detailFg.invalid)}}function se(e,t){if(1&e&&(l.Ub(0),l.Dc(1,ae,42,12,"ng-container",0),l.Tb()),2&e){var i=l.ic(),r=l.tc(2);l.Db(1),l.oc("ngIf",null!==i.currentDrink)("ngIfElse",r)}}function oe(e,t){1&e&&l.Fc(0," Drink item is invalid.\n")}function ce(e,t){1&e&&l.Fc(0," Loading drink item...\n")}var le,ue,be,de=[{path:"",component:y,children:[{path:"",redirectTo:"inventory",pathMatch:"full"},{path:"inventory",component:R},{path:"inventory/:drinkSeries/:id",component:(le=function(){function e(t,i,r,n,a){var s=this;_classCallCheck(this,e),this.router=t,this.route=i,this.is=r,this.fb=n,this.sbs=a,this.seriesList=[new x.d("Milk Tea",x.c.MILK_TEA),new x.d("Creative Mix",x.c.FRUIT_TEA),new x.d("Yogurt",x.c.YOGURT)],this.route.paramMap.pipe(Object(P.a)((function(e){var t=s.getFirebaseDrinkSeries(e.get("drinkSeries")),i=e.get("id");return s.is.getDrinkDetailObs(t,i)}))).subscribe((function(e){s.isDrinkDetailValid(e)?(s.currentDrink=e,s.createDetailFg(),s.lastUpdated=s.getLastUpdated()):s.currentDrink=null}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"isDrinkDetailValid",value:function(e){return e.display&&e.name}},{key:"createDetailFg",value:function(){this.detailFg=this.fb.group({display:$.a(this.currentDrink.display,!1,[a.s.required,q.a]),name:$.a(this.currentDrink.name,!1,[a.s.required,q.a]),drinkCost:$.b(this.getDrinkCost(),!1,[q.b])}),this.currentDrink.seriesName&&this.detailFg.addControl("drinkSeries",$.a(this.getFetchedDrinkSeriesValue(),!1,[a.s.required])),this.currentDrink.itemType&&this.detailFg.addControl("itemType",$.a(this.currentDrink.itemType,!1,[a.s.required]))}},{key:"getFetchedDrinkSeriesValue",value:function(){var e=K.findIndex(this.seriesList,["seriesName",this.currentDrink.seriesName]);return this.seriesList[e]}},{key:"getDrinkCost",value:function(){var e="0.00";return this.currentDrink.price&&(e=this.currentDrink.price),e}},{key:"getLastUpdated",value:function(){var e=0;return this.currentDrink.lastUpdated&&(e=this.currentDrink.lastUpdated),e}},{key:"onUpdate",value:function(){var e=this,t=this.createDrinkItemToUpdate();if(t){var i,r=this.isSeriesSame(t);t.itemType?i=t.itemType:t.seriesName&&(i=this.getFirebaseDrinkSeries(t.seriesName)),this.is.getDrinkDetail(i,this.currentDrink.fireKey).set(t).then((function(i){e.sbs.openSnackBar(t.display+" saved!",1e3),r||e.is.getDrinkDetail(e.getFirebaseDrinkSeries(e.currentDrink.seriesName),e.currentDrink.fireKey).remove()}),(function(i){e.sbs.openSnackBar(t.display+" could not be saved, error occured: "+i)})).finally((function(){e.router.navigate(["../../"],{relativeTo:e.route})}))}}},{key:"isSeriesSame",value:function(e){return!this.currentDrink||!this.currentDrink.seriesName||this.currentDrink.seriesName===e.seriesName}},{key:"createDrinkItemToUpdate",value:function(){var e=this.detailFg.value;if(this.detailFg.valid){var t=new x.b(e.display,e.name,e.drinkSeries?e.drinkSeries.seriesDisplay:null,e.drinkSeries?e.drinkSeries.seriesName:null,null,e.drinkCost,(new Date).getTime());return e.itemType&&(t.itemType=e.itemType),t}}},{key:"getFirebaseDrinkSeries",value:function(e){var t;switch(e){case"milkTea":t="teas";break;case"creativeMix":t="creative-mix";break;case"yogurt":t="yogurt";break;case"toppings":t="toppings"}return t}}]),e}(),le.\u0275fac=function(e){return new(e||le)(l.Qb(c.c),l.Qb(c.a),l.Qb(I),l.Qb(a.d),l.Qb(B.a))},le.\u0275cmp=l.Kb({type:le,selectors:[["app-inventory-drink-detail"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["drinkInvalid",""],["loadingDrink",""],[1,"row","mb-3"],[1,"col-sm-12","text-center"],[1,"order-label","mb-3","comf","center-align"],[1,"row"],[1,"col-12"],[1,"detail-form",3,"formGroup"],[1,"full-w"],["matInput","","formControlName","display"],[4,"ngIf"],["matInput","","formControlName","name"],["matInput","","formControlName","drinkCost",1,"field-right-align"],["matPrefix",""],[1,"row","mt-2"],["mat-flat-button","","color","primary",3,"disabled","click"],["formControlName","drinkSeries"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){if(1&e&&(l.Dc(0,se,2,2,"ng-container",0),l.Dc(1,oe,1,0,"ng-template",null,1,l.Ec),l.Dc(3,ce,1,0,"ng-template",null,2,l.Ec)),2&e){var i=l.tc(4);l.oc("ngIf",void 0!==t.currentDrink)("ngIfElse",i)}},directives:[n.l,a.t,a.o,a.i,G.c,G.g,Q.b,a.b,a.n,a.g,G.h,H.a,G.b,X.a,n.k,J.n],pipes:[Y.a],styles:[".detail-form[_ngcontent-%COMP%]{min-width:150px;max-width:400px;width:100%}.field-right-align[_ngcontent-%COMP%]{text-align:right}"]}),le)},{path:"users",component:M},{path:"archives",component:j}]}],fe=((ue=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:ue}),ue.\u0275inj=l.Nb({factory:function(e){return new(e||ue)},imports:[[c.f.forChild(de)],c.f]}),ue),me=i("re6+"),pe=((be=function e(){_classCallCheck(this,e)}).\u0275mod=l.Ob({type:be}),be.\u0275inj=l.Nb({factory:function(e){return new(e||be)},providers:[],imports:[[n.c,a.r,a.j,c.f,s.a,o.a,me.a,u,fe]]}),be)}}]);