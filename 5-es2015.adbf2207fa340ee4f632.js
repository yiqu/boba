(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{roHT:function(e,t,r){"use strict";r.r(t),r.d(t,"OrderNewModule",(function(){return dt}));var n=r("ofXK"),s=r("3Pt+"),i=r("tk/3"),o=r("tyNb"),a=r("AytR"),c=r("fXoL");class d{constructor(e,t){this.component=e,this.data=t}}let l=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["ng-component"]],inputs:{data:"data"},decls:7,vars:3,consts:[[1,"ad-banner-bg-img","summer-banner"],[1,"icon-img-parent"],["alt","drink icon",1,"img-h-100",3,"src"],[1,"new-drink-banner-text","comf"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Rb(2,"img",2),c.Vb(),c.Wb(3,"div",3),c.Ec(4),c.Vb(),c.Wb(5,"div",1),c.Rb(6,"img",2),c.Vb(),c.Vb()),2&e&&(c.Db(2),c.oc("src",t.data.imgUrlSrc,c.xc),c.Db(2),c.Gc(" ",t.data.description," "),c.Db(2),c.oc("src",t.data.imgUrlSrc,c.xc))},styles:[".ad-banner-bg-img[_ngcontent-%COMP%]{background-image:url(/assets/images/main/order/banner-bg.png);background-color:#ccc;height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;position:relative}.icon-img-parent[_ngcontent-%COMP%]{display:flex;height:100%}.summer-banner[_ngcontent-%COMP%]{justify-content:center;display:flex;padding:5px;border-radius:100px}.new-drink-banner-text[_ngcontent-%COMP%], .summer-banner-text[_ngcontent-%COMP%]{align-self:flex-end;font-size:14px;font-size:12px;font-weight:800}"]}),e})(),b=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["ng-component"]],inputs:{data:"data"},decls:7,vars:3,consts:[[1,"ad-banner-bg-img","summer-banner"],[1,"icon-img-parent"],["alt","drink icon",1,"img-h-100",3,"src"],[1,"summer-banner-text","comf"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Rb(2,"img",2),c.Vb(),c.Wb(3,"div",3),c.Ec(4),c.Vb(),c.Wb(5,"div",1),c.Rb(6,"img",2),c.Vb(),c.Vb()),2&e&&(c.Db(2),c.oc("src",t.data.imgUrlSrc,c.xc),c.Db(2),c.Gc(" ",t.data.description," "),c.Db(2),c.oc("src",t.data.imgUrlSrc,c.xc))},styles:[".ad-banner-bg-img[_ngcontent-%COMP%]{background-image:url(/assets/images/main/order/banner-bg.png);background-color:#ccc;height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;position:relative}.icon-img-parent[_ngcontent-%COMP%]{display:flex;height:100%}.summer-banner[_ngcontent-%COMP%]{justify-content:center;display:flex;padding:5px;border-radius:100px}.new-drink-banner-text[_ngcontent-%COMP%], .summer-banner-text[_ngcontent-%COMP%]{align-self:flex-end;font-size:14px;font-size:12px;font-weight:800}"]}),e})(),u=(()=>{class e{constructor(){}getAds(){let e=[];return e.push(new d(l,new p("assets/images/main/icons/yogurt-tea-icon.png","New ! Yogurt series has arrived !"))),e.push(new d(b,new p("assets/images/main/icons/fruit-tea-icon.png","Beat the summer heat with a tea !"))),e}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();class p{constructor(e,t){this.imgUrlSrc=e,this.description=t}}let h=(()=>{class e{constructor(e){this.viewContainerRef=e}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(c.Q))},e.\u0275dir=c.Lb({type:e,selectors:[["","ad-banner-host",""]]}),e})();var g=r("XNiG"),m=r("l5mm"),f=r("1G5W");function v(e,t){}let k=(()=>{class e{constructor(e){this.componentFactoryResolver=e,this.ads=[],this.currentAdIndex=-1,this.compDest$=new g.a}ngOnInit(){this.loadComponent(),this.getAds()}loadComponent(){if(this.currentAdIndex=(this.currentAdIndex+1)%this.ads.length,this.currentAdIndex>-1){const e=this.ads[this.currentAdIndex],t=this.componentFactoryResolver.resolveComponentFactory(e.component),r=this.adHost.viewContainerRef;r.clear(),r.createComponent(t).instance.data=e.data}}getAds(){Object(m.a)(a.a.adBannerInterval).pipe(Object(f.a)(this.compDest$)).subscribe(e=>{this.loadComponent()})}ngOnDestroy(){this.compDest$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(c.j))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-ad-banner"]],viewQuery:function(e,t){var r;1&e&&c.Ac(h,!0),2&e&&c.sc(r=c.fc())&&(t.adHost=r.first)},inputs:{ads:"ads"},decls:1,vars:0,consts:[["ad-banner-host",""]],template:function(e,t){1&e&&c.Cc(0,v,0,0,"ng-template",0)},directives:[h],styles:[".ad-banner-bg-img[_ngcontent-%COMP%]{background-image:url(/assets/images/main/order/banner-bg.png);background-color:#ccc;height:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;position:relative}.icon-img-parent[_ngcontent-%COMP%]{display:flex;height:100%}.summer-banner[_ngcontent-%COMP%]{justify-content:center;display:flex;padding:5px;border-radius:100px}.new-drink-banner-text[_ngcontent-%COMP%], .summer-banner-text[_ngcontent-%COMP%]{align-self:flex-end;font-size:14px;font-size:12px;font-weight:800}"]}),e})();const O=function(){return["all"]};let y=(()=>{class e{constructor(e,t,r){this.abs=e,this.router=t,this.route=r}getCurrentTime(){return(new Date).getTime()}goToNew(){this.router.navigate(["new"],{queryParams:{date:this.getCurrentTime()},relativeTo:this.route})}ngOnInit(){this.setupAds()}ngOnDestroy(){}setupAds(){a.a.adsOn&&(this.ads=this.abs.getAds())}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(u),c.Qb(o.b),c.Qb(o.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-order-new"]],decls:12,vars:3,consts:[[1,"container"],[1,"deals-banner","mt-2"],[3,"ads"],[1,"row","mb-2"],[1,"col-sm-12","d-flex","order-nav-group"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"btn","btn-outline-info",3,"routerLink"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Rb(2,"app-shared-ad-banner",2),c.Vb(),c.Rb(3,"hr"),c.Wb(4,"div",3),c.Wb(5,"div",4),c.Wb(6,"button",5),c.ec("click",(function(){return t.goToNew()})),c.Ec(7,"Start new order"),c.Vb(),c.Wb(8,"a",6),c.Ec(9,"My cart"),c.Vb(),c.Vb(),c.Vb(),c.Rb(10,"hr"),c.Rb(11,"router-outlet"),c.Vb()),2&e&&(c.Db(2),c.oc("ads",t.ads),c.Db(6),c.oc("routerLink",c.pc(2,O)))},directives:[k,o.c,o.e],styles:[".deals-banner[_ngcontent-%COMP%]{height:30px}.order-nav-group[_ngcontent-%COMP%]{justify-content:space-between}"]}),e})(),C=(()=>{class e{constructor(e,t){this.router=e,this.route=t,this.route.paramMap.subscribe(e=>{console.log("single order:",e.keys),this.orderId=e.get("id")})}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(o.b),c.Qb(o.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-order-new-order"]],decls:1,vars:1,template:function(e,t){1&e&&c.Ec(0),2&e&&c.Gc("Single order display ",t.orderId,"\n")},styles:[""]}),e})();var V=r("OO0l"),D=r("KJJU"),W=r("b8ES");let w=(()=>{class e{constructor(){this.refreshComponent$=new g.a}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function S(e,t,r=null,n=null){return new s.e({value:e||null,disabled:t},r,n)}var F=r("B/XX"),x=r("xHqg"),E=r("eIep"),I=r("0IaG");class M{isErrorState(e,t){return!!(e&&e.invalid&&(e.dirty||e.touched||t&&t.submitted))}}class N{isErrorState(e,t){return!(!e||!e.invalid)}}var P=r("kmnG"),T=r("qFsG"),_=r("NFeN"),L=r("bTqV");function j(e,t){if(1&e&&(c.Wb(0,"mat-error"),c.Ec(1),c.Vb()),2&e){const e=c.ic();c.Db(1),c.Gc("Invalid ",e.data.label,".")}}let Q=(()=>{class e{constructor(e,t,r){this.dialogRef=e,this.data=t,this.fb=r,this.matcher=new M,this.inputFc=new s.e,this.inputModel=this.data.initValue,this.inputFc=S(t.initValue,!1,[s.s.required])}ngOnInit(){}onCancel(){this.dialogRef.close()}onSubmit(){this.inputFc.valid&&this.dialogRef.close(this.inputFc.value)}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(I.f),c.Qb(I.a),c.Qb(s.d))},e.\u0275cmp=c.Kb({type:e,selectors:[["dialog-single-input"]],decls:19,vars:9,consts:[[1,"comf"],["mat-dialog-title",""],["mat-dialog-content",""],[1,"input-ff","mb-3"],["appearance","outline"],["matInput","",3,"placeholder","formControl","errorStateMatcher"],["matSuffix",""],[4,"ngIf"],["mat-dialog-actions",""],["mat-stroked-button","","color","primary",1,"mr-2",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"h1",1),c.Ec(2),c.Vb(),c.Wb(3,"div",2),c.Wb(4,"div",3),c.Wb(5,"mat-form-field",4),c.Wb(6,"mat-label"),c.Ec(7),c.Vb(),c.Rb(8,"input",5),c.Wb(9,"mat-icon",6),c.Ec(10),c.Vb(),c.Wb(11,"mat-hint"),c.Ec(12),c.Vb(),c.Cc(13,j,2,1,"mat-error",7),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"div",8),c.Wb(15,"button",9),c.ec("click",(function(){return t.onCancel()})),c.Ec(16,"Cancel"),c.Vb(),c.Wb(17,"button",10),c.ec("click",(function(){return t.onSubmit()})),c.Ec(18,"Save"),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(2),c.Fc(t.data.title),c.Db(5),c.Fc(t.data.label),c.Db(1),c.oc("placeholder",t.data.label)("formControl",t.inputFc)("errorStateMatcher",t.matcher),c.Db(2),c.Fc(t.data.inputIcon),c.Db(2),c.Fc(t.data.hint),c.Db(1),c.oc("ngIf",t.inputFc.hasError("required")),c.Db(4),c.oc("disabled",t.inputFc.invalid))},directives:[I.g,I.d,P.c,P.g,T.b,s.b,s.n,s.f,_.a,P.h,P.f,n.l,I.c,L.a,P.b],styles:[""]}),e})();class R{constructor(e,t,r,n,s){this.title=e,this.label=t,this.initValue=r,this.inputIcon=n,this.hint=s}}var B=r("2Vo4"),A=r("lJxs"),U=r("sSZD");let $=(()=>{class e{constructor(e,t){this.rfd=e,this.firedb=t,this.allUsersr$=new B.a([]),this.BASE_USERS_URL="users",this.usersListFDB=this.firedb.list(this.BASE_USERS_URL),this.allUsersr$=this.usersListFDB.snapshotChanges().pipe(Object(A.a)(e=>this.addfireKey(e)))}getSingleUser(e){}addfireKey(e){return e.map(e=>Object.assign({fireKey:e.payload.key},e.payload.val()))}}return e.\u0275fac=function(t){return new(t||e)(c.ac(W.a),c.ac(U.a))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=r("dNgK");let z=(()=>{class e{constructor(e,t){this.sbr=e,this.data=t,this.displayMessage=t}onClose(){this.sbr.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(G.d),c.Qb(G.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["snack-bar-component"]],decls:4,vars:1,consts:[["mat-stroked-button","",3,"click"]],template:function(e,t){1&e&&(c.Wb(0,"h6"),c.Ec(1),c.Vb(),c.Wb(2,"button",0),c.ec("click",(function(){return t.onClose()})),c.Ec(3,"Close"),c.Vb()),2&e&&(c.Db(1),c.Fc(t.displayMessage))},directives:[L.a],styles:[""]}),e})(),K=(()=>{class e{constructor(e){this._snackBar=e}openSnackBar(e){this.sbr=this._snackBar.openFromComponent(z,{duration:5e3,data:e})}closeSnackBar(){this.sbr.dismiss()}}return e.\u0275fac=function(t){return new(t||e)(c.ac(G.b))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var q=r("Xgv5");let X=(()=>{class e{constructor(e,t,r){this.dialogRef=e,this.data=t,this.fb=r,this.userFg=new s.h({})}get userNameFc(){return this.userFg.get("userName")}get userIdFc(){return this.userFg.get("userId")}ngOnInit(){this.userFg=this.fb.group({userName:S(null,!1,[s.s.required]),userId:S(null,!1,[s.s.required])})}onCancel(){this.dialogRef.close()}onSubmit(){const e=new D.a(this.userFg.value.userId,this.userFg.value.userName);this.dialogRef.close(e)}ngOnDestroy(){console.log("dialog destoryed")}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(I.f),c.Qb(I.a),c.Qb(s.d))},e.\u0275cmp=c.Kb({type:e,selectors:[["dialog-add-user"]],decls:28,vars:3,consts:[[1,"comf"],["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],[1,"input-ff","mb-3"],["appearance","outline"],["matInput","","placeholder","John Doe",3,"formControl"],["matSuffix",""],["matInput","","placeholder","johndoe","formControlName","userId"],["mat-dialog-actions",""],["mat-stroked-button","","color","primary",1,"mr-2",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"h1",1),c.Ec(2,"Add new user"),c.Vb(),c.Wb(3,"div",2),c.Wb(4,"form",3),c.Wb(5,"div",4),c.Wb(6,"mat-form-field",5),c.Wb(7,"mat-label"),c.Ec(8,"User name"),c.Vb(),c.Rb(9,"input",6),c.Wb(10,"mat-icon",7),c.Ec(11,"face"),c.Vb(),c.Wb(12,"mat-hint"),c.Ec(13,"Enter a user name"),c.Vb(),c.Vb(),c.Vb(),c.Wb(14,"div",4),c.Wb(15,"mat-form-field",5),c.Wb(16,"mat-label"),c.Ec(17,"User ID"),c.Vb(),c.Rb(18,"input",8),c.Wb(19,"mat-icon",7),c.Ec(20,"account_box"),c.Vb(),c.Wb(21,"mat-hint"),c.Ec(22,"Enter a user ID"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(23,"div",9),c.Wb(24,"button",10),c.ec("click",(function(){return t.onCancel()})),c.Ec(25,"Cancel"),c.Vb(),c.Wb(26,"button",11),c.ec("click",(function(){return t.onSubmit()})),c.Ec(27,"Submit"),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(4),c.oc("formGroup",t.userFg),c.Db(5),c.oc("formControl",t.userNameFc),c.Db(17),c.oc("disabled",t.userFg.invalid))},directives:[I.g,I.d,s.t,s.o,s.i,P.c,P.g,T.b,s.b,s.n,s.f,_.a,P.h,P.f,s.g,I.c,L.a],styles:[""]}),e})(),J=(()=>{class e{constructor(e){this.dialog=e,this.compDest$=new g.a}getUserAddDialog(e){return this.dialog.open(X,{minWidth:"250px",data:e,disableClose:!1,autoFocus:!0})}getFavDrinkAddDialog(e){return this.dialogRef=this.dialog.open(Q,{minWidth:"250px",data:e,disableClose:!1})}}return e.\u0275fac=function(t){return new(t||e)(c.ac(I.b))},e.\u0275prov=c.Mb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var H=r("E8I7"),Y=r("LvDl"),Z=r("QibW");function ee(e,t){if(1&e&&(c.Wb(0,"mat-radio-button",3),c.Ec(1),c.Vb()),2&e){const e=t.$implicit;c.oc("value",e),c.Db(1),c.Gc(" ",e.display," ")}}let te=(()=>{class e{constructor(e){this.ofs=e,this.drinkSeries=[],this.compDest$=new g.a}ngOnInit(){}ngOnChanges(e){this.drinkSeries=[],this.drinkSeries.push(new H.a(H.b.MILK_TEA,"Milk Tea"),new H.a(H.b.FRUIT_TEA,"Creative Mix"),new H.a(H.b.YOGURT,"Yogurt")),this.setDefaultValue()}setDefaultValue(){const e=Y.findIndex(this.drinkSeries,["name",this.seriesCtrl.value.name]);e>-1&&this.seriesCtrl.setValue(this.drinkSeries[e])}onSeriesChange(){this.ofs.orderFg.get("drinkName").reset()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form-series-desc"]],inputs:{seriesCtrl:"seriesCtrl"},features:[c.Bb],decls:7,vars:2,consts:[[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl","ngModelChange"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"p"),c.Ec(2,"Select a drink series to get started."),c.Vb(),c.Wb(3,"p"),c.Ec(4,"We currently have three tea series to choose from:"),c.Vb(),c.Wb(5,"mat-radio-group",1),c.ec("ngModelChange",(function(){return t.onSeriesChange()})),c.Cc(6,ee,2,2,"mat-radio-button",2),c.Vb(),c.Vb()),2&e&&(c.Db(5),c.oc("formControl",t.seriesCtrl),c.Db(1),c.oc("ngForOf",t.drinkSeries))},directives:[Z.b,s.n,s.f,n.k,Z.a],styles:["",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();function re(e,t){if(1&e&&(c.Wb(0,"mat-radio-button",5),c.Ec(1),c.Vb()),2&e){const e=t.$implicit;c.oc("value",e),c.Db(1),c.Gc(" ",e.display," ")}}function ne(e,t){if(1&e&&(c.Wb(0,"div",2),c.Wb(1,"p"),c.Ec(2,"Select a drink:"),c.Vb(),c.Wb(3,"mat-radio-group",3),c.Cc(4,re,2,2,"mat-radio-button",4),c.Vb(),c.Vb()),2&e){const e=c.ic();c.Db(3),c.oc("formControl",e.drinkNameCtrl),c.Db(1),c.oc("ngForOf",e.drinkNames)}}function se(e,t){1&e&&(c.Wb(0,"p",6),c.Ec(1," We are sorry, there are currently no drinks available for the series you have selected. "),c.Vb(),c.Wb(2,"p"),c.Ec(3," Go back and try a different series! "),c.Vb())}let ie=(()=>{class e{constructor(e,t){this.fds=e,this.ofs=t,this.drinkNames=[],this.compDest$=new g.a}ngOnChanges(e){this.setUpDrinksBySeries()}ngOnInit(){}setUpDrinksBySeries(){this.fds.getDrinksBySeriesObs(this.seriesSelection).pipe(Object(f.a)(this.compDest$),Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{this.drinkNames=[...e],this.drinkNames=Y.sortBy(this.drinkNames,["display"]),this.setDefaultValue()})}setDefaultValue(){if(this.drinkNameCtrl.value){const e=Y.findIndex(this.drinkNames,["name",this.drinkNameCtrl.value.name]);e>-1&&this.drinkNameCtrl.setValue(this.drinkNames[e])}}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(W.a),c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form-drink-desc"]],inputs:{drinkNameCtrl:"drinkNameCtrl",seriesSelection:"seriesSelection"},features:[c.Bb],decls:3,vars:2,consts:[["class","comf",4,"ngIf","ngIfElse"],["noDrinks",""],[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"],[1,"mb-3"]],template:function(e,t){if(1&e&&(c.Cc(0,ne,5,2,"div",0),c.Cc(1,se,4,0,"ng-template",null,1,c.Dc)),2&e){const e=c.tc(2);c.oc("ngIf",t.drinkNames.length>0)("ngIfElse",e)}},directives:[n.l,Z.b,s.n,s.f,n.k,Z.a],styles:["p[_ngcontent-%COMP%]{font-family:Comfortaa,cursive!important}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();var oe=r("itXk"),ae=r("5RNC");function ce(e,t){if(1&e&&(c.Wb(0,"mat-radio-button",7),c.Ec(1),c.Vb()),2&e){const e=t.$implicit;c.oc("value",e),c.Db(1),c.Gc(" ",e.display," ")}}let de=(()=>{class e{constructor(e,t){this.fds=e,this.ofs=t,this.drinkSizes=[],this.iceOptions=[],this.sugarOptions=[],this.allOptionsLoaded=!1,this.compDest$=new g.a,this.sugarSliderLimit=new le,this.iceSliderLimit=new le,this.thumbDisplaySugarFn=e=>{var t;return null===(t=this.sugarOptions[e])||void 0===t?void 0:t.name},this.thumbDisplayIceFn=e=>{var t;return null===(t=this.iceOptions[e])||void 0===t?void 0:t.name}}get drinkSizeFc(){return this.settingsFg.get("size")}get drinkIceFc(){return this.settingsFg.get("ice")}get drinkSugarFc(){return this.settingsFg.get("sugar")}ngOnInit(){}ngOnChanges(e){this.setupSettingOptions2()}setupSettingOptions2(){Object(oe.a)(this.fds.getDrinksBySettingOptionObs("size"),this.fds.getDrinksBySettingOptionObs("sugar-level"),this.fds.getDrinksBySettingOptionObs("ice-level"),(e,t,r)=>({size:e,sugar:t,ice:r})).pipe(Object(f.a)(this.compDest$),Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{e&&(this.allOptionsLoaded=!0,this.drinkSizes=e.size,this.iceOptions=e.ice,this.sugarOptions=e.sugar,this.sortOptionsAsc(),this.setSugarSliderLimits(),this.setIceSliderLimits(),this.setSizeDefaultValue(),this.setSugarDefaultValue(),this.setIceDefaultValue())})}setSizeDefaultValue(){const e=Y.findIndex(this.drinkSizes,["name",this.drinkSizeFc.value.name]);e>-1&&this.drinkSizeFc.setValue(this.drinkSizes[e])}setSugarDefaultValue(){const e=Y.findIndex(this.sugarOptions,["name",this.drinkSugarFc.value.name]);this.sugarSliderVal=e,this.currentSugarLevel=this.sugarOptions[e],e>-1&&this.drinkSugarFc.setValue(this.currentSugarLevel)}setIceDefaultValue(){let e=Y.findIndex(this.iceOptions,["name",this.drinkIceFc.value.name]);"none"===this.drinkIceFc.value.name&&(e=0),this.iceSliderVal=e,this.currentIceLevel=this.iceOptions[e],e>-1&&this.drinkIceFc.setValue(this.currentIceLevel)}sortOptionsAsc(){this.sugarOptions.sort((e,t)=>+e.name<+t.name?-1:1),this.iceOptions.sort((e,t)=>+e.name<+t.name?-1:1)}setSugarSliderLimits(){this.sugarSliderLimit.max=this.sugarOptions.length-1}setIceSliderLimits(){this.iceSliderLimit.max=this.iceOptions.length-1}onSugarLevelChange(){this.currentSugarLevel=this.sugarOptions[+this.sugarSliderVal],this.drinkSugarFc.setValue(this.currentSugarLevel)}onIceLevelChange(){this.currentIceLevel=this.iceOptions[+this.iceSliderVal],this.drinkIceFc.setValue(this.currentIceLevel)}ngOnDestroy(){this.compDest$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(W.a),c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form-settings-desc"]],inputs:{settingsFg:"settingsFg"},features:[c.Bb],decls:19,vars:24,consts:[[1,"comf"],["id","drink-size"],["aria-labelledby","drink-size","color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],["id","drink-size",1,"mb-3"],[1,"setting-slider-parent"],["color","primary",1,"setting-slider",3,"disabled","max","min","step","thumbLabel","displayWith","ngModel","vertical","ngModelChange","change"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"label",1),c.Ec(2,"Select drink size:"),c.Vb(),c.Wb(3,"mat-radio-group",2),c.Cc(4,ce,2,2,"mat-radio-button",3),c.Vb(),c.Vb(),c.Rb(5,"hr"),c.Wb(6,"div",0),c.Wb(7,"label",4),c.Ec(8),c.jc(9,"lowercase"),c.Vb(),c.Wb(10,"div",5),c.Wb(11,"mat-slider",6),c.ec("ngModelChange",(function(e){return t.sugarSliderVal=e}))("change",(function(){return t.onSugarLevelChange()})),c.Vb(),c.Vb(),c.Vb(),c.Rb(12,"hr"),c.Wb(13,"div",0),c.Wb(14,"label",4),c.Ec(15),c.jc(16,"lowercase"),c.Vb(),c.Wb(17,"div",5),c.Wb(18,"mat-slider",6),c.ec("ngModelChange",(function(e){return t.iceSliderVal=e}))("change",(function(){return t.onIceLevelChange()})),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(3),c.oc("formControl",t.drinkSizeFc),c.Db(1),c.oc("ngForOf",t.drinkSizes),c.Db(4),c.Gc("Select sugar level (",c.kc(9,20,null==t.currentSugarLevel?null:t.currentSugarLevel.display),") :"),c.Db(3),c.oc("disabled",!1)("max",t.sugarSliderLimit.max)("min",t.sugarSliderLimit.min)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplaySugarFn)("ngModel",t.sugarSliderVal)("vertical",!1),c.Db(4),c.Gc("Select ice level (",c.kc(16,22,null==t.currentIceLevel?null:t.currentIceLevel.display),") :"),c.Db(3),c.oc("disabled",!1)("max",3)("min",0)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplayIceFn)("ngModel",t.iceSliderVal)("vertical",!1))},directives:[Z.b,s.n,s.f,n.k,ae.a,s.q,Z.a],pipes:[n.i],styles:[".setting-slider[_ngcontent-%COMP%]{width:100%}.setting-slider-parent[_ngcontent-%COMP%]{width:50%}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})();class le{constructor(e=0,t=1){this.min=e,this.max=t}}var be=r("MutI"),ue=r("AB5n");function pe(e,t){if(1&e&&(c.Wb(0,"mat-list-option",5),c.Ec(1),c.Vb()),2&e){const e=t.$implicit;c.oc("value",e)("checkboxPosition","before"),c.Db(1),c.Gc(" ",e.display," ")}}let he=(()=>{class e{constructor(e,t,r){this.fds=e,this.fb=t,this.ofs=r,this.drinkToppings=[],this.compDest$=new g.a,this.defaultSelected=[],this.selectedCount=0,this.compareFn=(e,t)=>e.name===t.name}ngOnInit(){}ngOnChanges(e){this.setupToppings(),this.defaultSelected=this.getDefaultSelected(),this.selectedCount=this.toppingFa.length}getDefaultSelected(){return this.toppingFa.value?this.toppingFa.value:[]}ngAfterViewInit(){}onSelectionChange(e){const t=this.toppingList._value;this.selectedCount=e.source.selectedOptions.selected.length;let r=[];t.forEach(e=>{r.push(S(e,!1))});const n=this.fb.array(r);this.ofs.orderFg.setControl("toppings",n)}setupToppings(){this.fds.getDrinkToppingObs().pipe(Object(f.a)(this.compDest$),Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{e&&(this.drinkToppings=Y.sortBy(e,["display"]))})}ngOnDestroy(){this.compDest$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(W.a),c.Qb(s.d),c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form-topping-desc"]],viewQuery:function(e,t){var r;1&e&&c.Lc(be.c,!0),2&e&&c.sc(r=c.fc())&&(t.toppingList=r.first)},inputs:{toppingFa:"toppingFa"},features:[c.Bb],decls:7,vars:6,consts:[[1,"comf"],[1,"top-label"],[1,"row","top-row"],[3,"compareWith","ngModel","selectionChange"],["color","primary",3,"value","checkboxPosition",4,"ngFor","ngForOf"],["color","primary",3,"value","checkboxPosition"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Ec(2),c.jc(3,"countNumberDisplay"),c.Vb(),c.Wb(4,"div",2),c.Wb(5,"mat-selection-list",3),c.ec("selectionChange",(function(e){return t.onSelectionChange(e)})),c.Cc(6,pe,2,3,"mat-list-option",4),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(2),c.Gc("Select toppings ",c.kc(3,4,t.selectedCount)," : "),c.Db(3),c.oc("compareWith",t.compareFn)("ngModel",t.defaultSelected),c.Db(1),c.oc("ngForOf",t.drinkToppings))},directives:[be.c,s.n,s.q,n.k,be.b],pipes:[ue.a],styles:[""]}),e})();var ge=r("d3UM"),me=r("FKr1");function fe(e,t){if(1&e&&(c.Wb(0,"mat-option",7),c.Ec(1),c.Vb()),2&e){const e=t.$implicit;c.oc("value",e),c.Db(1),c.Gc(" ",e.display," ")}}function ve(e,t){1&e&&(c.Wb(0,"mat-error",8),c.Ec(1," Select a name. "),c.Vb())}let ke=(()=>{class e{constructor(e,t,r,n,s){this.us=e,this.ds=t,this.rdf=r,this.sbs=n,this.ofs=s,this.users=[],this.matcher=new N}ngOnInit(){}ngOnChanges(){this.us.allUsersr$.pipe(Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{this.users=[...e]})}onNameAdd(){this.userAddDialogRef=this.ds.getUserAddDialog(),this.userAddDialogRef.afterClosed().pipe(Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{e&&this.us.usersListFDB.push(e).then(e=>this.onPushComplete(e),e=>{})})}onPushComplete(e){this.sbs.openSnackBar("User added!")}}return e.\u0275fac=function(t){return new(t||e)(c.Qb($),c.Qb(J),c.Qb(W.a),c.Qb(K),c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form-confirm-desc"]],inputs:{userFc:"userFc"},features:[c.Bb],decls:13,vars:4,consts:[[1,"comf"],[1,"name-field","mb-3"],[3,"formControl","errorStateMatcher"],[3,"value",4,"ngFor","ngForOf"],["class","err",4,"ngIf"],[1,""],["mat-stroked-button","","color","primary",3,"click"],[3,"value"],[1,"err"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"mat-form-field",1),c.Wb(2,"mat-label"),c.Ec(3,"Select your name"),c.Vb(),c.Wb(4,"mat-select",2),c.Cc(5,fe,2,2,"mat-option",3),c.Vb(),c.Wb(6,"mat-hint"),c.Ec(7,"This will be the name your order is under."),c.Vb(),c.Cc(8,ve,2,0,"mat-error",4),c.Vb(),c.Wb(9,"div",5),c.Ec(10," Or add a new name "),c.Wb(11,"button",6),c.ec("click",(function(){return t.onNameAdd()})),c.Ec(12,"here"),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(4),c.oc("formControl",t.userFc)("errorStateMatcher",t.matcher),c.Db(1),c.oc("ngForOf",t.users),c.Db(3),c.oc("ngIf",t.userFc.hasError("required")))},directives:[P.c,P.g,ge.a,s.n,s.f,n.k,P.f,n.l,L.a,me.n,P.b],styles:[".name-field[_ngcontent-%COMP%]{width:20rem}mat-error.err[_ngcontent-%COMP%]{font-weight:700}"]}),e})();var Oe=r("bSwM");function ye(e,t){1&e&&(c.Wb(0,"div",20),c.Ec(1,"Series"),c.Vb())}function Ce(e,t){1&e&&c.Ec(0,"Drink")}function Ve(e,t){1&e&&c.Ec(0,"Size / Sugar / Ice")}function De(e,t){1&e&&c.Ec(0,"Toppings")}function We(e,t){1&e&&c.Ec(0,"Confirmation")}let we=(()=>{class e{constructor(e,t,r,n,s,i,o,a,d){this.fb=e,this.ofs=t,this.us=r,this.rdf=n,this.sbs=s,this.router=i,this.route=o,this.cs=a,this.ds=d,this.onDrinkSubmit=new c.o,this.isFavorite=!1,this.compDes$=new g.a}get drinkSeriesFc(){return this.ofs.orderFg.get("seriesName")}get drinkNameFc(){return this.ofs.orderFg.get("drinkName")}get drinkSettingsFg(){return this.ofs.orderFg.get("settings")}get drinkToppingsFa(){return this.ofs.orderFg.get("toppings")}get userFc(){return this.ofs.orderFg.get("user")}ngOnChanges(e){this.drinkOrder&&(this.ofs.orderFg=null,this.ofs.orderFg=this.createForm(this.drinkOrder),console.log("FG created: ",this.ofs.orderFg),this.orderStepper&&this.orderStepper.reset(),this.ofs.orderFg.valueChanges.pipe(Object(f.a)(this.ofs.refreshComponent$)).subscribe(e=>{console.log("changes",this.ofs.orderFg.controls),this.currentDrinkSeries=this.drinkSeriesFc.value.name}))}ngOnInit(){}createForm(e){const t=new s.h({});t.addControl("seriesName",S({name:e.drinkType.seriesName,display:e.drinkType.seriesDisplay},!1,[s.s.required])),t.addControl("drinkName",S({name:e.drinkType.name,display:e.drinkType.display},!1,[s.s.required])),t.addControl("settings",this.fb.group({size:S(this.drinkOrder.size,!1,[s.s.required]),ice:S(this.drinkOrder.iceLevel,!1,[s.s.required]),sugar:S(this.drinkOrder.sugar,!1,[s.s.required])}));let r=new s.c([]),n=new V.g("pearls","Pearls"),i=new V.g("coconutJelly","Coconut Jelly");return r.push(S(n,!1)),r.push(S(i,!1)),t.addControl("toppings",r),t.addControl("user",S(null,!1,[s.s.required])),t.addControl("isFavorite",S(!1,!1)),t}onOrderSubmit(){console.log("order status:",this.ofs.orderFg.status),console.log("order value:",this.ofs.orderFg.value),console.log("order fg",this.ofs.orderFg);const e=this.ofs.orderFg.value,t=this.createCurrentDrinkOrderDetail(e),r=this.getSelectedUser(e);let n=new V.c(null,(new Date).getTime(),[],r);n.orders=[t],this.rdf.getCartOrders().push(n).then(t=>{this.sbs.openSnackBar("Added order to cart."),this.proceedToCart(e.isFavorite)},e=>{this.sbs.openSnackBar("There was an error adding this order to cart. Try again.")})}proceedToCart(e){e?this.onFavoriteAdd():this.router.navigate(["../","all"],{relativeTo:this.route})}createCurrentDrinkOrderDetail(e){const t=new V.b(e.settings.ice.name,e.settings.ice.display),r=new V.h(e.drinkName.name,e.drinkName.display,e.seriesName.name,e.seriesName.display),n=new V.e(e.settings.size.name,e.settings.size.display),s=new V.f(e.settings.sugar.name,e.settings.sugar.display);let i=[];return e.toppings.forEach(e=>{i.push(new V.g(e.name,e.display))}),new V.d(t,r,n,s,i)}onFavoriteAdd(){const e=new R("Add new favorite","Name",null,"edit","This will be the name of your favorite drink");this.ds.getFavDrinkAddDialog(e).afterClosed().pipe(Object(f.a)(this.compDes$),Object(E.a)(e=>{if(e){const t=(new Date).getTime();let r=this.cs.getFDB().ref("favorites/"+e);const n=new V.a(r.key,this.getSelectedUser(this.ofs.orderFg.value),t,this.createCurrentDrinkOrderDetail(this.ofs.orderFg.value));return r.set(n)}})).subscribe(e=>{},e=>{this.sbs.openSnackBar("A favorite drink with that name already exists, try a different name.")},()=>{this.sbs.openSnackBar("Favorite drink saved!"),this.router.navigate(["../","all"],{relativeTo:this.route})})}getSelectedUser(e){return new D.a(e.user.id,e.user.display)}ngOnDestroy(){this.compDes$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(s.d),c.Qb(w),c.Qb($),c.Qb(W.a),c.Qb(K),c.Qb(o.b),c.Qb(o.a),c.Qb(q.a),c.Qb(J))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-order-form"]],viewQuery:function(e,t){var r;1&e&&c.Lc(x.a,!0),2&e&&c.sc(r=c.fc())&&(t.orderStepper=r.first)},inputs:{drinkOrder:"drinkOrder"},outputs:{onDrinkSubmit:"onDrinkSubmit"},features:[c.Cb([{provide:F.h,useValue:{showError:!0}}]),c.Bb],decls:47,vars:12,consts:[["linear","",3,"formGroup"],["stepper",""],["errorMessage","Pick a series!",3,"stepControl"],["matStepLabel",""],[3,"seriesCtrl"],["mat-stroked-button","","color","primary","matStepperNext",""],["errorMessage","Drink type required",3,"stepControl"],["title","Pick a drink","matStepLabel",""],[3,"drinkNameCtrl","seriesSelection"],["mat-stroked-button","","color","primary","matStepperPrevious","",1,"mr-1"],["errorMessage","Sugar & ice level required",3,"stepControl"],["title","Pick drink settings","matStepLabel",""],[3,"settingsFg"],[3,"stepControl"],[3,"toppingFa"],[3,"userFc"],[1,"d-flex"],["mat-stroked-button","","matStepperPrevious","",1,"mr-1"],["mat-flat-button","","color","primary",1,"mr-4","order-submit",3,"disabled","click"],["color","primary","formControlName","isFavorite",1,"fav-check"],["title","Pick a drink series"]],template:function(e,t){1&e&&(c.Wb(0,"mat-horizontal-stepper",0,1),c.Wb(2,"mat-step",2),c.Cc(3,ye,2,0,"ng-template",3),c.Rb(4,"app-shared-order-form-series-desc",4),c.Rb(5,"hr"),c.Wb(6,"div"),c.Wb(7,"button",5),c.Ec(8,"Next"),c.Vb(),c.Vb(),c.Vb(),c.Wb(9,"mat-step",6),c.Cc(10,Ce,1,0,"ng-template",7),c.Rb(11,"app-shared-order-form-drink-desc",8),c.Rb(12,"hr"),c.Wb(13,"div"),c.Wb(14,"button",9),c.Ec(15,"Back"),c.Vb(),c.Wb(16,"button",5),c.Ec(17,"Next"),c.Vb(),c.Vb(),c.Vb(),c.Wb(18,"mat-step",10),c.Cc(19,Ve,1,0,"ng-template",11),c.Rb(20,"app-shared-order-form-settings-desc",12),c.Rb(21,"hr"),c.Wb(22,"div"),c.Wb(23,"button",9),c.Ec(24,"Back"),c.Vb(),c.Wb(25,"button",5),c.Ec(26,"Next"),c.Vb(),c.Vb(),c.Vb(),c.Wb(27,"mat-step",13),c.Cc(28,De,1,0,"ng-template",11),c.Rb(29,"app-shared-order-form-topping-desc",14),c.Rb(30,"hr"),c.Wb(31,"div"),c.Wb(32,"button",9),c.Ec(33,"Back"),c.Vb(),c.Wb(34,"button",5),c.Ec(35,"Next"),c.Vb(),c.Vb(),c.Vb(),c.Wb(36,"mat-step"),c.Cc(37,We,1,0,"ng-template",3),c.Rb(38,"app-shared-order-form-confirm-desc",15),c.Rb(39,"hr"),c.Wb(40,"div",16),c.Wb(41,"button",17),c.Ec(42,"Back"),c.Vb(),c.Wb(43,"button",18),c.ec("click",(function(){return t.onOrderSubmit()})),c.Ec(44,"Finish "),c.Vb(),c.Wb(45,"mat-checkbox",19),c.Ec(46,"Save as favorite"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.oc("formGroup",t.ofs.orderFg),c.Db(2),c.oc("stepControl",t.drinkSeriesFc),c.Db(2),c.oc("seriesCtrl",t.drinkSeriesFc),c.Db(5),c.oc("stepControl",t.drinkNameFc),c.Db(2),c.oc("drinkNameCtrl",t.drinkNameFc)("seriesSelection",t.currentDrinkSeries),c.Db(7),c.oc("stepControl",t.drinkSettingsFg),c.Db(2),c.oc("settingsFg",t.drinkSettingsFg),c.Db(7),c.oc("stepControl",t.drinkToppingsFa),c.Db(2),c.oc("toppingFa",t.drinkToppingsFa),c.Db(9),c.oc("userFc",t.userFc),c.Db(5),c.oc("disabled",t.ofs.orderFg&&t.ofs.orderFg.invalid))},directives:[x.a,s.o,s.i,x.b,x.c,te,L.a,x.e,ie,x.f,de,he,ke,Oe.a,s.n,s.g],styles:[".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),e})(),Se=(()=>{class e{constructor(e,t,r){this.fds=e,this.route=t,this.ofs=r,this.route.queryParamMap.subscribe(e=>{this.ofs.refreshComponent$.next(),this.createDefaultDrink()})}ngOnInit(){this.createDefaultDrink()}createDefaultDrink(){(new Date).getTime(),new D.a("kevin","Kevin");const e=new V.b(null,null),t=new V.f(null,null),r=new V.e(null,null),n=new V.h(null,null,null,null);this.drinkOrder=new V.d(e,n,r,t,[])}loadFavorite(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(W.a),c.Qb(o.a),c.Qb(w))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-order-new-create"]],decls:7,vars:1,consts:[[1,"row"],[1,"col-sm-12"],[1,"order-label","mb-3","double-underline","comf","center-align"],[3,"drinkOrder"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Ec(3," Current order "),c.Vb(),c.Vb(),c.Vb(),c.Wb(4,"div",0),c.Wb(5,"div",1),c.Rb(6,"app-shared-order-form",3),c.Vb(),c.Vb()),2&e&&(c.Db(6),c.oc("drinkOrder",t.drinkOrder))},directives:[we],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}"]}),e})();var Fe=r("s5sP"),xe=r("2Gqf"),Ee=r("4ppg");function Ie(e,t){if(1&e){const e=c.Xb();c.Wb(0,"div"),c.Wb(1,"button",12),c.ec("click",(function(){return c.vc(e),c.ic(3).onAddAnother()})),c.Ec(2," Add another"),c.Vb(),c.Vb()}}function Me(e,t){if(1&e&&(c.Ub(0,13),c.Wb(1,"div",14),c.Wb(2,"div",4),c.Rb(3,"app-shared-order-user-info",15),c.Vb(),c.Vb(),c.Wb(4,"div",16),c.Wb(5,"div",3),c.Wb(6,"div",4),c.Rb(7,"app-shared-order-accordion",17),c.Vb(),c.Vb(),c.Vb(),c.Tb()),2&e){const e=t.$implicit,r=t.index,n=c.ic(3);c.Db(3),c.oc("orderNumber",r)("showOrderedDate",!1)("totalOrdersCount",n.cartOrdersGrouped.length)("order",e),c.Db(4),c.oc("drinkOrder",e)("startAsCollapsed",!0)}}function Ne(e,t){if(1&e){const e=c.Xb();c.Ub(0),c.Rb(1,"hr"),c.Wb(2,"div",18),c.Wb(3,"div",4),c.Wb(4,"div"),c.Wb(5,"button",19),c.ec("click",(function(){return c.vc(e),c.ic(3).onCheckoutClick()})),c.Wb(6,"mat-icon",20),c.Ec(7,"credit_card"),c.Vb(),c.Ec(8," Checkout "),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Tb()}}function Pe(e,t){if(1&e&&(c.Ub(0),c.Wb(1,"div",3),c.Wb(2,"div",4),c.Wb(3,"div",5),c.Ec(4),c.jc(5,"countNumberDisplay"),c.Vb(),c.Vb(),c.Vb(),c.Wb(6,"div",6),c.Wb(7,"div",4),c.Wb(8,"div",7),c.Wb(9,"div"),c.Ec(10),c.jc(11,"pluralDisplay"),c.Vb(),c.Cc(12,Ie,3,0,"div",8),c.Vb(),c.Vb(),c.Vb(),c.Cc(13,Me,8,6,"ng-container",9),c.Wb(14,"div",10),c.Wb(15,"div",4),c.Wb(16,"div",11),c.Ec(17," Total cost: TBD "),c.Vb(),c.Vb(),c.Vb(),c.Cc(18,Ne,9,0,"ng-container",8),c.Tb()),2&e){const e=c.ic(2);c.Db(4),c.Gc(" Cart ",c.kc(5,7,e.cartOrders.length)," "),c.Db(6),c.Ic(" There are currently ",e.cartOrders.length," items made from ",e.cartOrdersGrouped.length," ",c.lc(11,9,"person",e.cartOrdersGrouped.length),". "),c.Db(2),c.oc("ngIf",e.cartOrders.length>0),c.Db(1),c.oc("ngForOf",e.cartOrdersGrouped),c.Db(5),c.oc("ngIf",e.cartOrders.length>0)}}function Te(e,t){if(1&e&&(c.Ub(0),c.Cc(1,Pe,19,12,"ng-container",0),c.Tb()),2&e){const e=c.ic(),t=c.tc(2);c.Db(1),c.oc("ngIf",e.listOfUsers.length>0)("ngIfElse",t)}}function _e(e,t){1&e&&(c.Wb(0,"div",21),c.Ec(1," Cart is empty. "),c.Vb())}function Le(e,t){1&e&&(c.Wb(0,"div",21),c.Ec(1," Loading your cart... "),c.Vb())}let je=(()=>{class e{constructor(e,t,r,n){this.rdfs=e,this.cs=t,this.router=r,this.route=n,this.compDest$=new g.a,this.cartOrders=[],this.listOfUsers=[],this.loading=!1,this.cartOrdersGrouped=[]}ngOnInit(){this.cs.cartItemList$.pipe(Object(f.a)(this.compDest$),Object(A.a)(e=>(this.loading=!0,this.cartOrders=[...e],this.listOfUsers=[],this.cartOrdersGrouped=[],e))).subscribe(e=>{this.loading=!1,this.createGroupByUser()})}createGroupByUser(){Y.uniqBy(this.cartOrders,e=>e.user.id).forEach(e=>{this.listOfUsers.push(e.user)}),this.listOfUsers.forEach(e=>{let t=new V.c(null,(new Date).getTime(),[],e);this.cartOrdersGrouped.push(t),this.cartOrders.forEach(t=>{if(t.user.id===e.id){const e=this.cartOrdersGrouped.findIndex(e=>e.user.id===t.user.id);this.cartOrdersGrouped[e].orders.push(t.orders[0])}})})}onCheckoutClick(){this.cartOrders.length>0&&this.router.navigate(["../","checkout"],{relativeTo:this.route})}onAddAnother(){this.router.navigate(["../","new"],{relativeTo:this.route})}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(W.a),c.Qb(q.a),c.Qb(o.b),c.Qb(o.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-order-new-view-all"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyCart",""],["loading",""],[1,"row","mb-3"],[1,"col-sm-12"],[1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-3","comf"],[1,"cart-subtext"],[4,"ngIf"],["class","",4,"ngFor","ngForOf"],[1,"row","mt-3","mb-3"],[1,"order-label","mb-3","comf","d-flex","float-right"],[1,"btn","btn-outline-primary",3,"click"],[1,""],[1,"row","mb-1"],[3,"orderNumber","showOrderedDate","totalOrdersCount","order"],[1,"container-fluid"],[3,"drinkOrder","startAsCollapsed"],[1,"row","mt-4","mb-3"],["mat-flat-button","","color","primary",3,"click"],["matSuffix",""],[1,"comf"]],template:function(e,t){if(1&e&&(c.Cc(0,Te,2,2,"ng-container",0),c.Cc(1,_e,2,0,"ng-template",null,1,c.Dc),c.Cc(3,Le,2,0,"ng-template",null,2,c.Dc)),2&e){const e=c.tc(4);c.oc("ngIf",e)("ngIfElse",e)}},directives:[n.l,n.k,Fe.a,xe.a,L.a,_.a,P.h],pipes:[ue.a,Ee.a],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}.float-right[_ngcontent-%COMP%]{justify-content:flex-end}.cart-subtext[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}"]}),e})();var Qe=r("Cfvw"),Re=r("LRne"),Be=r("bOdf"),Ae=r("0EUg"),Ue=r("B6Xj");let $e=(()=>{class e{transform(e){let t="";const r=e.drinkType.display,n=e.size.display,s=e.iceLevel.display,i=e.sugar.display,o=e.toppings;let a="";return o.forEach((e,t)=>{a=a+e.display+(t===o.length-1?"":", ")}),t=n.toUpperCase()+", "+r+", "+s.toLowerCase()+", "+i.toLowerCase()+", "+a,t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=c.Pb({name:"drinkOrderDetailText",type:e,pure:!0}),e})();const Ge=function(){return{"border-bottom":!0}};function ze(e,t){if(1&e&&(c.Wb(0,"div",3),c.Wb(1,"div",4),c.Wb(2,"div",5),c.Wb(3,"div",6),c.Rb(4,"img",7),c.jc(5,"drinkTypeUrl"),c.Vb(),c.Wb(6,"div",8),c.Ec(7),c.jc(8,"drinkOrderDetailText"),c.Vb(),c.Vb(),c.Vb(),c.Vb()),2&e){const e=t.$implicit;c.oc("ngClass",c.pc(7,Ge)),c.Db(4),c.oc("src",c.kc(5,3,e.orders[0].drinkType.seriesName),c.xc),c.Db(3),c.Gc(" ",c.kc(8,5,e.orders[0])," ")}}let Ke=(()=>{class e{constructor(){this.cartOrders=[]}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-checkout-items-display"]],inputs:{cartOrders:"cartOrders"},decls:4,vars:2,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],["class","row roboto p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","roboto","p-2",3,"ngClass"],[1,"col-sm-12"],[1,"d-flex"],[1,"icon-img-parent","mb-1"],["alt","tea icon",1,"img-h-100",3,"src"],[1,"v-self-align-center","ml-1","order-desc"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Ec(2),c.Vb(),c.Vb(),c.Cc(3,ze,9,8,"div",2)),2&e&&(c.Db(2),c.Gc(" ",t.cartOrders.length," items: "),c.Db(1),c.oc("ngForOf",t.cartOrders))},directives:[n.k,n.j],pipes:[Ue.a,$e],styles:[".icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800;color:#4d4d4d}"]}),e})(),qe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-delivery-comp"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Ec(2," Delivery method: "),c.Vb(),c.Vb(),c.Wb(3,"div",0),c.Wb(4,"div",2),c.Ec(5," Coming soon "),c.Vb(),c.Vb())},styles:[""]}),e})(),Xe=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Kb({type:e,selectors:[["app-shared-payment-info"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Ec(2," Payment information: "),c.Vb(),c.Vb(),c.Wb(3,"div",0),c.Wb(4,"div",2),c.Ec(5," Coming soon "),c.Vb(),c.Vb())},styles:[""]}),e})();const Je=[{path:"",component:y,data:{title:"New Order"},children:[{path:"new",component:Se},{path:"checkout",component:(()=>{class e{constructor(e,t,r,n,s){this.cs=e,this.rfd=t,this.sbs=r,this.router=n,this.route=s,this.compDest$=new g.a,this.cartOrders=[]}ngOnInit(){this.cs.cartItemList$.pipe(Object(f.a)(this.compDest$)).subscribe(e=>{this.cartOrders=[...e]})}ngAfterViewInit(){this.scrollToTopView()}onPlaceOrder(){const e=this.cs.createGroupByUser(this.cartOrders);Object(Qe.a)(e).pipe(Object(Be.a)(e=>this.rfd.openOrdersFDB.push(e))).subscribe(e=>{},e=>{},()=>{this.sbs.openSnackBar("We have received your orders!"),Object(Qe.a)(this.cartOrders).pipe(Object(A.a)(e=>Object(Re.a)(this.cs.cartItemsListFire.remove(e.fireKey))),Object(Ae.a)()).subscribe(e=>{},e=>{},()=>{this.sbs.openSnackBar("We have received your orders."),this.goToCart()})})}goToCart(){this.router.navigate(["../","all"],{relativeTo:this.route})}scrollToTopView(){document.getElementById("checkout-heading").scrollIntoView(!1)}ngOnDestroy(){this.compDest$.next()}}return e.\u0275fac=function(t){return new(t||e)(c.Qb(q.a),c.Qb(W.a),c.Qb(K),c.Qb(o.b),c.Qb(o.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-order-new-checkout"]],decls:22,vars:1,consts:[[1,"row","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-5"],[1,"center-align"],["type","button",1,"btn","btn-success","checkout-btn",3,"click"],[1,"col-sm-5"],[3,"cartOrders"],[1,"col-sm-6","ml-md-auto"],[1,""],[1,"row","mb-3","comf"],[1,"col-sm-6"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Wb(2,"div",2),c.Ec(3," Review and checkout "),c.Vb(),c.Vb(),c.Vb(),c.Wb(4,"div",3),c.Wb(5,"div",1),c.Wb(6,"div",4),c.Wb(7,"button",5),c.ec("click",(function(){return t.onPlaceOrder()})),c.Ec(8,"Place your order"),c.Vb(),c.Vb(),c.Vb(),c.Vb(),c.Wb(9,"div",0),c.Wb(10,"div",6),c.Rb(11,"app-shared-checkout-items-display",7),c.Vb(),c.Wb(12,"div",8),c.Rb(13,"app-shared-delivery-comp"),c.Rb(14,"app-shared-payment-info"),c.Vb(),c.Vb(),c.Wb(15,"div",9),c.Wb(16,"div",10),c.Wb(17,"div",11),c.Ec(18," Tax: $XX.XX "),c.Vb(),c.Vb(),c.Wb(19,"div",10),c.Wb(20,"div",11),c.Ec(21," Total: $XX.XX "),c.Vb(),c.Vb(),c.Vb()),2&e&&(c.Db(11),c.oc("cartOrders",t.cartOrders))},directives:[Ke,qe,Xe],styles:[".checkout-btn[_ngcontent-%COMP%]{width:40rem}.checkout-list[_ngcontent-%COMP%]{border-top:1px solid #cce6ff;border-bottom:1px solid #cce6ff}.icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800}"]}),e})()},{path:"all",component:je,children:[{path:":id",component:C}]}]}];let He=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},imports:[[o.d.forChild(Je)],o.d]}),e})(),Ye=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})();var Ze=r("UmVK"),et=r("37S3"),tt=r("uKK0");let rt=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[Ze.a,s.r,s.j,n.c]]}),e})(),nt=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.j,s.r,o.d,Ze.a,et.a,tt.a,rt]]}),e})();var st=r("sc7Y"),it=r("Nqw2");let ot=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[s.j,n.c,et.a]]}),e})(),at=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})(),ct=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[]]}),e})(),dt=(()=>{class e{}return e.\u0275mod=c.Ob({type:e}),e.\u0275inj=c.Nb({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,s.j,s.r,i.b,Ye,He,nt,Ze.a,et.a,tt.a,st.a,it.a,ot,at,ct]]}),e})()}}]);