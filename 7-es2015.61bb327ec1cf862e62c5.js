(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{oyDf:function(t,e,i){"use strict";i.r(e),i.d(e,"ManagementModule",(function(){return dt}));var r=i("ofXK"),n=i("3Pt+"),s=i("UmVK"),a=i("37S3"),c=i("tyNb"),o=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,n.k,n.s,s.a,a.a,c.f]]}),t})();var b=i("Cicx"),m=i("IYfF"),d=i("VsN/"),u=i("wZkO"),p=i("NFeN"),h=i("MutI"),g=i("f/hT");const f=function(t){return[t]};function k(t,e){if(1&t){const t=o.Wb();o.Vb(0,"a",9,10),o.cc("click",(function(){o.uc(t);const i=e.$implicit;return o.gc(2).activeLink=i})),o.Vb(2,"mat-icon",11),o.Dc(3),o.Ub(),o.Dc(4),o.Ub()}if(2&t){const t=e.$implicit,i=o.rc(1);o.mc("active",i.isActive)("routerLink",o.oc(4,f,t.url)),o.Cb(3),o.Ec(t.iconName),o.Cb(1),o.Fc(" ",t.display," ")}}function D(t,e){if(1&t&&(o.Tb(0),o.Qb(1,"app-notification-banner",5),o.Vb(2,"div",6),o.Vb(3,"div",2),o.Vb(4,"nav",7),o.Bc(5,k,5,6,"a",8),o.Ub(),o.Ub(),o.Ub(),o.Qb(6,"router-outlet"),o.Sb()),2&t){const t=o.gc();o.Cb(1),o.mc("adminRequired",!0),o.Cb(3),o.mc("backgroundColor",void 0),o.Cb(1),o.mc("ngForOf",t.tabLinks)}}function v(t,e){1&t&&o.Qb(0,"app-shared-loading")}let y=(()=>{class t{constructor(t){this.as=t,this.tabLinks=[],this.tabLinks.push(new b.f("inventory","Inventory","inventory",!1,"assignment"),new b.f("users","Users","users",!1,"people"),new b.f("archives","Order Archives","archives",!1,"poll"))}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(m.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-management"]],decls:8,vars:2,consts:[[1,"container","mb-3"],[1,"row","mb-3","comf","text-center","mt-3"],[1,"col-sm-12"],[4,"ngIf","ngIfElse"],["loading",""],[3,"adminRequired"],[1,"row","mb-2","mt-2"],["mat-tab-nav-bar","",3,"backgroundColor"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click",4,"ngFor","ngForOf"],["mat-tab-link","","routerLinkActive","",3,"active","routerLink","click"],["rla","routerLinkActive"],["mat-list-icon","",1,"mr-1"]],template:function(t,e){if(1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Vb(3,"h2"),o.Dc(4,"Management Corner"),o.Ub(),o.Ub(),o.Ub(),o.Bc(5,D,7,3,"ng-container",3),o.Bc(6,v,1,0,"ng-template",null,4,o.Cc),o.Ub()),2&t){const t=o.rc(7);o.Cb(5),o.mc("ngIf",!0)("ngIfElse",t)}},directives:[r.l,d.a,u.b,r.k,c.g,c.e,u.a,c.d,p.a,h.a,g.a],styles:["a.mat-tab-link.mat-focus-indicator.mat-tab-label-active[_ngcontent-%COMP%]{font-weight:800;color:#000;opacity:.9}"]}),t})();var U=i("XNiG"),L=i("1G5W"),C=i("OO0l"),V=i("itXk"),I=i("lJxs"),F=i("sSZD");let S=(()=>{class t{constructor(t){this.firedb=t,this.BASE_SELECTIONS_URL="selections/",this.MILK_TEAS_URL="teas",this.FRUIT_TEAS_URL="creative-mix",this.YOGURT_TEAS_URL="yogurt",this.TOPPINGS_URL="toppings",this.milkTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.MILK_TEAS_URL),this.creativeMixTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.FRUIT_TEAS_URL),this.yogurtTeasListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.YOGURT_TEAS_URL),this.toppingsListFire=this.firedb.list(this.BASE_SELECTIONS_URL+this.TOPPINGS_URL),this.milkTeasList$=this.getCartItemObs(this.milkTeasListFire),this.creativeMixTeasList$=this.getCartItemObs(this.creativeMixTeasListFire),this.yogurtTeasList$=this.getCartItemObs(this.yogurtTeasListFire),this.toppingsList$=this.getCartItemObs(this.toppingsListFire),this.allDrinksList$=Object(V.a)(this.milkTeasList$,this.creativeMixTeasList$,this.yogurtTeasList$,this.toppingsList$)}getFDB(){return this.firedb.database}getCartItemObs(t){return t.snapshotChanges().pipe(Object(I.a)(t=>this.addfireKey(t)))}getDrinkDetailObs(t,e){return this.firedb.object(this.BASE_SELECTIONS_URL+t+"/"+e).snapshotChanges().pipe(Object(I.a)(t=>this.addFireKeySingle(t)))}getDrinkDetail(t,e){return this.firedb.object(this.BASE_SELECTIONS_URL+t+"/"+e)}addFireKeySingle(t){return Object.assign({fireKey:t.payload.key},t.payload.val())}addfireKey(t){return t.map(t=>Object.assign({fireKey:t.payload.key},t.payload.val()))}}return t.\u0275fac=function(e){return new(e||t)(o.Zb(F.a))},t.\u0275prov=o.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var T=i("b8ES"),O=i("AB5n");let w=(()=>{class t{transform(t){let e="";return e+=t.display+" - $"+(t.price?t.price:"Not set"),e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=o.Ob({name:"inventoryDrinkDisplay",type:t,pure:!0}),t})();function E(t,e){if(1&t){const t=o.Wb();o.Vb(0,"li",12),o.cc("click",(function(){o.uc(t);const i=e.$implicit;return o.gc(2).onDrinkItemClick(i)})),o.Dc(1),o.hc(2,"inventoryDrinkDisplay"),o.Ub()}if(2&t){const t=e.$implicit;o.Cb(1),o.Fc(" ",o.ic(2,1,t)," ")}}function N(t,e){if(1&t&&(o.Vb(0,"div",8),o.Vb(1,"ul",9),o.Vb(2,"li",10),o.Dc(3),o.hc(4,"countNumberDisplay"),o.Ub(),o.Bc(5,E,3,3,"li",11),o.Ub(),o.Ub()),2&t){const t=e.$implicit;o.Cb(3),o.Gc("",t.header.display," ",o.ic(4,3,t.links.length),""),o.Cb(2),o.mc("ngForOf",t.links)}}function _(t,e){1&t&&o.Dc(0," Loading drink inventory...\n")}let B=(()=>{class t{constructor(t,e,i,r){this.mis=t,this.fds=e,this.router=i,this.route=r,this.compDest$=new U.a,this.allDrinksList=[],this.inventorySubText="This is a list of all the selections of our editable items on the menu. Click on a item below to edit."}ngOnInit(){this.mis.allDrinksList$.pipe(Object(L.a)(this.compDest$)).subscribe(([t,e,i,r])=>{this.allDrinksList=[];const n=new C.i(t,e,i,r);this.createAllDrinksList(n)},t=>{},()=>{})}createAllDrinksList(t){for(const e in t)this.allDrinksList.push(new b.a(new b.c(e),t[e]))}onDrinkItemClick(t){this.router.navigate([t.seriesName?t.seriesName:"toppings",t.fireKey],{relativeTo:this.route})}ngOnDestroy(){this.compDest$.next(),this.compDest$.complete()}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(S),o.Pb(T.a),o.Pb(c.c),o.Pb(c.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-management-inventory"]],decls:11,vars:2,consts:[[1,"row","mt-3","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","comf","center-align"],[1,"row","mb-3"],[1,"col-sm-12","roboto"],[1,"row"],["class","col-sm-4 mb-3",4,"ngFor","ngForOf"],["loading",""],[1,"col-sm-4","mb-3"],[1,"list-group"],[1,"list-group-item"],["class","list-group-item list-group-item-primary roboto",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-primary","roboto",3,"click"]],template:function(t,e){1&t&&(o.Vb(0,"div",0),o.Vb(1,"div",1),o.Vb(2,"div",2),o.Dc(3," Inventory "),o.Ub(),o.Ub(),o.Ub(),o.Vb(4,"div",3),o.Vb(5,"div",4),o.Dc(6),o.Ub(),o.Ub(),o.Vb(7,"div",5),o.Bc(8,N,6,5,"div",6),o.Ub(),o.Bc(9,_,1,0,"ng-template",null,7,o.Cc)),2&t&&(o.Cb(6),o.Fc(" ",e.inventorySubText," "),o.Cb(2),o.mc("ngForOf",e.allDrinksList))},directives:[r.k],pipes:[O.a,w],styles:[".drink-item[_ngcontent-%COMP%]{cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]{color:#004085;background-color:#cce6ff;cursor:pointer}.list-group-item-primary[_ngcontent-%COMP%]:hover{color:#004085;background-color:#b8daff}"]}),t})(),M=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["app-management-users"]],decls:1,vars:0,template:function(t,e){1&t&&o.Dc(0,"Users\n")},styles:[""]}),t})(),P=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Jb({type:t,selectors:[["app-managment-archives"]],decls:1,vars:0,template:function(t,e){1&t&&o.Dc(0,"Archives\n")},styles:[""]}),t})();var A=i("E8I7"),R=i("eIep"),$=i("Pk+l"),x=i("LvDl"),K=i("MPcn"),j=i("DHDI"),q=i("kmnG"),G=i("qFsG"),J=i("bTqV"),Q=i("d3UM"),W=i("FKr1"),Y=i("B6IJ");function Z(t,e){1&t&&(o.Vb(0,"mat-error"),o.Dc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),o.Ub())}function X(t,e){1&t&&(o.Vb(0,"mat-error"),o.Dc(1," Field is "),o.Vb(2,"strong"),o.Dc(3,"required"),o.Ub(),o.Ub())}function z(t,e){1&t&&(o.Vb(0,"mat-error"),o.Dc(1," Please enter only unaccented alphabetical letters, A\u2013Z or a\u2013z. "),o.Ub())}function H(t,e){1&t&&(o.Vb(0,"mat-error"),o.Dc(1," Field is "),o.Vb(2,"strong"),o.Dc(3,"required"),o.Ub(),o.Ub())}function tt(t,e){if(1&t&&(o.Vb(0,"mat-option",19),o.Dc(1),o.Ub()),2&t){const t=e.$implicit;o.mc("value",t),o.Cb(1),o.Fc(" ",t.seriesDisplay," ")}}function et(t,e){if(1&t&&(o.Vb(0,"tr"),o.Vb(1,"td"),o.Vb(2,"mat-form-field",9),o.Vb(3,"mat-label"),o.Dc(4,"Drink Series"),o.Ub(),o.Vb(5,"mat-select",17),o.Bc(6,tt,2,2,"mat-option",18),o.Ub(),o.Ub(),o.Ub(),o.Ub()),2&t){const t=o.gc(3);o.Cb(6),o.mc("ngForOf",t.seriesList)}}function it(t,e){1&t&&(o.Vb(0,"mat-error"),o.Dc(1," Please enter only integers and decimals. "),o.Ub())}function rt(t,e){if(1&t){const t=o.Wb();o.Tb(0),o.Vb(1,"div",3),o.Vb(2,"div",4),o.Vb(3,"div",5),o.Dc(4," Item Detail "),o.Ub(),o.Vb(5,"div"),o.Dc(6),o.hc(7,"dateDisplay"),o.Ub(),o.Ub(),o.Ub(),o.Vb(8,"div",6),o.Vb(9,"div",7),o.Vb(10,"form",8),o.Vb(11,"table",9),o.Vb(12,"tr"),o.Vb(13,"td"),o.Vb(14,"mat-form-field",9),o.Vb(15,"mat-label"),o.Dc(16,"Drink Display Name"),o.Ub(),o.Qb(17,"input",10),o.Bc(18,Z,2,0,"mat-error",11),o.Bc(19,X,4,0,"mat-error",11),o.Ub(),o.Ub(),o.Ub(),o.Vb(20,"tr"),o.Vb(21,"td"),o.Vb(22,"mat-form-field",9),o.Vb(23,"mat-label"),o.Dc(24,"Drink ID"),o.Ub(),o.Qb(25,"input",12),o.Bc(26,z,2,0,"mat-error",11),o.Bc(27,H,4,0,"mat-error",11),o.Ub(),o.Ub(),o.Ub(),o.Bc(28,et,7,1,"tr",11),o.Vb(29,"tr"),o.Vb(30,"td"),o.Vb(31,"mat-form-field",9),o.Vb(32,"mat-label"),o.Dc(33,"Drink Cost"),o.Ub(),o.Qb(34,"input",13),o.Bc(35,it,2,0,"mat-error",11),o.Vb(36,"span",14),o.Dc(37,"$\xa0"),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Ub(),o.Vb(38,"div",15),o.Vb(39,"div",7),o.Vb(40,"button",16),o.cc("click",(function(){return o.uc(t),o.gc(2).onUpdate()})),o.Dc(41,"Update"),o.Ub(),o.Ub(),o.Ub(),o.Sb()}if(2&t){const t=o.gc(2);o.Cb(6),o.Fc("Last updated: ",o.jc(7,9,t.lastUpdated,"FROMNOW"),""),o.Cb(4),o.mc("formGroup",t.detailFg),o.Cb(8),o.mc("ngIf",t.detailFg.get("display").hasError("lettersOnly")&&!t.detailFg.get("display").hasError("required")),o.Cb(1),o.mc("ngIf",t.detailFg.get("display").hasError("required")),o.Cb(7),o.mc("ngIf",t.detailFg.get("name").hasError("lettersOnly")&&!t.detailFg.get("name").hasError("required")),o.Cb(1),o.mc("ngIf",t.detailFg.get("name").hasError("required")),o.Cb(1),o.mc("ngIf",t.detailFg.controls.drinkSeries),o.Cb(7),o.mc("ngIf",t.detailFg.get("drinkCost").hasError("numbersOnly")),o.Cb(5),o.mc("disabled",t.detailFg.invalid)}}function nt(t,e){if(1&t&&(o.Tb(0),o.Bc(1,rt,42,12,"ng-container",0),o.Sb()),2&t){const t=o.gc(),e=o.rc(2);o.Cb(1),o.mc("ngIf",null!==t.currentDrink)("ngIfElse",e)}}function st(t,e){1&t&&o.Dc(0," Drink item is invalid.\n")}function at(t,e){1&t&&o.Dc(0," Loading drink item...\n")}const ct=[{path:"",component:y,children:[{path:"",redirectTo:"inventory",pathMatch:"full"},{path:"inventory",component:B},{path:"inventory/:drinkSeries/:id",component:(()=>{class t{constructor(t,e,i,r,n){this.router=t,this.route=e,this.is=i,this.fb=r,this.sbs=n,this.seriesList=[new A.d("Milk Tea",A.c.MILK_TEA),new A.d("Creative Mix",A.c.FRUIT_TEA),new A.d("Yogurt",A.c.YOGURT)],this.route.paramMap.pipe(Object(R.a)(t=>{const e=this.getFirebaseDrinkSeries(t.get("drinkSeries")),i=t.get("id");return this.is.getDrinkDetailObs(e,i)})).subscribe(t=>{this.isDrinkDetailValid(t)?(this.currentDrink=t,this.createDetailFg(),this.lastUpdated=this.getLastUpdated()):this.currentDrink=null})}ngOnInit(){}isDrinkDetailValid(t){return t.display&&t.name}createDetailFg(){this.detailFg=this.fb.group({display:$.a(this.currentDrink.display,!1,[n.t.required,K.b]),name:$.a(this.currentDrink.name,!1,[n.t.required,K.b]),drinkCost:$.b(this.getDrinkCost(),!1,[K.c])}),this.currentDrink.seriesName&&this.detailFg.addControl("drinkSeries",$.a(this.getFetchedDrinkSeriesValue(),!1,[n.t.required])),this.currentDrink.itemType&&this.detailFg.addControl("itemType",$.a(this.currentDrink.itemType,!1,[n.t.required]))}getFetchedDrinkSeriesValue(){const t=x.findIndex(this.seriesList,["seriesName",this.currentDrink.seriesName]);return this.seriesList[t]}getDrinkCost(){let t="0.00";return this.currentDrink.price&&(t=this.currentDrink.price),t}getLastUpdated(){let t=0;return this.currentDrink.lastUpdated&&(t=this.currentDrink.lastUpdated),t}onUpdate(){const t=this.createDrinkItemToUpdate();if(t){const e=this.isSeriesSame(t);let i;t.itemType?i=t.itemType:t.seriesName&&(i=this.getFirebaseDrinkSeries(t.seriesName)),this.is.getDrinkDetail(i,this.currentDrink.fireKey).set(t).then(i=>{this.sbs.openSnackBar(t.display+" saved!",1e3),e||this.is.getDrinkDetail(this.getFirebaseDrinkSeries(this.currentDrink.seriesName),this.currentDrink.fireKey).remove(),this.router.navigate(["../../"],{relativeTo:this.route})},e=>{this.sbs.openSnackBar(t.display+" could not be saved, error occured: "+e.code)}).finally(()=>{})}}isSeriesSame(t){return!this.currentDrink||!this.currentDrink.seriesName||this.currentDrink.seriesName===t.seriesName}createDrinkItemToUpdate(){const t=this.detailFg.value;if(this.detailFg.valid){let e=new A.b(t.display,t.name,t.drinkSeries?t.drinkSeries.seriesDisplay:null,t.drinkSeries?t.drinkSeries.seriesName:null,null,t.drinkCost,(new Date).getTime());return t.itemType&&(e.itemType=t.itemType),e}return null}getFirebaseDrinkSeries(t){let e;switch(t){case"milkTea":e="teas";break;case"creativeMix":e="creative-mix";break;case"yogurt":e="yogurt";break;case"toppings":e="toppings"}return e}}return t.\u0275fac=function(e){return new(e||t)(o.Pb(c.c),o.Pb(c.a),o.Pb(S),o.Pb(n.e),o.Pb(j.a))},t.\u0275cmp=o.Jb({type:t,selectors:[["app-inventory-drink-detail"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["drinkInvalid",""],["loadingDrink",""],[1,"row","mb-3"],[1,"col-sm-12","text-center"],[1,"order-label","mb-3","comf","center-align"],[1,"row"],[1,"col-sm-12"],[1,"detail-form",3,"formGroup"],[1,"full-w"],["matInput","","formControlName","display"],[4,"ngIf"],["matInput","","formControlName","name"],["matInput","","formControlName","drinkCost",1,"field-right-align"],["matPrefix",""],[1,"row","mt-2"],["mat-flat-button","","color","primary",3,"disabled","click"],["formControlName","drinkSeries"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){if(1&t&&(o.Bc(0,nt,2,2,"ng-container",0),o.Bc(1,st,1,0,"ng-template",null,1,o.Cc),o.Bc(3,at,1,0,"ng-template",null,2,o.Cc)),2&t){const t=o.rc(4);o.mc("ngIf",void 0!==e.currentDrink)("ngIfElse",t)}},directives:[r.l,n.u,n.p,n.j,q.c,q.g,G.b,n.c,n.o,n.h,q.h,J.a,q.b,Q.a,r.k,W.n],pipes:[Y.a],styles:[".detail-form[_ngcontent-%COMP%]{min-width:150px;max-width:400px;width:100%}.field-right-align[_ngcontent-%COMP%]{text-align:right}"]}),t})()},{path:"users",component:M},{path:"archives",component:P}]}];let ot=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(e){return new(e||t)},imports:[[c.f.forChild(ct)],c.f]}),t})();var lt=i("re6+"),bt=i("gz+R"),mt=i("dwd6");let dt=(()=>{class t{}return t.\u0275mod=o.Nb({type:t}),t.\u0275inj=o.Mb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,n.s,n.k,c.f,s.a,a.a,lt.a,l,bt.a,mt.a,ot]]}),t})()}}]);