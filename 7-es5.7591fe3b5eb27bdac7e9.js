function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{roHT:function(e,t,r){"use strict";r.r(t),r.d(t,"OrderNewModule",(function(){return Tt}));var n,i,s,o,a=r("ofXK"),c=r("3Pt+"),l=r("tk/3"),u=r("tyNb"),d=r("AytR"),b=r("fXoL"),f=r("dZ8w"),p=r("riLL"),h=function(){return["all"]},g=((i=function(){function e(t,r,n){_classCallCheck(this,e),this.abs=t,this.router=r,this.route=n}return _createClass(e,[{key:"getCurrentTime",value:function(){return(new Date).getTime()}},{key:"goToNew",value:function(){this.router.navigate(["new"],{queryParams:{date:this.getCurrentTime()},relativeTo:this.route})}},{key:"ngOnInit",value:function(){this.setupAds()}},{key:"ngOnDestroy",value:function(){}},{key:"setupAds",value:function(){d.a.adsOn&&(this.ads=this.abs.getAds())}}]),e}()).\u0275fac=function(e){return new(e||i)(b.Qb(f.a),b.Qb(u.c),b.Qb(u.a))},i.\u0275cmp=b.Kb({type:i,selectors:[["app-order-new"]],decls:12,vars:3,consts:[[1,"container","mb-3"],[1,"deals-banner","mt-2"],[3,"ads"],[1,"row","mb-2"],[1,"col-sm-12","d-flex","order-nav-group"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"btn","btn-outline-info",3,"routerLink"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Rb(2,"app-shared-ad-banner",2),b.Vb(),b.Rb(3,"hr"),b.Wb(4,"div",3),b.Wb(5,"div",4),b.Wb(6,"button",5),b.ec("click",(function(){return t.goToNew()})),b.Fc(7,"Start new order"),b.Vb(),b.Wb(8,"a",6),b.Fc(9,"My cart"),b.Vb(),b.Vb(),b.Vb(),b.Rb(10,"hr"),b.Rb(11,"router-outlet"),b.Vb()),2&e&&(b.Db(2),b.oc("ads",t.ads),b.Db(6),b.oc("routerLink",b.pc(2,h)))},directives:[p.a,u.e,u.g],styles:[".deals-banner[_ngcontent-%COMP%]{height:30px}.order-nav-group[_ngcontent-%COMP%]{justify-content:space-between}"]}),i),m=((n=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.router=t,this.route=r,this.route.paramMap.subscribe((function(e){console.log("single order:",e.keys),n.orderId=e.get("id")}))}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||n)(b.Qb(u.c),b.Qb(u.a))},n.\u0275cmp=b.Kb({type:n,selectors:[["app-order-new-order"]],decls:1,vars:1,template:function(e,t){1&e&&b.Fc(0),2&e&&b.Hc("Single order display ",t.orderId,"\n")},styles:[""]}),n),v=r("OO0l"),k=r("KJJU"),y=r("1G5W"),C=r("XNiG"),O=r("b8ES"),F=((s=function e(){_classCallCheck(this,e),this.refreshComponent$=new C.a,this.formValid=!1,this.selectionsInvalid=!0,this.userNameInvalid=!0,this.fgErrorMsgs=[]}).\u0275fac=function(e){return new(e||s)},s.\u0275prov=b.Mb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),w=r("Xgv5"),D=r("DHDI"),S=((o=function(){function e(t,r){_classCallCheck(this,e),this.eleRef=t,this.renderer=r,this.isShowState=new b.o,this.isShown=!1}return _createClass(e,[{key:"onClick",value:function(e){"dropdownMenuButton"===e.id&&(this.isShown=!this.isShown,this.isShowState.emit(this.isShown))}},{key:"documentClick",value:function(e){"dropdownMenuButton"!==e.id&&this.isShown&&(this.isShown=!1,this.isShowState.emit(!1))}},{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||o)(b.Qb(b.l),b.Qb(b.F))},o.\u0275dir=b.Lb({type:o,selectors:[["","dropDownShow",""]],hostVars:2,hostBindings:function(e,t){1&e&&b.ec("click",(function(e){return t.onClick(e.target)}))("click",(function(e){return t.documentClick(e.target)}),!1,b.vc),2&e&&b.Hb("show",t.isShown)},outputs:{isShowState:"isShowState"}}),o);function V(e,t){if(1&e){var r=b.Xb();b.Wb(0,"div",5),b.ec("click",(function(){b.wc(r);var e=t.$implicit;return b.ic(2).onFavClick(e)})),b.Fc(1),b.Vb()}if(2&e){var n=t.$implicit;b.Db(1),b.Ic(" ",n.fireKey," (",n.user.display,") ")}}var W=function(e){return{show:e}};function _(e,t){if(1&e){var r=b.Xb();b.Ub(0),b.Wb(1,"div",1),b.ec("isShowState",(function(e){return b.wc(r),b.ic().onIsShowChange(e)})),b.Wb(2,"button",2),b.Fc(3),b.Vb(),b.Wb(4,"div",3),b.Dc(5,V,2,2,"div",4),b.Vb(),b.Vb(),b.Tb()}if(2&e){var n=b.ic();b.Db(3),b.Hc(" Favorites (",n.favItems.length,") "),b.Db(1),b.oc("ngClass",b.qc(3,W,n.isShown)),b.Db(1),b.oc("ngForOf",n.favItems)}}var I,x,M=((I=function(){function e(){_classCallCheck(this,e),this.favItems=[],this.onFavSelect=new b.o}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"onIsShowChange",value:function(e){this.isShown=e}},{key:"onFavClick",value:function(e){e&&this.onFavSelect.emit(e)}}]),e}()).\u0275fac=function(e){return new(e||I)},I.\u0275cmp=b.Kb({type:I,selectors:[["app-order-new-create-fav-list"]],inputs:{favItems:"favItems"},outputs:{onFavSelect:"onFavSelect"},decls:1,vars:1,consts:[[4,"ngIf"],["dropDownShow","",1,"dropdown",3,"isShowState"],["type","button","id","dropdownMenuButton",1,"btn","btn-outline-primary","dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu","mild-dropshadow",3,"ngClass"],["class","dropdown-item",3,"click",4,"ngFor","ngForOf"],[1,"dropdown-item",3,"click"]],template:function(e,t){1&e&&b.Dc(0,_,6,5,"ng-container",0),2&e&&b.oc("ngIf",t.favItems.length>0)},directives:[a.l,S,a.j,a.k],styles:[".dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{cursor:pointer;padding:.45rem 1.5rem}"]}),I),T=r("Pk+l"),L=r("B/XX"),P=r("xHqg"),N=r("eIep"),B=r("8qxb"),j=r("MPcn"),A=r("2Vo4"),$=r("lJxs"),Q=r("sSZD"),U=((x=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.rfd=t,this.firedb=r,this.allUsersr$=new A.a([]),this.BASE_USERS_URL="users",this.usersListFDB=this.firedb.list(this.BASE_USERS_URL),this.allUsersr$=this.usersListFDB.snapshotChanges().pipe(Object($.a)((function(e){return n.addfireKey(e)})))}return _createClass(e,[{key:"getSingleUser",value:function(e){}},{key:"getFDB",value:function(){return this.firedb.database}},{key:"addfireKey",value:function(e){return e.map((function(e){return Object.assign({fireKey:e.payload.key},e.payload.val())}))}}]),e}()).\u0275fac=function(e){return new(e||x)(b.ac(O.a),b.ac(Q.a))},x.\u0275prov=b.Mb({token:x,factory:x.\u0275fac,providedIn:"root"}),x),E=r("H0VJ"),R=r("E8I7"),z=r("LvDl"),G=r("QibW");function K(e,t){if(1&e&&(b.Wb(0,"mat-radio-button",3),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.oc("value",r),b.Db(1),b.Hc(" ",r.display," ")}}var H,X=((H=function(){function e(t){_classCallCheck(this,e),this.ofs=t,this.drinkSeries=[],this.compDest$=new C.a}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.drinkSeries=[],this.drinkSeries.push(new R.a(R.c.MILK_TEA,"Milk Tea"),new R.a(R.c.FRUIT_TEA,"Creative Mix"),new R.a(R.c.YOGURT,"Yogurt")),this.setDefaultValue()}},{key:"setDefaultValue",value:function(){var e=z.findIndex(this.drinkSeries,["name",this.seriesCtrl.value.name]);e>-1&&this.seriesCtrl.setValue(this.drinkSeries[e])}},{key:"onSeriesChange",value:function(){this.ofs.orderFg.get("drinkName").reset(null,{onlySelf:!1,emitEvent:!0})}}]),e}()).\u0275fac=function(e){return new(e||H)(b.Qb(F))},H.\u0275cmp=b.Kb({type:H,selectors:[["app-shared-order-form-series-desc"]],inputs:{seriesCtrl:"seriesCtrl"},features:[b.Bb],decls:7,vars:2,consts:[[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl","ngModelChange"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"p"),b.Fc(2,"Select a drink series to get started."),b.Vb(),b.Wb(3,"p"),b.Fc(4,"We currently have three tea series to choose from:"),b.Vb(),b.Wb(5,"mat-radio-group",1),b.ec("ngModelChange",(function(){return t.onSeriesChange()})),b.Dc(6,K,2,2,"mat-radio-button",2),b.Vb(),b.Vb()),2&e&&(b.Db(5),b.oc("formControl",t.seriesCtrl),b.Db(1),b.oc("ngForOf",t.drinkSeries))},directives:[G.b,c.n,c.f,a.k,G.a],styles:["",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),H),q=r("bTqV");function J(e,t){if(1&e&&(b.Wb(0,"mat-radio-button",5),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.oc("value",r),b.Db(1),b.Hc(" ",r.display," ")}}function Y(e,t){if(1&e&&(b.Wb(0,"div",2),b.Wb(1,"p"),b.Fc(2,"Select a drink:"),b.Vb(),b.Wb(3,"mat-radio-group",3),b.Dc(4,J,2,2,"mat-radio-button",4),b.Vb(),b.Vb()),2&e){var r=b.ic();b.Db(3),b.oc("formControl",r.drinkNameCtrl),b.Db(1),b.oc("ngForOf",r.drinkNames)}}function Z(e,t){1&e&&(b.Wb(0,"p",7),b.Fc(1," We are sorry, there are currently no drinks available for the series you have selected. "),b.Vb())}function ee(e,t){1&e&&(b.Wb(0,"p",7),b.Fc(1," Please go back and select a drink series first! "),b.Vb())}function te(e,t){if(1&e&&(b.Dc(0,Z,2,0,"p",6),b.Dc(1,ee,2,0,"p",6)),2&e){var r=b.ic();b.oc("ngIf",r.isDrinkSeriesSelected),b.Db(1),b.oc("ngIf",!r.isDrinkSeriesSelected)}}var re,ne=((re=function(){function e(t,r){_classCallCheck(this,e),this.fds=t,this.ofs=r,this.drinkNames=[],this.compDest$=new C.a}return _createClass(e,[{key:"ngOnChanges",value:function(e){this.setUpDrinksBySeries()}},{key:"ngOnInit",value:function(){}},{key:"setUpDrinksBySeries",value:function(){var e=this;this.fds.getDrinksBySeriesObs(this.seriesSelection).pipe(Object(y.a)(this.compDest$),Object(y.a)(this.ofs.refreshComponent$)).subscribe((function(t){e.drinkNames=_toConsumableArray(t),e.drinkNames=z.sortBy(e.drinkNames,["display"]),e.setDefaultValue()}))}},{key:"setDefaultValue",value:function(){if(this.drinkNameCtrl.value){var e=z.findIndex(this.drinkNames,["name",this.drinkNameCtrl.value.name]);e>-1&&this.drinkNameCtrl.setValue(this.drinkNames[e])}}},{key:"ngOnDestroy",value:function(){}},{key:"isDrinkSeriesSelected",get:function(){return this.ofs.orderFg.get("seriesName").valid}}]),e}()).\u0275fac=function(e){return new(e||re)(b.Qb(O.a),b.Qb(F))},re.\u0275cmp=b.Kb({type:re,selectors:[["app-shared-order-form-drink-desc"]],inputs:{drinkNameCtrl:"drinkNameCtrl",seriesSelection:"seriesSelection"},features:[b.Bb],decls:3,vars:2,consts:[["class","comf",4,"ngIf","ngIfElse"],["noDrinks",""],[1,"comf"],["color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],[1,"series-radio-button",3,"value"],["class","mb-3",4,"ngIf"],[1,"mb-3"]],template:function(e,t){if(1&e&&(b.Dc(0,Y,5,2,"div",0),b.Dc(1,te,2,2,"ng-template",null,1,b.Ec)),2&e){var r=b.tc(2);b.oc("ngIf",t.drinkNames.length>0)("ngIfElse",r)}},directives:[a.l,G.b,c.n,c.f,a.k,G.a],styles:["p[_ngcontent-%COMP%]{font-family:Comfortaa,cursive!important}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),re),ie=r("itXk"),se=r("5RNC");function oe(e,t){if(1&e&&(b.Wb(0,"mat-radio-button",7),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.oc("value",r),b.Db(1),b.Hc(" ",r.display," ")}}var ae,ce=((ae=function(){function e(t,r){var n=this;_classCallCheck(this,e),this.fds=t,this.ofs=r,this.drinkSizes=[],this.iceOptions=[],this.sugarOptions=[],this.allOptionsLoaded=!1,this.compDest$=new C.a,this.sugarSliderLimit=new le,this.iceSliderLimit=new le,this.thumbDisplaySugarFn=function(e){var t;return null===(t=n.sugarOptions[e])||void 0===t?void 0:t.name},this.thumbDisplayIceFn=function(e){var t;return null===(t=n.iceOptions[e])||void 0===t?void 0:t.name}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.setupSettingOptions2()}},{key:"setupSettingOptions2",value:function(){var e=this;Object(ie.a)(this.fds.getDrinksBySettingOptionObs("size"),this.fds.getDrinksBySettingOptionObs("sugar-level"),this.fds.getDrinksBySettingOptionObs("ice-level"),(function(e,t,r){return{size:e,sugar:t,ice:r}})).pipe(Object(y.a)(this.compDest$),Object(y.a)(this.ofs.refreshComponent$)).subscribe((function(t){t&&(e.allOptionsLoaded=!0,e.drinkSizes=t.size,e.iceOptions=t.ice,e.sugarOptions=t.sugar,e.sortOptionsAsc(),e.setSugarSliderLimits(),e.setIceSliderLimits(),e.setSizeDefaultValue(),e.setSugarDefaultValue(),e.setIceDefaultValue())}))}},{key:"setSizeDefaultValue",value:function(){var e=z.findIndex(this.drinkSizes,["name",this.drinkSizeFc.value.name]);e>-1&&this.drinkSizeFc.setValue(this.drinkSizes[e])}},{key:"setSugarDefaultValue",value:function(){var e=z.findIndex(this.sugarOptions,["name",this.drinkSugarFc.value.name]);this.sugarSliderVal=e,this.currentSugarLevel=this.sugarOptions[e],e>-1&&this.drinkSugarFc.setValue(this.currentSugarLevel)}},{key:"setIceDefaultValue",value:function(){var e=z.findIndex(this.iceOptions,["name",this.drinkIceFc.value.name]);"none"===this.drinkIceFc.value.name&&(e=0),this.iceSliderVal=e,this.currentIceLevel=this.iceOptions[e],e>-1&&this.drinkIceFc.setValue(this.currentIceLevel)}},{key:"sortOptionsAsc",value:function(){this.sugarOptions.sort((function(e,t){return+e.name<+t.name?-1:1})),this.iceOptions.sort((function(e,t){return+e.name<+t.name?-1:1}))}},{key:"setSugarSliderLimits",value:function(){this.sugarSliderLimit.max=this.sugarOptions.length-1}},{key:"setIceSliderLimits",value:function(){this.iceSliderLimit.max=this.iceOptions.length-1}},{key:"onSugarLevelChange",value:function(){this.currentSugarLevel=this.sugarOptions[+this.sugarSliderVal],this.drinkSugarFc.setValue(this.currentSugarLevel)}},{key:"onIceLevelChange",value:function(){this.currentIceLevel=this.iceOptions[+this.iceSliderVal],this.drinkIceFc.setValue(this.currentIceLevel)}},{key:"ngOnDestroy",value:function(){this.compDest$.next()}},{key:"drinkSizeFc",get:function(){return this.settingsFg.get("size")}},{key:"drinkIceFc",get:function(){return this.settingsFg.get("ice")}},{key:"drinkSugarFc",get:function(){return this.settingsFg.get("sugar")}}]),e}()).\u0275fac=function(e){return new(e||ae)(b.Qb(O.a),b.Qb(F))},ae.\u0275cmp=b.Kb({type:ae,selectors:[["app-shared-order-form-settings-desc"]],inputs:{settingsFg:"settingsFg"},features:[b.Bb],decls:19,vars:24,consts:[[1,"comf"],["id","drink-size"],["aria-labelledby","drink-size","color","primary",1,"series-radio-group",3,"formControl"],["class","series-radio-button",3,"value",4,"ngFor","ngForOf"],["id","drink-size",1,"mb-3"],[1,"setting-slider-parent"],["color","primary",1,"setting-slider",3,"disabled","max","min","step","thumbLabel","displayWith","ngModel","vertical","ngModelChange","change"],[1,"series-radio-button",3,"value"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"label",1),b.Fc(2,"Select drink size:"),b.Vb(),b.Wb(3,"mat-radio-group",2),b.Dc(4,oe,2,2,"mat-radio-button",3),b.Vb(),b.Vb(),b.Rb(5,"hr"),b.Wb(6,"div",0),b.Wb(7,"label",4),b.Fc(8),b.jc(9,"lowercase"),b.Vb(),b.Wb(10,"div",5),b.Wb(11,"mat-slider",6),b.ec("ngModelChange",(function(e){return t.sugarSliderVal=e}))("change",(function(){return t.onSugarLevelChange()})),b.Vb(),b.Vb(),b.Vb(),b.Rb(12,"hr"),b.Wb(13,"div",0),b.Wb(14,"label",4),b.Fc(15),b.jc(16,"lowercase"),b.Vb(),b.Wb(17,"div",5),b.Wb(18,"mat-slider",6),b.ec("ngModelChange",(function(e){return t.iceSliderVal=e}))("change",(function(){return t.onIceLevelChange()})),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Db(3),b.oc("formControl",t.drinkSizeFc),b.Db(1),b.oc("ngForOf",t.drinkSizes),b.Db(4),b.Hc("Select sugar level (",b.kc(9,20,null==t.currentSugarLevel?null:t.currentSugarLevel.display),") :"),b.Db(3),b.oc("disabled",!1)("max",t.sugarSliderLimit.max)("min",t.sugarSliderLimit.min)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplaySugarFn)("ngModel",t.sugarSliderVal)("vertical",!1),b.Db(4),b.Hc("Select ice level (",b.kc(16,22,null==t.currentIceLevel?null:t.currentIceLevel.display),") :"),b.Db(3),b.oc("disabled",!1)("max",3)("min",0)("step",1)("thumbLabel",!0)("displayWith",t.thumbDisplayIceFn)("ngModel",t.iceSliderVal)("vertical",!1))},directives:[G.b,c.n,c.f,a.k,se.a,c.q,G.a],pipes:[a.i],styles:[".setting-slider[_ngcontent-%COMP%]{width:100%}.setting-slider-parent[_ngcontent-%COMP%]{width:50%}",".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),ae),le=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,e),this.min=t,this.max=r},ue=r("MutI"),de=r("AB5n");function be(e,t){if(1&e&&(b.Wb(0,"mat-list-option",5),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.oc("value",r)("checkboxPosition","before"),b.Db(1),b.Hc(" ",r.display," ")}}var fe,pe=((fe=function(){function e(t,r,n){_classCallCheck(this,e),this.fds=t,this.fb=r,this.ofs=n,this.drinkToppings=[],this.compDest$=new C.a,this.defaultSelected=[],this.selectedCount=0,this.compareFn=function(e,t){return e.name===t.name}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(e){this.setupToppings(),this.defaultSelected=this.getDefaultSelected(),this.selectedCount=this.toppingFa.length}},{key:"getDefaultSelected",value:function(){return this.toppingFa.value?this.toppingFa.value:[]}},{key:"ngAfterViewInit",value:function(){}},{key:"onSelectionChange",value:function(e){var t=this.toppingList._value;this.selectedCount=e.source.selectedOptions.selected.length;var r=[];t.forEach((function(e){r.push(T.a(e,!1))}));var n=this.fb.array(r);this.ofs.orderFg.setControl("toppings",n)}},{key:"setupToppings",value:function(){var e=this;this.fds.getDrinkToppingObs().pipe(Object(y.a)(this.compDest$),Object(y.a)(this.ofs.refreshComponent$)).subscribe((function(t){t&&(e.drinkToppings=z.sortBy(t,["display"]))}))}},{key:"ngOnDestroy",value:function(){this.compDest$.next()}}]),e}()).\u0275fac=function(e){return new(e||fe)(b.Qb(O.a),b.Qb(c.d),b.Qb(F))},fe.\u0275cmp=b.Kb({type:fe,selectors:[["app-shared-order-form-topping-desc"]],viewQuery:function(e,t){var r;1&e&&b.Lc(ue.g,!0),2&e&&b.sc(r=b.fc())&&(t.toppingList=r.first)},inputs:{toppingFa:"toppingFa"},features:[b.Bb],decls:7,vars:6,consts:[[1,"comf"],[1,"top-label"],[1,"row","top-row"],[3,"compareWith","ngModel","selectionChange"],["color","primary",3,"value","checkboxPosition",4,"ngFor","ngForOf"],["color","primary",3,"value","checkboxPosition"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Fc(2),b.jc(3,"countNumberDisplay"),b.Vb(),b.Wb(4,"div",2),b.Wb(5,"mat-selection-list",3),b.ec("selectionChange",(function(e){return t.onSelectionChange(e)})),b.Dc(6,be,2,3,"mat-list-option",4),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Db(2),b.Hc("Select toppings ",b.kc(3,4,t.selectedCount)," : "),b.Db(3),b.oc("compareWith",t.compareFn)("ngModel",t.defaultSelected),b.Db(1),b.oc("ngForOf",t.drinkToppings))},directives:[ue.g,c.n,c.q,a.k,ue.d],pipes:[de.a],styles:[""]}),fe),he=r("aiZK"),ge=r("kmnG"),me=r("d3UM"),ve=r("FKr1");function ke(e,t){if(1&e&&(b.Wb(0,"li"),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.Db(1),b.Hc(" ",r," ")}}function ye(e,t){if(1&e){var r=b.Xb();b.Wb(0,"span",10),b.ec("click",(function(){return b.wc(r),b.ic(2).onFixGoBack()})),b.Fc(1,"Take me there."),b.Vb()}}function Ce(e,t){if(1&e&&(b.Wb(0,"div",7),b.Wb(1,"p"),b.Fc(2,"Oops! You are missing a few things:"),b.Vb(),b.Wb(3,"ul"),b.Dc(4,ke,2,1,"li",8),b.Vb(),b.Dc(5,ye,2,0,"span",9),b.Vb()),2&e){var r=b.ic();b.Db(4),b.oc("ngForOf",r.ofs.fgErrorMsgs),b.Db(1),b.oc("ngIf",r.showTakeMeThere)}}function Oe(e,t){if(1&e&&(b.Wb(0,"mat-option",11),b.Fc(1),b.Vb()),2&e){var r=t.$implicit;b.oc("value",r),b.Db(1),b.Hc(" ",r.display," ")}}function Fe(e,t){1&e&&(b.Wb(0,"mat-error",12),b.Fc(1," Select a name. "),b.Vb())}var we,De=((we=function(){function e(t,r,n,i,s){_classCallCheck(this,e),this.us=t,this.ds=r,this.rdf=n,this.sbs=i,this.ofs=s,this.fixGoBack=new b.o,this.users=[],this.matcher=new he.b,this.missingSelectionAlert="Please fix your selections.",this.missingUserName="Please pick a user name"}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnChanges",value:function(){var e=this;this.us.allUsersr$.pipe(Object(y.a)(this.ofs.refreshComponent$)).subscribe((function(t){e.users=_toConsumableArray(t),e.setDefaultValue()}))}},{key:"onNameAdd",value:function(){var e=this;this.userAddDialogRef=this.ds.getUserAddDialog(),this.userAddDialogRef.afterClosed().pipe(Object(y.a)(this.ofs.refreshComponent$),Object(N.a)((function(t){if(t){var r=e.us.getFDB().ref("users/"+t.id),n=new k.a(t.id,t.display);return r.set(n)}}))).subscribe((function(e){}),(function(t){e.sbs.openSnackBar("A user with that ID already exists, try a different ID.",1e4)}),(function(){e.sbs.openSnackBar("User added!")}))}},{key:"onPushComplete",value:function(e){this.sbs.openSnackBar("User added!")}},{key:"setDefaultValue",value:function(){if(this.userFc.value){var e=z.findIndex(this.users,["id",this.userFc.value.id]);e>-1?this.userFc.setValue(this.users[e]):this.userFc.reset(null)}}},{key:"onFixGoBack",value:function(){var e=null;this.ofs.orderFg.get("seriesName").invalid?e=0:this.ofs.orderFg.get("drinkName").invalid&&(e=1),this.fixGoBack.emit(e)}},{key:"showTakeMeThere",get:function(){return 1!==this.ofs.fgErrorMsgs.length||"User name required"!==this.ofs.fgErrorMsgs[0]}}]),e}()).\u0275fac=function(e){return new(e||we)(b.Qb(U),b.Qb(E.a),b.Qb(O.a),b.Qb(D.a),b.Qb(F))},we.\u0275cmp=b.Kb({type:we,selectors:[["app-shared-order-form-confirm-desc"]],inputs:{userFc:"userFc"},outputs:{fixGoBack:"fixGoBack"},features:[b.Bb],decls:14,vars:5,consts:[[1,"roboto"],["class","alert alert-danger",4,"ngIf"],[1,"name-field","mb-3"],[3,"formControl","errorStateMatcher"],[3,"value",4,"ngFor","ngForOf"],["class","err",4,"ngIf"],["mat-stroked-button","","color","primary",3,"click"],[1,"alert","alert-danger"],[4,"ngFor","ngForOf"],["class","nav-back",3,"click",4,"ngIf"],[1,"nav-back",3,"click"],[3,"value"],[1,"err"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Dc(1,Ce,6,2,"div",1),b.Wb(2,"mat-form-field",2),b.Wb(3,"mat-label"),b.Fc(4,"Select your name"),b.Vb(),b.Wb(5,"mat-select",3),b.Dc(6,Oe,2,2,"mat-option",4),b.Vb(),b.Wb(7,"mat-hint"),b.Fc(8,"This will be the name your order is under."),b.Vb(),b.Dc(9,Fe,2,0,"mat-error",5),b.Vb(),b.Wb(10,"div"),b.Fc(11," Or add a new name "),b.Wb(12,"button",6),b.ec("click",(function(){return t.onNameAdd()})),b.Fc(13,"here"),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Db(1),b.oc("ngIf",!t.ofs.formValid),b.Db(4),b.oc("formControl",t.userFc)("errorStateMatcher",t.matcher),b.Db(1),b.oc("ngForOf",t.users),b.Db(3),b.oc("ngIf",t.userFc.hasError("required")))},directives:[a.l,ge.c,ge.g,me.a,c.n,c.f,a.k,ge.f,q.a,ve.n,ge.b],styles:[".name-field[_ngcontent-%COMP%]{width:20rem}mat-error.err[_ngcontent-%COMP%]{font-weight:700}div[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:13px}.alert[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]{text-decoration:underline;cursor:pointer}"]}),we),Se=r("bSwM");function Ve(e,t){1&e&&(b.Wb(0,"div",21),b.Fc(1,"Series"),b.Vb())}function We(e,t){1&e&&b.Fc(0,"Drink")}function _e(e,t){1&e&&b.Fc(0,"Size / Sugar / Ice")}function Ie(e,t){1&e&&b.Fc(0,"Toppings")}function xe(e,t){1&e&&b.Fc(0,"Confirmation")}var Me,Te,Le=((Te=function(){function e(t,r,n,i,s,o,a,c,l){_classCallCheck(this,e),this.fb=t,this.ofs=r,this.us=n,this.rdf=i,this.sbs=s,this.router=o,this.route=a,this.cs=c,this.ds=l,this.onDrinkSubmit=new b.o,this.isFavorite=!1,this.compDes$=new C.a,this.labelPosition="bottom",this.isStepperLinear=!1,this.selectionFcNames=["seriesName","drinkName","settings"]}return _createClass(e,[{key:"ngOnChanges",value:function(e){var t=this;this.drinkOrder&&(this.ofs.refreshComponent$.next(),this.orderStepper&&this.orderStepper.reset(),this.ofs.orderFg=null,this.ofs.orderFg=this.createForm(this.drinkOrder),console.log("FG created: ",this.drinkOrder,this.ofs.orderFg),this.setFormValidStatus(this.ofs.orderFg.status),this.ofs.orderFg.valueChanges.pipe(Object(y.a)(this.ofs.refreshComponent$)).subscribe((function(e){t.setFormValidStatus(t.ofs.orderFg.status),t.ofs.fgErrorMsgs=t.examineFgErrors(),console.log("changes",t.ofs.orderFg),t.currentDrinkSeries=t.drinkSeriesFc.value.name})))}},{key:"setFormValidStatus",value:function(e){this.ofs.formValid="VALID"===e}},{key:"ngOnInit",value:function(){}},{key:"createForm",value:function(e){var t=new c.h({});t.addControl("seriesName",T.a({name:e.drinkType.seriesName,display:e.drinkType.seriesDisplay},!1,[j.c])),t.addControl("drinkName",T.a({name:e.drinkType.name,display:e.drinkType.display},!1,[j.c])),t.addControl("settings",this.fb.group({size:T.a(this.drinkOrder.size,!1,[j.c]),ice:T.a(this.drinkOrder.iceLevel,!1,[j.c]),sugar:T.a(this.drinkOrder.sugar,!1,[j.c])}));var r=new c.c([]);return e.toppings.forEach((function(e){r.push(T.a(e,!1))})),t.addControl("toppings",r),t.addControl("user",T.a(e.user?e.user:null,!1,[c.s.required,j.c])),t.addControl("isFavorite",T.a(null,!1)),t}},{key:"onOrderSubmit",value:function(){var e=this;console.log("order status:",this.ofs.orderFg.status),console.log("order value:",this.ofs.orderFg.value),console.log("order fg",this.ofs.orderFg);var t=this.ofs.orderFg.value,r=this.createCurrentDrinkOrderDetail(t),n=this.getSelectedUser(t),i=new v.c(null,(new Date).getTime(),[],n,null);i.orders=[r],this.rdf.getCartOrders().push(i).then((function(r){e.sbs.openSnackBar("Order added to cart."),e.proceedToCart(t.isFavorite)}),(function(t){e.sbs.openSnackBar("There was an error adding this order to cart. Try again.")}))}},{key:"proceedToCart",value:function(e){e?this.onFavoriteAdd():this.router.navigate(["../","all"],{relativeTo:this.route})}},{key:"createCurrentDrinkOrderDetail",value:function(e){var t=new v.b(e.settings.ice.name,e.settings.ice.display),r=new v.h(e.drinkName.name,e.drinkName.display,e.seriesName.name,e.seriesName.display),n=new v.e(e.settings.size.name,e.settings.size.display),i=new v.f(e.settings.sugar.name,e.settings.sugar.display),s=[];return e.toppings.forEach((function(e){s.push(new v.g(e.name,e.display))})),new v.d(t,r,n,i,s)}},{key:"onFavoriteAdd",value:function(){var e=this,t=new B.b("Add new favorite","Name",null,"edit","This will be the name of your favorite drink");this.ds.getFavDrinkAddDialog(t).afterClosed().pipe(Object(y.a)(this.compDes$),Object(N.a)((function(t){if(t){var r=(new Date).getTime(),n=e.cs.getFDB().ref("favorites/"+t),i=new v.a(n.key,e.getSelectedUser(e.ofs.orderFg.value),r,e.createCurrentDrinkOrderDetail(e.ofs.orderFg.value));return n.set(i)}}))).subscribe((function(e){}),(function(t){e.sbs.openSnackBar("A favorite drink with that name already exists, try a different name.")}),(function(){e.sbs.openSnackBar("Favorite drink saved!"),e.router.navigate(["../","all"],{relativeTo:e.route})}))}},{key:"getSelectedUser",value:function(e){return new k.a(e.user.id,e.user.display)}},{key:"onFixGoBack",value:function(e){null!==e&&(this.orderStepper.selectedIndex=e)}},{key:"examineFgErrors",value:function(){var e=[];return this.orderStepper.steps.forEach((function(t){t&&t.stepControl&&t.stepControl.invalid&&e.push(t.errorMessage)})),e}},{key:"ngOnDestroy",value:function(){this.compDes$.next()}},{key:"drinkSeriesFc",get:function(){return this.ofs.orderFg.get("seriesName")}},{key:"drinkNameFc",get:function(){return this.ofs.orderFg.get("drinkName")}},{key:"drinkSettingsFg",get:function(){return this.ofs.orderFg.get("settings")}},{key:"drinkToppingsFa",get:function(){return this.ofs.orderFg.get("toppings")}},{key:"userFc",get:function(){return this.ofs.orderFg.get("user")}},{key:"isFavoriteFc",get:function(){return this.ofs.orderFg.get("isFavorite")}}]),e}()).\u0275fac=function(e){return new(e||Te)(b.Qb(c.d),b.Qb(F),b.Qb(U),b.Qb(O.a),b.Qb(D.a),b.Qb(u.c),b.Qb(u.a),b.Qb(w.a),b.Qb(E.a))},Te.\u0275cmp=b.Kb({type:Te,selectors:[["app-shared-order-form"]],viewQuery:function(e,t){var r;1&e&&b.Lc(P.a,!0),2&e&&b.sc(r=b.fc())&&(t.orderStepper=r.first)},inputs:{drinkOrder:"drinkOrder"},outputs:{onDrinkSubmit:"onDrinkSubmit"},features:[b.Cb([{provide:L.h,useValue:{showError:!0}}]),b.Bb],decls:47,vars:15,consts:[[3,"linear","labelPosition","formGroup"],["stepper",""],["errorMessage","Drink series required",3,"stepControl"],["matStepLabel",""],[3,"seriesCtrl"],["mat-stroked-button","","color","primary","matStepperNext",""],["errorMessage","Drink type required",3,"stepControl"],["title","Pick a drink","matStepLabel",""],[3,"drinkNameCtrl","seriesSelection"],["mat-stroked-button","","color","primary","matStepperPrevious","",1,"mr-1"],["errorMessage","Sugar & ice level required",3,"stepControl"],["title","Pick drink settings","matStepLabel",""],[3,"settingsFg"],[3,"stepControl"],[3,"toppingFa"],["errorMessage","User name required",3,"stepControl"],[3,"userFc","fixGoBack"],[1,"d-flex"],["mat-stroked-button","","matStepperPrevious","",1,"mr-1"],["mat-flat-button","","color","primary",1,"mr-4","order-submit",3,"disabled","click"],["color","primary","formControlName","isFavorite",1,"fav-check"],["title","Pick a drink series"]],template:function(e,t){1&e&&(b.Wb(0,"mat-horizontal-stepper",0,1),b.Wb(2,"mat-step",2),b.Dc(3,Ve,2,0,"ng-template",3),b.Rb(4,"app-shared-order-form-series-desc",4),b.Rb(5,"hr"),b.Wb(6,"div"),b.Wb(7,"button",5),b.Fc(8,"Next"),b.Vb(),b.Vb(),b.Vb(),b.Wb(9,"mat-step",6),b.Dc(10,We,1,0,"ng-template",7),b.Rb(11,"app-shared-order-form-drink-desc",8),b.Rb(12,"hr"),b.Wb(13,"div"),b.Wb(14,"button",9),b.Fc(15,"Back"),b.Vb(),b.Wb(16,"button",5),b.Fc(17,"Next"),b.Vb(),b.Vb(),b.Vb(),b.Wb(18,"mat-step",10),b.Dc(19,_e,1,0,"ng-template",11),b.Rb(20,"app-shared-order-form-settings-desc",12),b.Rb(21,"hr"),b.Wb(22,"div"),b.Wb(23,"button",9),b.Fc(24,"Back"),b.Vb(),b.Wb(25,"button",5),b.Fc(26,"Next"),b.Vb(),b.Vb(),b.Vb(),b.Wb(27,"mat-step",13),b.Dc(28,Ie,1,0,"ng-template",11),b.Rb(29,"app-shared-order-form-topping-desc",14),b.Rb(30,"hr"),b.Wb(31,"div"),b.Wb(32,"button",9),b.Fc(33,"Back"),b.Vb(),b.Wb(34,"button",5),b.Fc(35,"Next"),b.Vb(),b.Vb(),b.Vb(),b.Wb(36,"mat-step",15),b.Dc(37,xe,1,0,"ng-template",3),b.Wb(38,"app-shared-order-form-confirm-desc",16),b.ec("fixGoBack",(function(e){return t.onFixGoBack(e)})),b.Vb(),b.Rb(39,"hr"),b.Wb(40,"div",17),b.Wb(41,"button",18),b.Fc(42,"Back"),b.Vb(),b.Wb(43,"button",19),b.ec("click",(function(){return t.onOrderSubmit()})),b.Fc(44,"Finish "),b.Vb(),b.Wb(45,"mat-checkbox",20),b.Fc(46,"Save as favorite"),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.oc("linear",t.isStepperLinear)("labelPosition",t.labelPosition)("formGroup",t.ofs.orderFg),b.Db(2),b.oc("stepControl",t.drinkSeriesFc),b.Db(2),b.oc("seriesCtrl",t.drinkSeriesFc),b.Db(5),b.oc("stepControl",t.drinkNameFc),b.Db(2),b.oc("drinkNameCtrl",t.drinkNameFc)("seriesSelection",t.currentDrinkSeries),b.Db(7),b.oc("stepControl",t.drinkSettingsFg),b.Db(2),b.oc("settingsFg",t.drinkSettingsFg),b.Db(7),b.oc("stepControl",t.drinkToppingsFa),b.Db(2),b.oc("toppingFa",t.drinkToppingsFa),b.Db(7),b.oc("stepControl",t.userFc),b.Db(2),b.oc("userFc",t.userFc),b.Db(5),b.oc("disabled",t.ofs.orderFg&&t.ofs.orderFg.invalid))},directives:[P.a,c.o,c.i,P.b,P.c,X,q.a,P.e,ne,P.f,ce,pe,De,Se.a,c.n,c.g],styles:[".series-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.series-radio-button[_ngcontent-%COMP%]{margin-bottom:5px}.fav-check[_ngcontent-%COMP%]{display:flex;align-self:flex-end}button.order-submit[_ngcontent-%COMP%]{background-color:#093}"]}),Te),Pe=((Me=function(){function e(t,r,n,i,s){var o=this;_classCallCheck(this,e),this.fds=t,this.route=r,this.ofs=n,this.cs=i,this.sbs=s,this.favItems=[],this.compDest$=new C.a,this.route.queryParamMap.subscribe((function(e){o.ofs.refreshComponent$.next(),o.createDefaultDrink()}))}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.createDefaultDrink(),this.cs.favItemsList$.pipe(Object(y.a)(this.compDest$)).subscribe((function(t){e.favItems=_toConsumableArray(t)}))}},{key:"createDefaultDrink",value:function(){(new Date).getTime(),new k.a("kevin","Kevin");var e=new v.b(null,null),t=new v.f(null,null),r=new v.e(null,null),n=new v.h(null,null,null,null);this.drinkOrder=new v.d(e,n,r,t,[])}},{key:"onFavSelect",value:function(e){var t=new v.b(e.favDrink.iceLevel.name,e.favDrink.iceLevel.display),r=new v.f(e.favDrink.sugar.name,e.favDrink.sugar.display),n=new v.e(e.favDrink.size.name,e.favDrink.size.display),i=new v.h(e.favDrink.drinkType.name,e.favDrink.drinkType.display,e.favDrink.drinkType.seriesName,e.favDrink.drinkType.seriesDisplay),s=[];e.favDrink.toppings.forEach((function(e){s.push(e)})),this.drinkOrder=new v.d(t,i,n,r,s,e.user),this.sbs.openSnackBar('"'+e.fireKey+'" has been applied.')}},{key:"loadFavorite",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Me)(b.Qb(O.a),b.Qb(u.a),b.Qb(F),b.Qb(w.a),b.Qb(D.a))},Me.\u0275cmp=b.Kb({type:Me,selectors:[["app-order-new-create"]],decls:10,vars:2,consts:[[1,"row"],[1,"col-sm-12"],[3,"favItems","onFavSelect"],[1,"order-label","mb-3","double-underline","comf","center-align"],[3,"drinkOrder"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"app-order-new-create-fav-list",2),b.ec("onFavSelect",(function(e){return t.onFavSelect(e)})),b.Vb(),b.Vb(),b.Vb(),b.Wb(3,"div",0),b.Wb(4,"div",1),b.Wb(5,"div",3),b.Fc(6," Current order "),b.Vb(),b.Vb(),b.Vb(),b.Wb(7,"div",0),b.Wb(8,"div",1),b.Rb(9,"app-shared-order-form",4),b.Vb(),b.Vb()),2&e&&(b.Db(2),b.oc("favItems",t.favItems),b.Db(7),b.oc("drinkOrder",t.drinkOrder))},directives:[M,Le],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}"]}),Me),Ne=r("s5sP"),Be=r("2Gqf"),je=r("NFeN"),Ae=r("4ppg");function $e(e,t){if(1&e){var r=b.Xb();b.Ub(0,12),b.Wb(1,"div",13),b.Wb(2,"div",4),b.Rb(3,"app-shared-order-user-info",14),b.Vb(),b.Vb(),b.Wb(4,"div",15),b.Wb(5,"div",3),b.Wb(6,"div",4),b.Wb(7,"app-shared-order-accordion",16),b.ec("orderRemove",(function(e){return b.wc(r),b.ic(3).onOrderRemove(e)})),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Tb()}if(2&e){var n=t.$implicit,i=t.index,s=b.ic(3);b.Db(3),b.oc("orderNumber",i)("showOrderedDate",!1)("totalOrdersCount",s.cartOrdersGrouped.length)("order",n),b.Db(4),b.oc("drinkOrder",n)("editable",!0)("startAsCollapsed",!0)}}function Qe(e,t){if(1&e){var r=b.Xb();b.Ub(0),b.Rb(1,"hr"),b.Wb(2,"div",17),b.Wb(3,"div",4),b.Wb(4,"div"),b.Wb(5,"button",18),b.ec("click",(function(){return b.wc(r),b.ic(3).onCheckoutClick()})),b.Wb(6,"mat-icon",19),b.Fc(7,"credit_card"),b.Vb(),b.Fc(8," Checkout "),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Tb()}}function Ue(e,t){if(1&e&&(b.Ub(0),b.Wb(1,"div",3),b.Wb(2,"div",4),b.Wb(3,"div",5),b.Fc(4),b.jc(5,"countNumberDisplay"),b.Vb(),b.Vb(),b.Vb(),b.Wb(6,"div",6),b.Wb(7,"div",4),b.Wb(8,"div",7),b.Wb(9,"div"),b.Fc(10),b.jc(11,"pluralDisplay"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Dc(12,$e,8,7,"ng-container",8),b.Wb(13,"div",9),b.Wb(14,"div",4),b.Wb(15,"div",10),b.Fc(16," Total cost: TBD "),b.Vb(),b.Vb(),b.Vb(),b.Dc(17,Qe,9,0,"ng-container",11),b.Tb()),2&e){var r=b.ic(2);b.Db(4),b.Hc(" Cart ",b.kc(5,6,r.cartOrders.length)," "),b.Db(6),b.Jc(" There are currently ",r.cartOrders.length," items made from ",r.cartOrdersGrouped.length," ",b.lc(11,8,"person",r.cartOrdersGrouped.length),". "),b.Db(2),b.oc("ngForOf",r.cartOrdersGrouped),b.Db(5),b.oc("ngIf",r.cartOrders.length>0)}}function Ee(e,t){if(1&e&&(b.Ub(0),b.Dc(1,Ue,18,11,"ng-container",0),b.Tb()),2&e){var r=b.ic(),n=b.tc(2);b.Db(1),b.oc("ngIf",r.listOfUsers.length>0)("ngIfElse",n)}}var Re=function(){return["/home/open-orders"]};function ze(e,t){if(1&e&&(b.Wb(0,"div",20),b.Wb(1,"div",21),b.Fc(2," Cart is empty. "),b.Vb(),b.Wb(3,"div",22),b.Wb(4,"a",23),b.Fc(5,"Go see my open orders."),b.Vb(),b.Vb(),b.Wb(6,"div",24),b.Rb(7,"img",25),b.Vb(),b.Vb()),2&e){var r=b.ic();b.Db(4),b.oc("routerLink",b.pc(2,Re)),b.Db(3),b.oc("src",r.bgUrl,b.yc)}}function Ge(e,t){1&e&&(b.Wb(0,"div",20),b.Fc(1," Loading your cart... "),b.Vb())}var Ke,He,Xe=((Ke=function(){function e(t,r,n,i,s){_classCallCheck(this,e),this.rdfs=t,this.cs=r,this.router=n,this.route=i,this.sbs=s,this.compDest$=new C.a,this.cartOrders=[],this.listOfUsers=null,this.cartOrdersGrouped=[],this.bgUrl="assets/images/bg/long-bg-bears.png"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.cs.cartItemList$.pipe(Object(y.a)(this.compDest$)).subscribe((function(t){e.cartOrders=_toConsumableArray(t),e.listOfUsers=[],e.cartOrdersGrouped=[],e.createGroupByUser()}))}},{key:"createGroupByUser",value:function(){var e=this;z.uniqBy(this.cartOrders,(function(e){return e.user.id})).forEach((function(t){e.listOfUsers.push(t.user)})),this.listOfUsers.forEach((function(t){var r=new v.c(null,(new Date).getTime(),[],t,[]);e.cartOrdersGrouped.push(r),e.cartOrders.forEach((function(r){if(r.user.id===t.id){var n=e.cartOrdersGrouped.findIndex((function(e){return e.user.id===r.user.id}));e.cartOrdersGrouped[n].orders.push(r.orders[0]),e.cartOrdersGrouped[n].groupedOrders.push(r)}}))}))}},{key:"onCheckoutClick",value:function(){this.cartOrders.length>0&&this.router.navigate(["../","checkout"],{relativeTo:this.route})}},{key:"onAddAnother",value:function(){this.router.navigate(["../","new"],{relativeTo:this.route})}},{key:"onOrderRemove",value:function(e){var t=this;e&&e.fireKey?this.cs.cartItemsListFire.remove(e.fireKey).then((function(e){t.sbs.openSnackBar("Item removed from cart.")}),(function(e){t.sbs.openSnackBar("Server Error: something went wrong while removing this item.")})):this.sbs.openSnackBar("Error occured removing this item: Item does not exist anymore.")}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||Ke)(b.Qb(O.a),b.Qb(w.a),b.Qb(u.c),b.Qb(u.a),b.Qb(D.a))},Ke.\u0275cmp=b.Kb({type:Ke,selectors:[["app-order-new-view-all"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["emptyCart",""],["loading",""],[1,"row","mb-3"],[1,"col-sm-12"],[1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-3","comf"],[1,"cart-subtext"],["class","",4,"ngFor","ngForOf"],[1,"row","mt-3","mb-3"],[1,"order-label","mb-3","comf","d-flex","float-right"],[4,"ngIf"],[1,""],[1,"row","mb-1"],[3,"orderNumber","showOrderedDate","totalOrdersCount","order"],[1,"container-fluid"],[3,"drinkOrder","editable","startAsCollapsed","orderRemove"],[1,"row","mt-4","mb-3"],["mat-flat-button","","color","primary",3,"click"],["matSuffix",""],[1,"comf"],[1,"banner-text","center-align","mb-4"],[1,"comf","center-align","mb-5"],[3,"routerLink"],[1,"bg-parent","center-align"],["alt","bg",1,"img-h-100","b-r-10",3,"src"]],template:function(e,t){if(1&e&&(b.Dc(0,Ee,2,2,"ng-container",0),b.Dc(1,ze,8,3,"ng-template",null,1,b.Ec),b.Dc(3,Ge,2,0,"ng-template",null,2,b.Ec)),2&e){var r=b.tc(4);b.oc("ngIf",t.listOfUsers)("ngIfElse",r)}},directives:[a.l,a.k,Ne.a,Be.a,q.a,je.a,ge.i,u.e],pipes:[de.a,Ae.a],styles:[".order-label[_ngcontent-%COMP%]{font-size:1.3rem;color:#000;font-weight:800}.float-right[_ngcontent-%COMP%]{justify-content:flex-end}.cart-subtext[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.bg-parent[_ngcontent-%COMP%]{display:flex;height:50rem;justify-content:center;overflow:hidden;opacity:.3}.banner-text[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:800}"]}),Ke),qe=r("Cfvw"),Je=r("LRne"),Ye=r("bOdf"),Ze=r("0EUg"),et=r("B6Xj"),tt=((He=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"transform",value:function(e){var t=e.drinkType.display,r=e.size.display,n=e.iceLevel.display,i=e.sugar.display,s=e.toppings,o="";return s?s.forEach((function(e,t){o=o+e.display+(t===s.length-1?"":", ")})):o=" No toppings",r.toUpperCase()+", "+t+", "+n.toLowerCase()+", "+i.toLowerCase()+", "+o}}]),e}()).\u0275fac=function(e){return new(e||He)},He.\u0275pipe=b.Pb({name:"drinkOrderDetailText",type:He,pure:!0}),He),rt=function(){return{"border-bottom":!0}};function nt(e,t){if(1&e&&(b.Wb(0,"div",3),b.Wb(1,"div",4),b.Wb(2,"div",5),b.Wb(3,"div",6),b.Rb(4,"img",7),b.jc(5,"drinkTypeUrl"),b.Vb(),b.Wb(6,"div",8),b.Fc(7),b.jc(8,"drinkOrderDetailText"),b.Vb(),b.Vb(),b.Vb(),b.Vb()),2&e){var r=t.$implicit;b.oc("ngClass",b.pc(7,rt)),b.Db(4),b.oc("src",b.kc(5,3,r.orders[0].drinkType.seriesName),b.yc),b.Db(3),b.Hc(" ",b.kc(8,5,r.orders[0])," ")}}var it,st,ot,at,ct,lt,ut,dt,bt,ft,pt,ht,gt=((ot=function(){function e(){_classCallCheck(this,e),this.cartOrders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||ot)},ot.\u0275cmp=b.Kb({type:ot,selectors:[["app-shared-checkout-items-display"]],inputs:{cartOrders:"cartOrders"},decls:4,vars:2,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],["class","row roboto p-2",3,"ngClass",4,"ngFor","ngForOf"],[1,"row","roboto","p-2",3,"ngClass"],[1,"col-sm-12"],[1,"d-flex"],[1,"icon-img-parent","mb-1"],["alt","tea icon",1,"img-h-100",3,"src"],[1,"v-self-align-center","ml-1","order-desc"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Fc(2),b.Vb(),b.Vb(),b.Dc(3,nt,9,8,"div",2)),2&e&&(b.Db(2),b.Hc(" ",t.cartOrders.length," items: "),b.Db(1),b.oc("ngForOf",t.cartOrders))},directives:[a.k,a.j],pipes:[et.a,tt],styles:[".icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800;color:#4d4d4d}"]}),ot),mt=((st=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||st)},st.\u0275cmp=b.Kb({type:st,selectors:[["app-shared-delivery-comp"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Fc(2," Delivery method: "),b.Vb(),b.Vb(),b.Wb(3,"div",0),b.Wb(4,"div",2),b.Fc(5," Coming soon "),b.Vb(),b.Vb())},styles:[""]}),st),vt=((it=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||it)},it.\u0275cmp=b.Kb({type:it,selectors:[["app-shared-payment-info"]],decls:6,vars:0,consts:[[1,"row"],[1,"col-sm-12","order-label","mb-3","solid-underline"],[1,"col-sm-12"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Fc(2," Payment information: "),b.Vb(),b.Vb(),b.Wb(3,"div",0),b.Wb(4,"div",2),b.Fc(5," Coming soon "),b.Vb(),b.Vb())},styles:[""]}),it),kt=[{path:"",component:g,data:{title:"New Order"},children:[{path:"",redirectTo:"new",pathMatch:"full"},{path:"new",component:Pe},{path:"checkout",component:(ct=function(){function e(t,r,n,i,s){_classCallCheck(this,e),this.cs=t,this.rfd=r,this.sbs=n,this.router=i,this.route=s,this.compDest$=new C.a,this.cartOrders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.cs.cartItemList$.pipe(Object(y.a)(this.compDest$)).subscribe((function(t){e.cartOrders=_toConsumableArray(t)}))}},{key:"ngAfterViewInit",value:function(){this.scrollToTopView()}},{key:"onPlaceOrder",value:function(){var e=this,t=this.cs.createGroupByUser(this.cartOrders);Object(qe.a)(t).pipe(Object(Ye.a)((function(t){return e.rfd.openOrdersFDB.push(t)}))).subscribe((function(e){}),(function(e){}),(function(){Object(qe.a)(e.cartOrders).pipe(Object($.a)((function(t){return Object(Je.a)(e.cs.cartItemsListFire.remove(t.fireKey))})),Object(Ze.a)()).subscribe((function(e){}),(function(e){}),(function(){e.sbs.openSnackBar("We have received your orders!"),e.goToCart()}))}))}},{key:"goToCart",value:function(){this.router.navigate(["../","all"],{relativeTo:this.route})}},{key:"scrollToTopView",value:function(){document.getElementById("checkout-heading").scrollIntoView(!1)}},{key:"ngOnDestroy",value:function(){this.compDest$.next()}}]),e}(),ct.\u0275fac=function(e){return new(e||ct)(b.Qb(w.a),b.Qb(O.a),b.Qb(D.a),b.Qb(u.c),b.Qb(u.a))},ct.\u0275cmp=b.Kb({type:ct,selectors:[["app-order-new-checkout"]],decls:22,vars:1,consts:[[1,"row","mb-3"],[1,"col-sm-6","offset-md-3"],["id","checkout-heading",1,"order-label","mb-3","double-underline","comf","center-align"],[1,"row","mb-5"],[1,"center-align"],["type","button",1,"btn","btn-success","checkout-btn",3,"click"],[1,"col-sm-5"],[3,"cartOrders"],[1,"col-sm-6","ml-md-auto"],[1,""],[1,"row","mb-3","comf"],[1,"col-sm-6"]],template:function(e,t){1&e&&(b.Wb(0,"div",0),b.Wb(1,"div",1),b.Wb(2,"div",2),b.Fc(3," Review and checkout "),b.Vb(),b.Vb(),b.Vb(),b.Wb(4,"div",3),b.Wb(5,"div",1),b.Wb(6,"div",4),b.Wb(7,"button",5),b.ec("click",(function(){return t.onPlaceOrder()})),b.Fc(8,"Place your order"),b.Vb(),b.Vb(),b.Vb(),b.Vb(),b.Wb(9,"div",0),b.Wb(10,"div",6),b.Rb(11,"app-shared-checkout-items-display",7),b.Vb(),b.Wb(12,"div",8),b.Rb(13,"app-shared-delivery-comp"),b.Rb(14,"app-shared-payment-info"),b.Vb(),b.Vb(),b.Wb(15,"div",9),b.Wb(16,"div",10),b.Wb(17,"div",11),b.Fc(18," Tax: $XX.XX "),b.Vb(),b.Vb(),b.Wb(19,"div",10),b.Wb(20,"div",11),b.Fc(21," Total: $XX.XX "),b.Vb(),b.Vb(),b.Vb()),2&e&&(b.Db(11),b.oc("cartOrders",t.cartOrders))},directives:[gt,mt,vt],styles:[".checkout-btn[_ngcontent-%COMP%]{width:40rem}.checkout-list[_ngcontent-%COMP%]{border-top:1px solid #cce6ff;border-bottom:1px solid #cce6ff}.icon-img-parent[_ngcontent-%COMP%]{height:25px}.order-desc[_ngcontent-%COMP%]{font-size:14px;font-weight:800}"]}),ct),canActivate:[(at=function(){function e(t,r,n){_classCallCheck(this,e),this.router=t,this.route=r,this.cs=n}return _createClass(e,[{key:"canActivate",value:function(e,t){var r=this;return this.cs.cartItemList$.pipe(Object($.a)((function(e){return!!(e&&e.length>0)||(r.router.navigate(["/","new-order"]),!1)})))}}]),e}(),at.\u0275fac=function(e){return new(e||at)(b.ac(u.c),b.ac(u.a),b.ac(w.a))},at.\u0275prov=b.Mb({token:at,factory:at.\u0275fac,providedIn:"root"}),at)]},{path:"all",component:Xe,children:[{path:":id",component:m}]}]}],yt=((lt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:lt}),lt.\u0275inj=b.Nb({factory:function(e){return new(e||lt)},imports:[[u.f.forChild(kt)],u.f]}),lt),Ct=r("iJtq"),Ot=r("UmVK"),Ft=r("37S3"),wt=r("uKK0"),Dt=((dt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:dt}),dt.\u0275inj=b.Nb({factory:function(e){return new(e||dt)},providers:[],imports:[[Ot.a,c.r,c.j,a.c]]}),dt),St=((ut=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:ut}),ut.\u0275inj=b.Nb({factory:function(e){return new(e||ut)},providers:[],imports:[[a.c,c.j,c.r,u.f,Ot.a,Ft.a,wt.a,Dt]]}),ut),Vt=r("sc7Y"),Wt=r("Nqw2"),_t=((pt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:pt}),pt.\u0275inj=b.Nb({factory:function(e){return new(e||pt)},providers:[],imports:[[c.j,a.c,Ft.a]]}),pt),It=((ft=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:ft}),ft.\u0275inj=b.Nb({factory:function(e){return new(e||ft)},providers:[],imports:[[]]}),ft),xt=((bt=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:bt}),bt.\u0275inj=b.Nb({factory:function(e){return new(e||bt)},providers:[],imports:[[]]}),bt),Mt=r("re6+"),Tt=((ht=function e(){_classCallCheck(this,e)}).\u0275mod=b.Ob({type:ht}),ht.\u0275inj=b.Nb({factory:function(e){return new(e||ht)},providers:[],imports:[[a.c,c.j,c.r,l.b,Ct.a,yt,St,Ot.a,Ft.a,wt.a,Vt.a,Wt.a,_t,It,xt,Mt.a]]}),ht)}}]);